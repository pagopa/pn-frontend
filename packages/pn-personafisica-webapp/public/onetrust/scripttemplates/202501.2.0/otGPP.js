(function(){function me(){"use strict";me=function(){return l};var u,l={},v=Object.prototype,p=v.hasOwnProperty,b=Object.defineProperty||function(g,c,S){g[c]=S.value},K=typeof Symbol=="function"?Symbol:{},Y=K.iterator||"@@iterator",se=K.asyncIterator||"@@asyncIterator",H=K.toStringTag||"@@toStringTag";function f(g,c,S){return Object.defineProperty(g,c,{value:S,enumerable:!0,configurable:!0,writable:!0}),g[c]}try{f({},"")}catch(g){f=function(S,N,C){return S[N]=C}}function we(g,c,S,N){var C=c&&c.prototype instanceof xe?c:xe,I=Object.create(C.prototype),U=new Oe(N||[]);return b(I,"_invoke",{value:le(g,S,U)}),I}function Ie(g,c,S){try{return{type:"normal",arg:g.call(c,S)}}catch(N){return{type:"throw",arg:N}}}l.wrap=we;var _e="suspendedStart",ut="suspendedYield",Ke="executing",Me="completed",ae={};function xe(){}function Q(){}function fe(){}var be={};f(be,Y,function(){return this});var Ue=Object.getPrototypeOf,Pe=Ue&&Ue(Ue(je([])));Pe&&Pe!==v&&p.call(Pe,Y)&&(be=Pe);var Te=fe.prototype=xe.prototype=Object.create(be);function He(g){["next","throw","return"].forEach(function(c){f(g,c,function(S){return this._invoke(c,S)})})}function ye(g,c){function S(C,I,U,G){var B=Ie(g[C],g,I);if(B.type!=="throw"){var de=B.arg,j=de.value;return j&&ge(j)=="object"&&p.call(j,"__await")?c.resolve(j.__await).then(function(ve){S("next",ve,U,G)},function(ve){S("throw",ve,U,G)}):c.resolve(j).then(function(ve){de.value=ve,U(de)},function(ve){return S("throw",ve,U,G)})}G(B.arg)}var N;b(this,"_invoke",{value:function(I,U){function G(){return new c(function(B,de){S(I,U,B,de)})}return N=N?N.then(G,G):G()}})}function le(g,c,S){var N=_e;return function(C,I){if(N===Ke)throw Error("Generator is already running");if(N===Me){if(C==="throw")throw I;return{value:u,done:!0}}for(S.method=C,S.arg=I;;){var U=S.delegate;if(U){var G=Ae(U,S);if(G){if(G===ae)continue;return G}}if(S.method==="next")S.sent=S._sent=S.arg;else if(S.method==="throw"){if(N===_e)throw N=Me,S.arg;S.dispatchException(S.arg)}else S.method==="return"&&S.abrupt("return",S.arg);N=Ke;var B=Ie(g,c,S);if(B.type==="normal"){if(N=S.done?Me:ut,B.arg===ae)continue;return{value:B.arg,done:S.done}}B.type==="throw"&&(N=Me,S.method="throw",S.arg=B.arg)}}}function Ae(g,c){var S=c.method,N=g.iterator[S];if(N===u)return c.delegate=null,S==="throw"&&g.iterator.return&&(c.method="return",c.arg=u,Ae(g,c),c.method==="throw")||S!=="return"&&(c.method="throw",c.arg=new TypeError("The iterator does not provide a '"+S+"' method")),ae;var C=Ie(N,g.iterator,c.arg);if(C.type==="throw")return c.method="throw",c.arg=C.arg,c.delegate=null,ae;var I=C.arg;return I?I.done?(c[g.resultName]=I.value,c.next=g.nextLoc,c.method!=="return"&&(c.method="next",c.arg=u),c.delegate=null,ae):I:(c.method="throw",c.arg=new TypeError("iterator result is not an object"),c.delegate=null,ae)}function De(g){var c={tryLoc:g[0]};1 in g&&(c.catchLoc=g[1]),2 in g&&(c.finallyLoc=g[2],c.afterLoc=g[3]),this.tryEntries.push(c)}function ke(g){var c=g.completion||{};c.type="normal",delete c.arg,g.completion=c}function Oe(g){this.tryEntries=[{tryLoc:"root"}],g.forEach(De,this),this.reset(!0)}function je(g){if(g||g===""){var c=g[Y];if(c)return c.call(g);if(typeof g.next=="function")return g;if(!isNaN(g.length)){var S=-1,N=function C(){for(;++S<g.length;)if(p.call(g,S))return C.value=g[S],C.done=!1,C;return C.value=u,C.done=!0,C};return N.next=N}}throw new TypeError(ge(g)+" is not iterable")}return Q.prototype=fe,b(Te,"constructor",{value:fe,configurable:!0}),b(fe,"constructor",{value:Q,configurable:!0}),Q.displayName=f(fe,H,"GeneratorFunction"),l.isGeneratorFunction=function(g){var c=typeof g=="function"&&g.constructor;return!!c&&(c===Q||(c.displayName||c.name)==="GeneratorFunction")},l.mark=function(g){return Object.setPrototypeOf?Object.setPrototypeOf(g,fe):(g.__proto__=fe,f(g,H,"GeneratorFunction")),g.prototype=Object.create(Te),g},l.awrap=function(g){return{__await:g}},He(ye.prototype),f(ye.prototype,se,function(){return this}),l.AsyncIterator=ye,l.async=function(g,c,S,N,C){C===void 0&&(C=Promise);var I=new ye(we(g,c,S,N),C);return l.isGeneratorFunction(c)?I:I.next().then(function(U){return U.done?U.value:I.next()})},He(Te),f(Te,H,"Generator"),f(Te,Y,function(){return this}),f(Te,"toString",function(){return"[object Generator]"}),l.keys=function(g){var c=Object(g),S=[];for(var N in c)S.push(N);return S.reverse(),function C(){for(;S.length;){var I=S.pop();if(I in c)return C.value=I,C.done=!1,C}return C.done=!0,C}},l.values=je,Oe.prototype={constructor:Oe,reset:function(c){if(this.prev=0,this.next=0,this.sent=this._sent=u,this.done=!1,this.delegate=null,this.method="next",this.arg=u,this.tryEntries.forEach(ke),!c)for(var S in this)S.charAt(0)==="t"&&p.call(this,S)&&!isNaN(+S.slice(1))&&(this[S]=u)},stop:function(){this.done=!0;var c=this.tryEntries[0].completion;if(c.type==="throw")throw c.arg;return this.rval},dispatchException:function(c){if(this.done)throw c;var S=this;function N(de,j){return U.type="throw",U.arg=c,S.next=de,j&&(S.method="next",S.arg=u),!!j}for(var C=this.tryEntries.length-1;C>=0;--C){var I=this.tryEntries[C],U=I.completion;if(I.tryLoc==="root")return N("end");if(I.tryLoc<=this.prev){var G=p.call(I,"catchLoc"),B=p.call(I,"finallyLoc");if(G&&B){if(this.prev<I.catchLoc)return N(I.catchLoc,!0);if(this.prev<I.finallyLoc)return N(I.finallyLoc)}else if(G){if(this.prev<I.catchLoc)return N(I.catchLoc,!0)}else{if(!B)throw Error("try statement without catch or finally");if(this.prev<I.finallyLoc)return N(I.finallyLoc)}}}},abrupt:function(c,S){for(var N=this.tryEntries.length-1;N>=0;--N){var C=this.tryEntries[N];if(C.tryLoc<=this.prev&&p.call(C,"finallyLoc")&&this.prev<C.finallyLoc){var I=C;break}}I&&(c==="break"||c==="continue")&&I.tryLoc<=S&&S<=I.finallyLoc&&(I=null);var U=I?I.completion:{};return U.type=c,U.arg=S,I?(this.method="next",this.next=I.finallyLoc,ae):this.complete(U)},complete:function(c,S){if(c.type==="throw")throw c.arg;return c.type==="break"||c.type==="continue"?this.next=c.arg:c.type==="return"?(this.rval=this.arg=c.arg,this.method="return",this.next="end"):c.type==="normal"&&S&&(this.next=S),ae},finish:function(c){for(var S=this.tryEntries.length-1;S>=0;--S){var N=this.tryEntries[S];if(N.finallyLoc===c)return this.complete(N.completion,N.afterLoc),ke(N),ae}},catch:function(c){for(var S=this.tryEntries.length-1;S>=0;--S){var N=this.tryEntries[S];if(N.tryLoc===c){var C=N.completion;if(C.type==="throw"){var I=C.arg;ke(N)}return I}}throw Error("illegal catch attempt")},delegateYield:function(c,S,N){return this.delegate={iterator:je(c),resultName:S,nextLoc:N},this.method==="next"&&(this.arg=u),ae}},l}function Pt(u,l,v,p,b,K,Y){try{var se=u[K](Y),H=se.value}catch(f){return void v(f)}se.done?l(H):Promise.resolve(H).then(p,b)}function ht(u){return function(){var l=this,v=arguments;return new Promise(function(p,b){var K=u.apply(l,v);function Y(H){Pt(K,p,b,Y,se,"next",H)}function se(H){Pt(K,p,b,Y,se,"throw",H)}Y(void 0)})}}function ie(u,l,v,p){var b=gt(Ve(1&p?u.prototype:u),l,v);return 2&p&&typeof b=="function"?function(K){return b.apply(v,K)}:b}function gt(){return gt=typeof Reflect!="undefined"&&Reflect.get?Reflect.get.bind():function(u,l,v){var p=kt(u,l);if(p){var b=Object.getOwnPropertyDescriptor(p,l);return b.get?b.get.call(arguments.length<3?u:v):b.value}},gt.apply(null,arguments)}function kt(u,l){for(;!{}.hasOwnProperty.call(u,l)&&(u=Ve(u))!==null;);return u}function Be(u){var l=typeof Map=="function"?new Map:void 0;return Be=function(p){if(p===null||!Gt(p))return p;if(typeof p!="function")throw new TypeError("Super expression must either be null or a function");if(l!==void 0){if(l.has(p))return l.get(p);l.set(p,b)}function b(){return Lt(p,arguments,Ve(this).constructor)}return b.prototype=Object.create(p.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),We(b,p)},Be(u)}function Lt(u,l,v){if(ft())return Reflect.construct.apply(null,arguments);var p=[null];p.push.apply(p,l);var b=new(u.bind.apply(u,p));return v&&We(b,v.prototype),b}function Gt(u){try{return Function.toString.call(u).indexOf("[native code]")!==-1}catch(l){return typeof u=="function"}}function Se(u){return xt(u)||Bt(u)||mt(u)||Ft()}function Ft(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Bt(u){if(typeof Symbol!="undefined"&&u[Symbol.iterator]!=null||u["@@iterator"]!=null)return Array.from(u)}function xt(u){if(Array.isArray(u))return _t(u)}function m(u,l,v){return l=Ve(l),Ht(u,ft()?Reflect.construct(l,v||[],Ve(u).constructor):l.apply(u,v))}function Ht(u,l){if(l&&(ge(l)=="object"||typeof l=="function"))return l;if(l!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return W(u)}function W(u){if(u===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u}function ft(){try{var u=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(l){}return(ft=function(){return!!u})()}function Ve(u){return Ve=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(l){return l.__proto__||Object.getPrototypeOf(l)},Ve(u)}function V(u,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");u.prototype=Object.create(l&&l.prototype,{constructor:{value:u,writable:!0,configurable:!0}}),Object.defineProperty(u,"prototype",{writable:!1}),l&&We(u,l)}function We(u,l){return We=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(v,p){return v.__proto__=p,v},We(u,l)}function yt(u,l){for(var v=0;v<l.length;v++){var p=l[v];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(u,Rt(p.key),p)}}function T(u,l,v){return l&&yt(u.prototype,l),v&&yt(u,v),Object.defineProperty(u,"prototype",{writable:!1}),u}function O(u,l){if(!(u instanceof l))throw new TypeError("Cannot call a class as a function")}function h(u,l,v){return(l=Rt(l))in u?Object.defineProperty(u,l,{value:v,enumerable:!0,configurable:!0,writable:!0}):u[l]=v,u}function Rt(u){var l=jt(u,"string");return ge(l)=="symbol"?l:l+""}function jt(u,l){if(ge(u)!="object"||!u)return u;var v=u[Symbol.toPrimitive];if(v!==void 0){var p=v.call(u,l||"default");if(ge(p)!="object")return p;throw new TypeError("@@toPrimitive must return a primitive value.")}return(l==="string"?String:Number)(u)}function ge(u){return ge=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},ge(u)}function Dt(u,l){var v=typeof Symbol!="undefined"&&u[Symbol.iterator]||u["@@iterator"];if(!v){if(Array.isArray(u)||(v=mt(u))||l&&u&&typeof u.length=="number"){v&&(u=v);var p=0,b=function(){};return{s:b,n:function(){return p>=u.length?{done:!0}:{done:!1,value:u[p++]}},e:function(f){throw f},f:b}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var K,Y=!0,se=!1;return{s:function(){v=v.call(u)},n:function(){var f=v.next();return Y=f.done,f},e:function(f){se=!0,K=f},f:function(){try{Y||v.return==null||v.return()}finally{if(se)throw K}}}}function mt(u,l){if(u){if(typeof u=="string")return _t(u,l);var v={}.toString.call(u).slice(8,-1);return v==="Object"&&u.constructor&&(v=u.constructor.name),v==="Map"||v==="Set"?Array.from(u):v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v)?_t(u,l):void 0}}function _t(u,l){(l==null||l>u.length)&&(l=u.length);for(var v=0,p=Array(l);v<l;v++)p[v]=u[v];return p}(function(){var u=Object.defineProperty,l=Object.defineProperties,v=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,b=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable,Y=function(r,e,n){return e in r?u(r,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[e]=n},se=function(r,e){for(var n in e||(e={}))b.call(e,n)&&Y(r,n,e[n]);if(p){var t=Dt(p(e)),o;try{for(t.s();!(o=t.n()).done;){var n=o.value;K.call(e,n)&&Y(r,n,e[n])}}catch(s){t.e(s)}finally{t.f()}}return r},H=function(r,e){return l(r,v(e))},f=function(r,e,n){return Y(r,ge(e)!="symbol"?e+"":e,n),n},we=T(function i(r,e,n,t){O(this,i),h(this,"eventName",void 0),h(this,"listenerId",void 0),h(this,"data",void 0),h(this,"pingData",void 0),this.eventName=r,this.listenerId=e,this.data=n,this.pingData=t}),Ie=T(function i(r){O(this,i),h(this,"gppVersion",void 0),h(this,"cmpStatus",void 0),h(this,"cmpDisplayStatus",void 0),h(this,"signalStatus",void 0),h(this,"supportedAPIs",void 0),h(this,"cmpId",void 0),h(this,"sectionList",void 0),h(this,"applicableSections",void 0),h(this,"gppString",void 0),h(this,"parsedSections",void 0),this.gppVersion=r.gppVersion,this.cmpStatus=r.cmpStatus,this.cmpDisplayStatus=r.cmpDisplayStatus,this.signalStatus=r.signalStatus,this.supportedAPIs=r.supportedAPIs,this.cmpId=r.cmpId,this.sectionList=r.gppModel.getSectionIds(),this.applicableSections=r.applicableSections,this.gppString=r.gppModel.encode(),this.parsedSections=r.gppModel.toObject()}),_e=function(){function i(r,e,n){O(this,i),h(this,"callback",void 0),h(this,"parameter",void 0),h(this,"success",!0),h(this,"cmpApiContext",void 0),this.cmpApiContext=r,Object.assign(this,{callback:e,parameter:n})}return T(i,[{key:"execute",value:function(){try{return this.respond()}catch(e){return this.invokeCallback(null),null}}},{key:"invokeCallback",value:function(e){var n=e!==null;this.callback&&this.callback(e,n)}}])}(),ut=function(i){function r(){return O(this,r),m(this,r,arguments)}return V(r,i),T(r,[{key:"respond",value:function(){var n=this.cmpApiContext.eventQueue.add({callback:this.callback,parameter:this.parameter}),t=new we("listenerRegistered",n,!0,new Ie(this.cmpApiContext));this.invokeCallback(t)}}])}(_e),Ke=function(i){function r(){return O(this,r),m(this,r,arguments)}return V(r,i),T(r,[{key:"respond",value:function(){var n=new Ie(this.cmpApiContext);this.invokeCallback(n)}}])}(_e),Me=function(i){function r(){return O(this,r),m(this,r,arguments)}return V(r,i),T(r,[{key:"respond",value:function(){if(!this.parameter||this.parameter.length===0)throw new Error("<section>.<field> parameter required");var n=this.parameter.split(".");if(n.length!=2)throw new Error("Field name must be in the format <section>.<fieldName>");var t=n[0],o=n[1],s=this.cmpApiContext.gppModel.getFieldValue(t,o);this.invokeCallback(s)}}])}(_e),ae=function(i){function r(){return O(this,r),m(this,r,arguments)}return V(r,i),T(r,[{key:"respond",value:function(){if(!this.parameter||this.parameter.length===0)throw new Error("<section> parameter required");var n=null;this.cmpApiContext.gppModel.hasSection(this.parameter)&&(n=this.cmpApiContext.gppModel.getSection(this.parameter)),this.invokeCallback(n)}}])}(_e),xe=function(i){function r(){return O(this,r),m(this,r,arguments)}return V(r,i),T(r,[{key:"respond",value:function(){if(!this.parameter||this.parameter.length===0)throw new Error("<section>[.version] parameter required");var n=this.cmpApiContext.gppModel.hasSection(this.parameter);this.invokeCallback(n)}}])}(_e),Q;(function(i){i.ADD_EVENT_LISTENER="addEventListener",i.GET_FIELD="getField",i.GET_SECTION="getSection",i.HAS_SECTION="hasSection",i.PING="ping",i.REMOVE_EVENT_LISTENER="removeEventListener"})(Q||(Q={}));var fe=function(i){function r(){return O(this,r),m(this,r,arguments)}return V(r,i),T(r,[{key:"respond",value:function(){var n=this.parameter,t=this.cmpApiContext.eventQueue.remove(n),o=new we("listenerRemoved",n,t,new Ie(this.cmpApiContext));this.invokeCallback(o)}}])}(_e),be,Ue,Pe,Te,He,ye,le=T(function i(){O(this,i)});be=Q.ADD_EVENT_LISTENER,Ue=Q.GET_FIELD,Pe=Q.GET_SECTION,Te=Q.HAS_SECTION,He=Q.PING,ye=Q.REMOVE_EVENT_LISTENER,f(le,be,ut),f(le,Ue,Me),f(le,Pe,ae),f(le,Te,xe),f(le,He,Ke),f(le,ye,fe);var Ae;(function(i){i.STUB="stub",i.LOADING="loading",i.LOADED="loaded",i.ERROR="error"})(Ae||(Ae={}));var De;(function(i){i.VISIBLE="visible",i.HIDDEN="hidden",i.DISABLED="disabled"})(De||(De={}));var ke;(function(i){i.GPP_LOADED="gpploaded",i.CMP_UI_SHOWN="cmpuishown",i.USER_ACTION_COMPLETE="useractioncomplete"})(ke||(ke={}));var Oe;(function(i){i.NOT_READY="not ready",i.READY="ready"})(Oe||(Oe={}));var je=function(){function i(r,e){if(O(this,i),h(this,"callQueue",void 0),h(this,"customCommands",void 0),h(this,"cmpApiContext",void 0),this.cmpApiContext=r,e){var n=Q.ADD_EVENT_LISTENER;if(e!=null&&e[n])throw new Error("Built-In Custom Commmand for ".concat(n," not allowed"));if(n=Q.REMOVE_EVENT_LISTENER,e!=null&&e[n])throw new Error("Built-In Custom Commmand for ".concat(n," not allowed"));this.customCommands=e}try{this.callQueue=window.__gpp()||[]}catch(t){this.callQueue=[]}finally{window.__gpp=this.apiCall.bind(this),this.purgeQueuedCalls()}}return T(i,[{key:"apiCall",value:function(e,n,t,o){if(typeof e!="string")n(null,!1);else{if(n&&typeof n!="function")throw new Error("invalid callback function");this.isCustomCommand(e)?this.customCommands[e](n,t):this.isBuiltInCommand(e)?new le[e](this.cmpApiContext,n,t).execute():n&&n(null,!1)}}},{key:"purgeQueuedCalls",value:function(){var e=this.callQueue;this.callQueue=[],e.forEach(function(n){var t;(t=window).__gpp.apply(t,Se(n))})}},{key:"isCustomCommand",value:function(e){return this.customCommands&&typeof this.customCommands[e]=="function"}},{key:"isBuiltInCommand",value:function(e){return le[e]!==void 0}}])}(),g=function(){function i(r){O(this,i),h(this,"eventQueue",new Map),h(this,"queueNumber",1e3),h(this,"cmpApiContext",void 0),this.cmpApiContext=r;try{for(var e=window.__gpp("events")||[],n=0;n<e.length;n++){var t=e[n];this.eventQueue.set(t.id,{callback:t.callback,parameter:t.parameter})}}catch(o){console.log(o)}}return T(i,[{key:"add",value:function(e){return this.eventQueue.set(this.queueNumber,e),this.queueNumber++}},{key:"get",value:function(e){return this.eventQueue.get(e)}},{key:"remove",value:function(e){return this.eventQueue.delete(e)}},{key:"exec",value:function(e,n){var t=this;this.eventQueue.forEach(function(o,s){var a=new we(e,s,n,new Ie(t.cmpApiContext)),d=!0;o.callback(a,d)})}},{key:"clear",value:function(){this.queueNumber=1e3,this.eventQueue.clear()}},{key:"size",get:function(){return this.eventQueue.size}}])}(),c=function(i){function r(e){var n;return O(this,r),n=m(this,r,[e]),n.name="DecodingError",n}return V(r,i),T(r)}(Be(Error)),S=function(){function i(){O(this,i)}return T(i,null,[{key:"encode",value:function(e,n){var t=[];if(e>=1)for(t.push(1);e>=t[0]*2;)t.unshift(t[0]*2);for(var o="",s=0;s<t.length;s++){var a=t[s];e>=a?(o+="1",e-=a):o+="0"}for(;o.length<n;)o="0"+o;return o}},{key:"decode",value:function(e){if(!/^[0-1]*$/.test(e))throw new c("Undecodable FixedInteger '"+e+"'");for(var n=0,t=[],o=0;o<e.length;o++)o===0?t[e.length-(o+1)]=1:t[e.length-(o+1)]=t[e.length-o]*2;for(var s=0;s<e.length;s++)e.charAt(s)==="1"&&(n+=t[s]);return n}}])}(),N=function(i){function r(e){var n;return O(this,r),n=m(this,r,[e]),n.name="EncodingError",n}return V(r,i),T(r)}(Be(Error)),C=function(){function i(){O(this,i)}return T(i,[{key:"encode",value:function(e){if(!/^[0-1]*$/.test(e))throw new N("Unencodable Base64Url '"+e+"'");e=this.pad(e);for(var n="",t=0;t<=e.length-6;){var o=e.substring(t,t+6);try{var s=S.decode(o),a=C.DICT.charAt(s);n+=a,t+=6}catch(d){throw new N("Unencodable Base64Url '"+e+"'")}}return n}},{key:"decode",value:function(e){if(!/^[A-Za-z0-9\-_]*$/.test(e))throw new c("Undecodable Base64URL string");for(var n="",t=0;t<e.length;t++){var o=e.charAt(t),s=C.REVERSE_DICT.get(o),a=S.encode(s,6);n+=a}return n}}])}(),I=C;f(I,"DICT","ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),f(I,"REVERSE_DICT",new Map([["A",0],["B",1],["C",2],["D",3],["E",4],["F",5],["G",6],["H",7],["I",8],["J",9],["K",10],["L",11],["M",12],["N",13],["O",14],["P",15],["Q",16],["R",17],["S",18],["T",19],["U",20],["V",21],["W",22],["X",23],["Y",24],["Z",25],["a",26],["b",27],["c",28],["d",29],["e",30],["f",31],["g",32],["h",33],["i",34],["j",35],["k",36],["l",37],["m",38],["n",39],["o",40],["p",41],["q",42],["r",43],["s",44],["t",45],["u",46],["v",47],["w",48],["x",49],["y",50],["z",51],["0",52],["1",53],["2",54],["3",55],["4",56],["5",57],["6",58],["7",59],["8",60],["9",61],["-",62],["_",63]]));var U=function(i){function r(){return O(this,r),m(this,r,arguments)}return V(r,i),T(r,[{key:"pad",value:function(n){for(;n.length%8>0;)n+="0";for(;n.length%6>0;)n+="0";return n}}])}(I),G=function(){function i(){O(this,i)}return T(i,null,[{key:"encode",value:function(e){var n=[];if(e>=1&&(n.push(1),e>=2)){n.push(2);for(var t=2;e>=n[t-1]+n[t-2];)n.push(n[t-1]+n[t-2]),t++}for(var o="1",s=n.length-1;s>=0;s--){var a=n[s];e>=a?(o="1"+o,e-=a):o="0"+o}return o}},{key:"decode",value:function(e){if(!/^[0-1]*$/.test(e)||e.length<2||e.indexOf("11")!==e.length-2)throw new c("Undecodable FibonacciInteger '"+e+"'");for(var n=0,t=[],o=0;o<e.length-1;o++)o===0?t.push(1):o===1?t.push(2):t.push(t[o-1]+t[o-2]);for(var s=0;s<e.length-1;s++)e.charAt(s)==="1"&&(n+=t[s]);return n}}])}(),B=function(){function i(){O(this,i)}return T(i,null,[{key:"encode",value:function(e){if(e===!0)return"1";if(e===!1)return"0";throw new N("Unencodable Boolean '"+e+"'")}},{key:"decode",value:function(e){if(e==="1")return!0;if(e==="0")return!1;throw new c("Undecodable Boolean '"+e+"'")}}])}(),de=function(){function i(){O(this,i)}return T(i,null,[{key:"encode",value:function(e){e=e.sort(function(R,he){return R-he});for(var n=[],t=0,o=0;o<e.length;){for(var s=o;s<e.length-1&&e[s]+1===e[s+1];)s++;n.push(e.slice(o,s+1)),o=s+1}for(var a=S.encode(n.length,12),d=0;d<n.length;d++)if(n[d].length==1){var y=n[d][0]-t;t=n[d][0],a+="0"+G.encode(y)}else{var x=n[d][0]-t;t=n[d][0];var oe=n[d][n[d].length-1]-t;t=n[d][n[d].length-1],a+="1"+G.encode(x)+G.encode(oe)}return a}},{key:"decode",value:function(e){if(!/^[0-1]*$/.test(e)||e.length<12)throw new c("Undecodable FibonacciIntegerRange '"+e+"'");for(var n=[],t=S.decode(e.substring(0,12)),o=0,s=12,a=0;a<t;a++){var d=B.decode(e.substring(s,s+1));if(s++,d===!0){var y=e.indexOf("11",s),x=G.decode(e.substring(s,y+2))+o;o=x,s=y+2,y=e.indexOf("11",s);var oe=G.decode(e.substring(s,y+2))+o;o=oe,s=y+2;for(var R=x;R<=oe;R++)n.push(R)}else{var he=e.indexOf("11",s),Ne=G.decode(e.substring(s,he+2))+o;o=Ne,n.push(Ne),s=he+2}}return n}}])}(),j=function(){function i(){O(this,i),h(this,"value",void 0)}return T(i,[{key:"hasValue",value:function(){return this.value!==void 0&&this.value!==null}},{key:"getValue",value:function(){return this.value}},{key:"setValue",value:function(e){this.value=e}}])}(),ve=function(i){function r(e){var n;return O(this,r),n=m(this,r),n.setValue(e),n}return V(r,i),T(r,[{key:"encode",value:function(){return de.encode(this.value)}},{key:"decode",value:function(n){this.value=de.decode(n)}},{key:"substring",value:function(n,t){for(var o=S.decode(n.substring(t,t+12)),s=t+12,a=0;a<o;a++)n.charAt(s)==="1"?s=n.indexOf("11",n.indexOf("11",s+1)+2)+2:s=n.indexOf("11",s+1)+2;return n.substring(t,s)}},{key:"getValue",value:function(){return Se(ie(r,"getValue",this,3)([]))}},{key:"setValue",value:function(n){ie(r,"setValue",this,3)([Array.from(new Set(n)).sort(function(t,o){return t-o})])}}])}(j),E=function(i){function r(e,n){var t;return O(this,r),t=m(this,r),h(W(t),"bitStringLength",void 0),t.bitStringLength=e,t.setValue(n),t}return V(r,i),T(r,[{key:"encode",value:function(){return S.encode(this.value,this.bitStringLength)}},{key:"decode",value:function(n){this.value=S.decode(n)}},{key:"substring",value:function(n,t){return n.substring(t,t+this.bitStringLength)}}])}(j),Ce;(function(i){i.ID="Id",i.VERSION="Version",i.SECTION_IDS="SectionIds"})(Ce||(Ce={}));var ct=function(){function i(r,e){O(this,i),h(this,"fields",void 0),h(this,"fieldOrder",void 0),this.fields=r,this.fieldOrder=e}return T(i,[{key:"hasField",value:function(e){return this.fields.has(e)}},{key:"getFieldValue",value:function(e){return this.fields.has(e)?this.fields.get(e).getValue():null}},{key:"setFieldValue",value:function(e,n){if(this.fields.has(e))this.fields.get(e).setValue(n);else throw new Error(e+" not found")}},{key:"getFieldOrder",value:function(){return this.fieldOrder}},{key:"encodeToBitString",value:function(){for(var e="",n=0;n<this.fieldOrder.length;n++){var t=this.fieldOrder[n];if(this.fields.has(t)){var o=this.fields.get(t);e+=o.encode()}else throw new Error("Field not found: '"+t+"'")}return e}},{key:"decodeFromBitString",value:function(e){for(var n=0,t=0;t<this.fieldOrder.length;t++){var o=this.fieldOrder[t];if(this.fields.has(o)){var s=this.fields.get(o),a=s.substring(e,n);s.decode(a),n+=a.length}else throw new Error("Field not found: '"+o+"'")}}},{key:"toObj",value:function(){for(var e={},n=0;n<this.fieldOrder.length;n++){var t=this.fieldOrder[n];if(this.fields.has(t)){var o=this.fields.get(t).getValue();e[t]=o}}return e}}])}(),Ye=function(i){function r(e){var n;O(this,r);var t=new Map;t.set(Ce.ID.toString(),new E(6,Ye.ID)),t.set(Ce.VERSION.toString(),new E(6,Ye.VERSION)),t.set(Ce.SECTION_IDS.toString(),new ve([]));var o=[Ce.ID.toString(),Ce.VERSION.toString(),Ce.SECTION_IDS.toString()];return n=m(this,r,[t,o]),h(W(n),"base64UrlEncoder",new U),e&&e.length>0&&n.decode(e),n}return V(r,i),T(r,[{key:"encode",value:function(){var n=this.encodeToBitString();return this.base64UrlEncoder.encode(n)}},{key:"decode",value:function(n){var t=this.base64UrlEncoder.decode(n);this.decodeFromBitString(t)}},{key:"getId",value:function(){return Ye.ID}},{key:"getName",value:function(){return Ye.NAME}}])}(ct),Re=Ye;f(Re,"ID",3),f(Re,"VERSION",1),f(Re,"NAME","header");var ue=function(i){function r(e){var n;return O(this,r),n=m(this,r),n.setValue(e),n}return V(r,i),T(r,[{key:"encode",value:function(){return B.encode(this.value)}},{key:"decode",value:function(n){this.value=B.decode(n)}},{key:"substring",value:function(n,t){return n.substring(t,t+1)}}])}(j),Tt=function(){function i(){O(this,i)}return T(i,null,[{key:"encode",value:function(e){return e?S.encode(Math.round(e.getTime()/100),36):S.encode(0,36)}},{key:"decode",value:function(e){if(!/^[0-1]*$/.test(e)||e.length!==36)throw new c("Undecodable Datetime '"+e+"'");return new Date(S.decode(e)*100)}}])}(),Qe=function(i){function r(e){var n;return O(this,r),n=m(this,r),n.setValue(e),n}return V(r,i),T(r,[{key:"encode",value:function(){return Tt.encode(this.value)}},{key:"decode",value:function(n){this.value=Tt.decode(n)}},{key:"substring",value:function(n,t){return n.substring(t,t+36)}}])}(j),Le=function(){function i(){O(this,i)}return T(i,null,[{key:"encode",value:function(e,n){for(var t="",o=0;o<e.length;o++)t+=B.encode(e[o]);for(;t.length<n;)t+="0";return t}},{key:"decode",value:function(e){if(!/^[0-1]*$/.test(e))throw new c("Undecodable FixedBitfield '"+e+"'");for(var n=[],t=0;t<e.length;t++)n.push(B.decode(e.substring(t,t+1)));return n}}])}(),Xe=function(i){function r(e,n){var t;return O(this,r),t=m(this,r),h(W(t),"getLength",void 0),t.getLength=e,t.setValue(n),t}return V(r,i),T(r,[{key:"encode",value:function(){return Le.encode(this.value,this.getLength())}},{key:"decode",value:function(n){this.value=Le.decode(n)}},{key:"substring",value:function(n,t){return n.substring(t,t+this.getLength())}},{key:"getValue",value:function(){return Se(ie(r,"getValue",this,3)([]))}},{key:"setValue",value:function(n){for(var t=this.getLength(),o=Se(n),s=o.length;s<t;s++)o.push(!1);o.length>t&&(o=o.slice(0,t)),ie(r,"setValue",this,3)([Se(o)])}}])}(j),Ee=function(i){function r(e){var n;return O(this,r),n=m(this,r),h(W(n),"numElements",void 0),n.numElements=e.length,n.setValue(e),n}return V(r,i),T(r,[{key:"encode",value:function(){return Le.encode(this.value,this.numElements)}},{key:"decode",value:function(n){this.value=Le.decode(n)}},{key:"substring",value:function(n,t){return n.substring(t,t+this.numElements)}},{key:"getValue",value:function(){return Se(ie(r,"getValue",this,3)([]))}},{key:"setValue",value:function(n){for(var t=Se(n),o=t.length;o<this.numElements;o++)t.push(!1);t.length>this.numElements&&(t=t.slice(0,this.numElements)),ie(r,"setValue",this,3)([t])}}])}(j),Ot=function(){function i(){O(this,i)}return T(i,null,[{key:"encode",value:function(e,n){for(;e.length<n;)e+=" ";for(var t="",o=0;o<e.length;o++){var s=e.charCodeAt(o);if(s===32)t+=S.encode(63,6);else if(s>=65)t+=S.encode(e.charCodeAt(o)-65,6);else throw new N("Unencodable FixedString '"+e+"'")}return t}},{key:"decode",value:function(e){if(!/^[0-1]*$/.test(e)||e.length%6!==0)throw new c("Undecodable FixedString '"+e+"'");for(var n="",t=0;t<e.length;t+=6){var o=S.decode(e.substring(t,t+6));o===63?n+=" ":n+=String.fromCharCode(o+65)}return n.trim()}}])}(),St=function(i){function r(e,n){var t;return O(this,r),t=m(this,r),h(W(t),"stringLength",void 0),t.stringLength=e,t.setValue(n),t}return V(r,i),T(r,[{key:"encode",value:function(){return Ot.encode(this.value,this.stringLength)}},{key:"decode",value:function(n){this.value=Ot.decode(n)}},{key:"substring",value:function(n,t){return n.substring(t,t+this.stringLength*6)}}])}(j),Ge=function(){function i(r,e){O(this,i),h(this,"fields",void 0),h(this,"segments",void 0),this.fields=r,this.segments=e}return T(i,[{key:"hasField",value:function(e){return this.fields.has(e)}},{key:"getFieldValue",value:function(e){return this.fields.has(e)?this.fields.get(e).getValue():null}},{key:"setFieldValue",value:function(e,n){if(this.fields.has(e))this.fields.get(e).setValue(n);else throw new Error(e+" not found")}},{key:"getSegments",value:function(){return this.segments}},{key:"encodeSegmentsToBitStrings",value:function(){for(var e=[],n=0;n<this.segments.length;n++){for(var t="",o=0;o<this.segments[n].length;o++){var s=this.segments[n][o];if(this.fields.has(s))try{var a=this.fields.get(s);t+=a.encode()}catch(d){throw new Error("Unable to encode "+s)}else throw new Error("Field not found: '"+s+"'")}e.push(t)}return e}},{key:"decodeSegmentsFromBitStrings",value:function(e){for(var n=0;n<this.segments.length&&n<e.length;n++){var t=e[n];if(t&&t.length>0)for(var o=0,s=0;s<this.segments[n].length;s++){var a=this.segments[n][s];if(this.fields.has(a))try{var d=this.fields.get(a),y=d.substring(t,o);d.decode(y),o+=y.length}catch(x){throw new Error("Unable to decode "+a)}else throw new Error("Field not found: '"+a+"'")}}}},{key:"toObj",value:function(){for(var e={},n=0;n<this.segments.length;n++)for(var t=0;t<this.segments[n].length;t++){var o=this.segments[n][t];if(this.fields.has(o)){var s=this.fields.get(o).getValue();e[o]=s}}return e}}])}(),$e=function(){function i(){O(this,i)}return T(i,null,[{key:"encode",value:function(e){e.sort(function(d,y){return d-y});for(var n=[],t=0;t<e.length;){for(var o=t;o<e.length-1&&e[o]+1===e[o+1];)o++;n.push(e.slice(t,o+1)),t=o+1}for(var s=S.encode(n.length,12),a=0;a<n.length;a++)n[a].length===1?s+="0"+S.encode(n[a][0],16):s+="1"+S.encode(n[a][0],16)+S.encode(n[a][n[a].length-1],16);return s}},{key:"decode",value:function(e){if(!/^[0-1]*$/.test(e)||e.length<12)throw new c("Undecodable FixedIntegerRange '"+e+"'");for(var n=[],t=S.decode(e.substring(0,12)),o=12,s=0;s<t;s++){var a=B.decode(e.substring(o,o+1));if(o++,a===!0){var d=S.decode(e.substring(o,o+16));o+=16;var y=S.decode(e.substring(o,o+16));o+=16;for(var x=d;x<=y;x++)n.push(x)}else{var oe=S.decode(e.substring(o,o+16));n.push(oe),o+=16}}return n}}])}(),vt=function(i){function r(e){var n;return O(this,r),n=m(this,r),n.setValue(e),n}return V(r,i),T(r,[{key:"encode",value:function(){return $e.encode(this.value)}},{key:"decode",value:function(n){this.value=$e.decode(n)}},{key:"substring",value:function(n,t){for(var o=S.decode(n.substring(t,t+12)),s=t+12,a=0;a<o;a++)n.charAt(s)==="1"?s+=33:s+=17;return n.substring(t,s)}},{key:"getValue",value:function(){return Se(ie(r,"getValue",this,3)([]))}},{key:"setValue",value:function(n){ie(r,"setValue",this,3)([Array.from(new Set(n)).sort(function(t,o){return t-o})])}}])}(j),Fe=function(i){function r(e){var n;return O(this,r),n=m(this,r),n.setValue(e),n}return V(r,i),T(r,[{key:"encode",value:function(){var n=this.value.length>0?this.value[this.value.length-1]:0,t=$e.encode(this.value),o=t.length,s=n;if(o<=s)return S.encode(n,16)+"1"+t;{for(var a=[],d=0,y=0;y<n;y++)y===this.value[d]-1?(a[y]=!0,d++):a[y]=!1;return S.encode(n,16)+"0"+Le.encode(a,s)}}},{key:"decode",value:function(n){if(n.charAt(16)==="1")this.value=$e.decode(n.substring(17));else{for(var t=[],o=Le.decode(n.substring(17)),s=0;s<o.length;s++)o[s]===!0&&t.push(s+1);this.value=t}}},{key:"substring",value:function(n,t){var o=S.decode(n.substring(t,t+16));return n.charAt(t+16)==="1"?n.substring(t,t+17)+new vt([]).substring(n,t+17):n.substring(t,t+17+o)}},{key:"getValue",value:function(){return Se(ie(r,"getValue",this,3)([]))}},{key:"setValue",value:function(n){ie(r,"setValue",this,3)([Array.from(new Set(n)).sort(function(t,o){return t-o})])}}])}(j),_;(function(i){i.VERSION="Version",i.CREATED="Created",i.LAST_UPDATED="LastUpdated",i.CMP_ID="CmpId",i.CMP_VERSION="CmpVersion",i.CONSENT_SCREEN="ConsentScreen",i.CONSENT_LANGUAGE="ConsentLanguage",i.VENDOR_LIST_VERSION="VendorListVersion",i.POLICY_VERSION="PolicyVersion",i.IS_SERVICE_SPECIFIC="IsServiceSpecific",i.USE_NON_STANDARD_STACKS="UseNonStandardStacks",i.SPECIAL_FEATURE_OPTINS="SpecialFeatureOptins",i.PURPOSE_CONSENTS="PurposeConsents",i.PURPOSE_LEGITIMATE_INTERESTS="PurposeLegitimateInterests",i.PURPOSE_ONE_TREATMENT="PurposeOneTreatment",i.PUBLISHER_COUNTRY_CODE="PublisherCountryCode",i.VENDOR_CONSENTS="VendorConsents",i.VENDOR_LEGITIMATE_INTERESTS="VendorLegitimateInterests",i.PUBLISHER_RESTRICTIONS="PublisherRestrictions",i.PUBLISHER_PURPOSES_SEGMENT_TYPE="PublisherPurposesSegmentType",i.PUBLISHER_CONSENTS="PublisherConsents",i.PUBLISHER_LEGITIMATE_INTERESTS="PublisherLegitimateInterests",i.NUM_CUSTOM_PURPOSES="NumCustomPurposes",i.PUBLISHER_CUSTOM_CONSENTS="PublisherCustomConsents",i.PUBLISHER_CUSTOM_LEGITIMATE_INTERESTS="PublisherCustomLegitimateInterests",i.VENDORS_ALLOWED_SEGMENT_TYPE="VendorsAllowedSegmentType",i.VENDORS_ALLOWED="VendorsAllowed",i.VENDORS_DISCLOSED_SEGMENT_TYPE="VendorsDisclosedSegmentType",i.VENDORS_DISCLOSED="VendorsDisclosed"})(_||(_={}));var Vt=function(i){function r(){return O(this,r),m(this,r,arguments)}return V(r,i),T(r,[{key:"pad",value:function(n){for(;n.length%24>0;)n+="0";return n}}])}(I),qe=function(i){function r(e){var n;O(this,r);var t=new Map,o=new Date;t.set(_.VERSION.toString(),new E(6,qe.VERSION)),t.set(_.CREATED.toString(),new Qe(o)),t.set(_.LAST_UPDATED.toString(),new Qe(o)),t.set(_.CMP_ID.toString(),new E(12,0)),t.set(_.CMP_VERSION.toString(),new E(12,0)),t.set(_.CONSENT_SCREEN.toString(),new E(6,0)),t.set(_.CONSENT_LANGUAGE.toString(),new St(2,"EN")),t.set(_.VENDOR_LIST_VERSION.toString(),new E(12,0)),t.set(_.POLICY_VERSION.toString(),new E(6,2)),t.set(_.IS_SERVICE_SPECIFIC.toString(),new ue(!1)),t.set(_.USE_NON_STANDARD_STACKS.toString(),new ue(!1)),t.set(_.SPECIAL_FEATURE_OPTINS.toString(),new Ee([!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1])),t.set(_.PURPOSE_CONSENTS.toString(),new Ee([!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1])),t.set(_.PURPOSE_LEGITIMATE_INTERESTS.toString(),new Ee([!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1])),t.set(_.PURPOSE_ONE_TREATMENT.toString(),new ue(!1)),t.set(_.PUBLISHER_COUNTRY_CODE.toString(),new St(2,"AA")),t.set(_.VENDOR_CONSENTS.toString(),new Fe([])),t.set(_.VENDOR_LEGITIMATE_INTERESTS.toString(),new Fe([])),t.set(_.PUBLISHER_RESTRICTIONS.toString(),new vt([])),t.set(_.PUBLISHER_PURPOSES_SEGMENT_TYPE.toString(),new E(3,3)),t.set(_.PUBLISHER_CONSENTS.toString(),new Ee([!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1])),t.set(_.PUBLISHER_LEGITIMATE_INTERESTS.toString(),new Ee([!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1]));var s=new E(6,0);t.set(_.NUM_CUSTOM_PURPOSES.toString(),s),t.set(_.PUBLISHER_CUSTOM_CONSENTS.toString(),new Xe(function(){return s.getValue()},[])),t.set(_.PUBLISHER_CUSTOM_LEGITIMATE_INTERESTS.toString(),new Xe(function(){return s.getValue()},[])),t.set(_.VENDORS_ALLOWED_SEGMENT_TYPE.toString(),new E(3,2)),t.set(_.VENDORS_ALLOWED.toString(),new Fe([])),t.set(_.VENDORS_DISCLOSED_SEGMENT_TYPE.toString(),new E(3,1)),t.set(_.VENDORS_DISCLOSED.toString(),new Fe([]));var a=[_.VERSION.toString(),_.CREATED.toString(),_.LAST_UPDATED.toString(),_.CMP_ID.toString(),_.CMP_VERSION.toString(),_.CONSENT_SCREEN.toString(),_.CONSENT_LANGUAGE.toString(),_.VENDOR_LIST_VERSION.toString(),_.POLICY_VERSION.toString(),_.IS_SERVICE_SPECIFIC.toString(),_.USE_NON_STANDARD_STACKS.toString(),_.SPECIAL_FEATURE_OPTINS.toString(),_.PURPOSE_CONSENTS.toString(),_.PURPOSE_LEGITIMATE_INTERESTS.toString(),_.PURPOSE_ONE_TREATMENT.toString(),_.PUBLISHER_COUNTRY_CODE.toString(),_.VENDOR_CONSENTS.toString(),_.VENDOR_LEGITIMATE_INTERESTS.toString(),_.PUBLISHER_RESTRICTIONS.toString()],d=[_.PUBLISHER_PURPOSES_SEGMENT_TYPE.toString(),_.PUBLISHER_CONSENTS.toString(),_.PUBLISHER_LEGITIMATE_INTERESTS.toString(),_.NUM_CUSTOM_PURPOSES.toString(),_.PUBLISHER_CUSTOM_CONSENTS.toString(),_.PUBLISHER_CUSTOM_LEGITIMATE_INTERESTS.toString()],y=[_.VENDORS_ALLOWED_SEGMENT_TYPE.toString(),_.VENDORS_ALLOWED.toString()],x=[_.VENDORS_DISCLOSED_SEGMENT_TYPE.toString(),_.VENDORS_DISCLOSED.toString()],oe=[a,d,y,x];return n=m(this,r,[t,oe]),h(W(n),"base64UrlEncoder",new Vt),e&&e.length>0&&n.decode(e),n}return V(r,i),T(r,[{key:"encode",value:function(){var n=this.encodeSegmentsToBitStrings(),t=[];return t.push(this.base64UrlEncoder.encode(n[0])),this.getFieldValue(_.IS_SERVICE_SPECIFIC.toString())?n[1]&&n[1].length>0&&t.push(this.base64UrlEncoder.encode(n[1])):(n[2]&&n[2].length>0&&t.push(this.base64UrlEncoder.encode(n[2])),n[3]&&n[3].length>0&&t.push(this.base64UrlEncoder.encode(n[3]))),t.join(".")}},{key:"decode",value:function(n){for(var t=n.split("."),o=[],s=0;s<t.length;s++){var a=this.base64UrlEncoder.decode(t[s]);switch(a.substring(0,3)){case"000":{o[0]=a;break}case"001":{o[3]=a;break}case"010":{o[2]=a;break}case"011":{o[1]=a;break}default:throw new c("Unable to decode segment '"+t[s]+"'")}}this.decodeSegmentsFromBitStrings(o)}},{key:"setFieldValue",value:function(n,t){if(ie(r,"setFieldValue",this,3)([n,t]),n!==_.CREATED.toString()&&n!==_.LAST_UPDATED.toString()){var o=new Date,s=new Date(Date.UTC(o.getUTCFullYear(),o.getUTCMonth(),o.getUTCDate()));this.setFieldValue(_.CREATED.toString(),s),this.setFieldValue(_.LAST_UPDATED.toString(),s)}}},{key:"getId",value:function(){return qe.ID}},{key:"getName",value:function(){return qe.NAME}}])}(Ge),X=qe;f(X,"ID",2),f(X,"VERSION",2),f(X,"NAME","tcfeuv2");var A;(function(i){i.VERSION="Version",i.CREATED="Created",i.LAST_UPDATED="LastUpdated",i.CMP_ID="CmpId",i.CMP_VERSION="CmpVersion",i.CONSENT_SCREEN="ConsentScreen",i.CONSENT_LANGUAGE="ConsentLanguage",i.VENDOR_LIST_VERSION="VendorListVersion",i.TCF_POLICY_VERSION="TcfPolicyVersion",i.USE_NON_STANDARD_STACKS="UseNonStandardStacks",i.SPECIAL_FEATURE_EXPRESS_CONSENT="SpecialFeatureExpressConsent",i.PURPOSES_EXPRESS_CONSENT="PurposesExpressConsent",i.PURPOSES_IMPLIED_CONSENT="PurposesImpliedConsent",i.VENDOR_EXPRESS_CONSENT="VendorExpressConsent",i.VENDOR_IMPLIED_CONSENT="VendorImpliedConsent",i.SEGMENT_TYPE="SegmentType",i.PUB_PURPOSES_EXPRESS_CONSENT="PubPurposesExpressConsent",i.PUB_PURPOSES_IMPLIED_CONSENT="PubPurposesImpliedConsent",i.NUM_CUSTOM_PURPOSES="NumCustomPurposes",i.CUSTOM_PURPOSES_EXPRESS_CONSENT="CustomPurposesExpressConsent",i.CUSTOM_PURPOSES_IMPLIED_CONSENT="CustomPurposesImpliedConsent"})(A||(A={}));var ze=function(i){function r(e){var n;O(this,r);var t=new Map,o=new Date;t.set(A.VERSION.toString(),new E(6,ze.VERSION)),t.set(A.CREATED.toString(),new Qe(o)),t.set(A.LAST_UPDATED.toString(),new Qe(o)),t.set(A.CMP_ID.toString(),new E(12,0)),t.set(A.CMP_VERSION.toString(),new E(12,0)),t.set(A.CONSENT_SCREEN.toString(),new E(6,0)),t.set(A.CONSENT_LANGUAGE.toString(),new St(2,"EN")),t.set(A.VENDOR_LIST_VERSION.toString(),new E(12,0)),t.set(A.TCF_POLICY_VERSION.toString(),new E(6,2)),t.set(A.USE_NON_STANDARD_STACKS.toString(),new ue(!1)),t.set(A.SPECIAL_FEATURE_EXPRESS_CONSENT.toString(),new Ee([!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1])),t.set(A.PURPOSES_EXPRESS_CONSENT.toString(),new Ee([!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1])),t.set(A.PURPOSES_IMPLIED_CONSENT.toString(),new Ee([!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1])),t.set(A.VENDOR_EXPRESS_CONSENT.toString(),new Fe([])),t.set(A.VENDOR_IMPLIED_CONSENT.toString(),new Fe([])),t.set(A.SEGMENT_TYPE.toString(),new E(3,3)),t.set(A.PUB_PURPOSES_EXPRESS_CONSENT.toString(),new Ee([!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1])),t.set(A.PUB_PURPOSES_IMPLIED_CONSENT.toString(),new Ee([!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1]));var s=new E(6,0);t.set(A.NUM_CUSTOM_PURPOSES.toString(),s),t.set(A.CUSTOM_PURPOSES_EXPRESS_CONSENT.toString(),new Xe(function(){return s.getValue()},[])),t.set(A.CUSTOM_PURPOSES_IMPLIED_CONSENT.toString(),new Xe(function(){return s.getValue()},[]));var a=[A.VERSION.toString(),A.CREATED.toString(),A.LAST_UPDATED.toString(),A.CMP_ID.toString(),A.CMP_VERSION.toString(),A.CONSENT_SCREEN.toString(),A.CONSENT_LANGUAGE.toString(),A.VENDOR_LIST_VERSION.toString(),A.TCF_POLICY_VERSION.toString(),A.USE_NON_STANDARD_STACKS.toString(),A.SPECIAL_FEATURE_EXPRESS_CONSENT.toString(),A.PURPOSES_EXPRESS_CONSENT.toString(),A.PURPOSES_IMPLIED_CONSENT.toString(),A.VENDOR_EXPRESS_CONSENT.toString(),A.VENDOR_IMPLIED_CONSENT.toString()],d=[A.SEGMENT_TYPE.toString(),A.PUB_PURPOSES_EXPRESS_CONSENT.toString(),A.PUB_PURPOSES_IMPLIED_CONSENT.toString(),A.NUM_CUSTOM_PURPOSES.toString(),A.CUSTOM_PURPOSES_EXPRESS_CONSENT.toString(),A.CUSTOM_PURPOSES_IMPLIED_CONSENT.toString()],y=[a,d];return n=m(this,r,[t,y]),h(W(n),"base64UrlEncoder",new U),e&&e.length>0&&n.decode(e),n}return V(r,i),T(r,[{key:"encode",value:function(){var n=this.encodeSegmentsToBitStrings(),t=[];return t.push(this.base64UrlEncoder.encode(n[0])),n[1]&&n[1].length>0&&t.push(this.base64UrlEncoder.encode(n[1])),t.join(".")}},{key:"decode",value:function(n){for(var t=n.split("."),o=[],s=0;s<t.length;s++){var a=this.base64UrlEncoder.decode(t[s]);switch(a.substring(0,3)){case"000":{o[0]=a;break}case"011":{o[1]=a;break}default:throw new c("Unable to decode segment '"+t[s]+"'")}}this.decodeSegmentsFromBitStrings(o)}},{key:"setFieldValue",value:function(n,t){if(ie(r,"setFieldValue",this,3)([n,t]),n!==A.CREATED.toString()&&n!==A.LAST_UPDATED.toString()){var o=new Date,s=new Date(Date.UTC(o.getUTCFullYear(),o.getUTCMonth(),o.getUTCDate()));this.setFieldValue(A.CREATED.toString(),s),this.setFieldValue(A.LAST_UPDATED.toString(),s)}}},{key:"getId",value:function(){return ze.ID}},{key:"getName",value:function(){return ze.NAME}}])}(Ge),$=ze;f($,"ID",5),f($,"VERSION",1),f($,"NAME","tcfcav1");var pt=function(i){function r(e){var n;return O(this,r),n=m(this,r,[e]),n.name="InvalidFieldError",n}return V(r,i),T(r)}(Be(Error)),re;(function(i){i.VERSION="Version",i.NOTICE="Notice",i.OPT_OUT_SALE="OptOutSale",i.LSPA_COVERED="LspaCovered"})(re||(re={}));var Je=function(){function i(r){O(this,i),h(this,"fields",void 0),this.fields=new Map,this.fields.set(re.VERSION.toString(),Je.VERSION),this.fields.set(re.NOTICE.toString(),"-"),this.fields.set(re.OPT_OUT_SALE.toString(),"-"),this.fields.set(re.LSPA_COVERED.toString(),"-"),r&&r.length>0&&this.decode(r)}return T(i,[{key:"hasField",value:function(e){return this.fields.has(e)}},{key:"getFieldValue",value:function(e){return this.fields.has(e)?this.fields.get(e):null}},{key:"setFieldValue",value:function(e,n){if(this.fields.has(e))this.fields.set(e,n);else throw new pt(e+" not found")}},{key:"toObj",value:function(){var e={},n=Dt(this.fields.keys()),t;try{for(n.s();!(t=n.n()).done;){var o=t.value,s=this.fields.get(o);e[o.toString()]=s}}catch(a){n.e(a)}finally{n.f()}return e}},{key:"encode",value:function(){var e="";return e+=this.getFieldValue(re.VERSION.toString()),e+=this.getFieldValue(re.NOTICE.toString()),e+=this.getFieldValue(re.OPT_OUT_SALE.toString()),e+=this.getFieldValue(re.LSPA_COVERED.toString()),e}},{key:"decode",value:function(e){this.setFieldValue(re.VERSION.toString(),parseInt(e.charAt(0))),this.setFieldValue(re.NOTICE.toString(),e.charAt(1)),this.setFieldValue(re.OPT_OUT_SALE.toString(),e.charAt(2)),this.setFieldValue(re.LSPA_COVERED.toString(),e.charAt(3))}},{key:"getId",value:function(){return Je.ID}},{key:"getName",value:function(){return Je.NAME}}])}(),q=Je;f(q,"ID",6),f(q,"VERSION",1),f(q,"NAME","uspv1");var Nt=function(){function i(){O(this,i)}return T(i,null,[{key:"encode",value:function(e,n,t){for(var o="",s=0;s<e.length;s++)o+=S.encode(e[s],n);for(;o.length<n*t;)o+="0";return o}},{key:"decode",value:function(e,n,t){if(!/^[0-1]*$/.test(e))throw new c("Undecodable FixedInteger '"+e+"'");if(e.length>n*t)throw new c("Undecodable FixedIntegerList '"+e+"'");if(e.length%n!=0)throw new c("Undecodable FixedIntegerList '"+e+"'");for(;e.length<n*t;)e+="0";e.length>n*t&&(e=e.substring(0,n*t));for(var o=[],s=0;s<e.length;s+=n)o.push(S.decode(e.substring(s,s+n)));for(;o.length<t;)o.push(0);return o}}])}(),pe=function(i){function r(e,n){var t;return O(this,r),t=m(this,r),h(W(t),"elementBitStringLength",void 0),h(W(t),"numElements",void 0),t.elementBitStringLength=e,t.numElements=n.length,t.setValue(n),t}return V(r,i),T(r,[{key:"encode",value:function(){return Nt.encode(this.value,this.elementBitStringLength,this.numElements)}},{key:"decode",value:function(n){this.value=Nt.decode(n,this.elementBitStringLength,this.numElements)}},{key:"substring",value:function(n,t){return n.substring(t,t+this.elementBitStringLength*this.numElements)}},{key:"getValue",value:function(){return Se(ie(r,"getValue",this,3)([]))}},{key:"setValue",value:function(n){for(var t=Se(n),o=t.length;o<this.numElements;o++)t.push(0);t.length>this.numElements&&(t=t.slice(0,this.numElements)),ie(r,"setValue",this,3)([t])}}])}(j),P;(function(i){i.VERSION="Version",i.SHARING_NOTICE="SharingNotice",i.SALE_OPT_OUT_NOTICE="SaleOptOutNotice",i.SHARING_OPT_OUT_NOTICE="SharingOptOutNotice",i.TARGETED_ADVERTISING_OPT_OUT_NOTICE="TargetedAdvertisingOptOutNotice",i.SENSITIVE_DATA_PROCESSING_OPT_OUT_NOTICE="SensitiveDataProcessingOptOutNotice",i.SENSITIVE_DATA_LIMIT_USE_NOTICE="SensitiveDataLimitUseNotice",i.SALE_OPT_OUT="SaleOptOut",i.SHARING_OPT_OUT="SharingOptOut",i.TARGETED_ADVERTISING_OPT_OUT="TargetedAdvertisingOptOut",i.SENSITIVE_DATA_PROCESSING="SensitiveDataProcessing",i.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS="KnownChildSensitiveDataConsents",i.PERSONAL_DATA_CONSENTS="PersonalDataConsents",i.MSPA_COVERED_TRANSACTION="MspaCoveredTransaction",i.MSPA_OPT_OUT_OPTION_MODE="MspaOptOutOptionMode",i.MSPA_SERVICE_PROVIDER_MODE="MspaServiceProviderMode",i.GPC_SEGMENT_TYPE="GpcSegmentType",i.GPC_SEGMENT_INCLUDED="GpcSegmentIncluded",i.GPC="Gpc"})(P||(P={}));var Ze=function(i){function r(e){var n;O(this,r);var t=new Map;t.set(P.VERSION.toString(),new E(6,Ze.VERSION)),t.set(P.SHARING_NOTICE.toString(),new E(2,0)),t.set(P.SALE_OPT_OUT_NOTICE.toString(),new E(2,0)),t.set(P.SHARING_OPT_OUT_NOTICE.toString(),new E(2,0)),t.set(P.TARGETED_ADVERTISING_OPT_OUT_NOTICE.toString(),new E(2,0)),t.set(P.SENSITIVE_DATA_PROCESSING_OPT_OUT_NOTICE.toString(),new E(2,0)),t.set(P.SENSITIVE_DATA_LIMIT_USE_NOTICE.toString(),new E(2,0)),t.set(P.SALE_OPT_OUT.toString(),new E(2,0)),t.set(P.SHARING_OPT_OUT.toString(),new E(2,0)),t.set(P.TARGETED_ADVERTISING_OPT_OUT.toString(),new E(2,0)),t.set(P.SENSITIVE_DATA_PROCESSING.toString(),new pe(2,[0,0,0,0,0,0,0,0,0,0,0,0])),t.set(P.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS.toString(),new pe(2,[0,0])),t.set(P.PERSONAL_DATA_CONSENTS.toString(),new E(2,0)),t.set(P.MSPA_COVERED_TRANSACTION.toString(),new E(2,0)),t.set(P.MSPA_OPT_OUT_OPTION_MODE.toString(),new E(2,0)),t.set(P.MSPA_SERVICE_PROVIDER_MODE.toString(),new E(2,0)),t.set(P.GPC_SEGMENT_TYPE.toString(),new E(2,1)),t.set(P.GPC_SEGMENT_INCLUDED.toString(),new ue(!0)),t.set(P.GPC.toString(),new ue(!1));var o=[P.VERSION.toString(),P.SHARING_NOTICE.toString(),P.SALE_OPT_OUT_NOTICE.toString(),P.SHARING_OPT_OUT_NOTICE.toString(),P.TARGETED_ADVERTISING_OPT_OUT_NOTICE.toString(),P.SENSITIVE_DATA_PROCESSING_OPT_OUT_NOTICE.toString(),P.SENSITIVE_DATA_LIMIT_USE_NOTICE.toString(),P.SALE_OPT_OUT.toString(),P.SHARING_OPT_OUT.toString(),P.TARGETED_ADVERTISING_OPT_OUT.toString(),P.SENSITIVE_DATA_PROCESSING.toString(),P.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS.toString(),P.PERSONAL_DATA_CONSENTS.toString(),P.MSPA_COVERED_TRANSACTION.toString(),P.MSPA_OPT_OUT_OPTION_MODE.toString(),P.MSPA_SERVICE_PROVIDER_MODE.toString()],s=[P.GPC_SEGMENT_TYPE.toString(),P.GPC.toString()],a=[o,s];return n=m(this,r,[t,a]),h(W(n),"base64UrlEncoder",new U),e&&e.length>0&&n.decode(e),n}return V(r,i),T(r,[{key:"encode",value:function(){var n=this.encodeSegmentsToBitStrings(),t=[];return t.push(this.base64UrlEncoder.encode(n[0])),n[1]&&n[1].length>0&&this.fields.get(P.GPC_SEGMENT_INCLUDED).getValue()===!0&&t.push(this.base64UrlEncoder.encode(n[1])),t.join(".")}},{key:"decode",value:function(n){for(var t=n.split("."),o=[],s=!1,a=0;a<t.length;a++){var d=this.base64UrlEncoder.decode(t[a]);switch(d.substring(0,2)){case"00":{o[0]=d;break}case"01":{s=!0,o[1]=d;break}default:throw new c("Unable to decode segment '"+t[a]+"'")}}this.decodeSegmentsFromBitStrings(o),this.fields.get(P.GPC_SEGMENT_INCLUDED).setValue(s)}},{key:"getId",value:function(){return Ze.ID}},{key:"getName",value:function(){return Ze.NAME}}])}(Ge),z=Ze;f(z,"ID",7),f(z,"VERSION",1),f(z,"NAME","usnat");var D;(function(i){i.VERSION="Version",i.SALE_OPT_OUT_NOTICE="SaleOptOutNotice",i.SHARING_OPT_OUT_NOTICE="SharingOptOutNotice",i.SENSITIVE_DATA_LIMIT_USE_NOTICE="SensitiveDataLimitUseNotice",i.SALE_OPT_OUT="SaleOptOut",i.SHARING_OPT_OUT="SharingOptOut",i.SENSITIVE_DATA_PROCESSING="SensitiveDataProcessing",i.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS="KnownChildSensitiveDataConsents",i.PERSONAL_DATA_CONSENTS="PersonalDataConsents",i.MSPA_COVERED_TRANSACTION="MspaCoveredTransaction",i.MSPA_OPT_OUT_OPTION_MODE="MspaOptOutOptionMode",i.MSPA_SERVICE_PROVIDER_MODE="MspaServiceProviderMode",i.GPC_SEGMENT_TYPE="GpcSegmentType",i.GPC_SEGMENT_INCLUDED="GpcSegmentIncluded",i.GPC="Gpc"})(D||(D={}));var et=function(i){function r(e){var n;O(this,r);var t=new Map;t.set(D.VERSION.toString(),new E(6,et.VERSION)),t.set(D.SALE_OPT_OUT_NOTICE.toString(),new E(2,0)),t.set(D.SHARING_OPT_OUT_NOTICE.toString(),new E(2,0)),t.set(D.SENSITIVE_DATA_LIMIT_USE_NOTICE.toString(),new E(2,0)),t.set(D.SALE_OPT_OUT.toString(),new E(2,0)),t.set(D.SHARING_OPT_OUT.toString(),new E(2,0)),t.set(D.SENSITIVE_DATA_PROCESSING.toString(),new pe(2,[0,0,0,0,0,0,0,0,0])),t.set(D.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS.toString(),new pe(2,[0,0])),t.set(D.PERSONAL_DATA_CONSENTS.toString(),new E(2,0)),t.set(D.MSPA_COVERED_TRANSACTION.toString(),new E(2,0)),t.set(D.MSPA_OPT_OUT_OPTION_MODE.toString(),new E(2,0)),t.set(D.MSPA_SERVICE_PROVIDER_MODE.toString(),new E(2,0)),t.set(D.GPC_SEGMENT_TYPE.toString(),new E(2,1)),t.set(D.GPC_SEGMENT_INCLUDED.toString(),new ue(!0)),t.set(D.GPC.toString(),new ue(!1));var o=[D.VERSION.toString(),D.SALE_OPT_OUT_NOTICE.toString(),D.SHARING_OPT_OUT_NOTICE.toString(),D.SENSITIVE_DATA_LIMIT_USE_NOTICE.toString(),D.SALE_OPT_OUT.toString(),D.SHARING_OPT_OUT.toString(),D.SENSITIVE_DATA_PROCESSING.toString(),D.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS.toString(),D.PERSONAL_DATA_CONSENTS.toString(),D.MSPA_COVERED_TRANSACTION.toString(),D.MSPA_OPT_OUT_OPTION_MODE.toString(),D.MSPA_SERVICE_PROVIDER_MODE.toString()],s=[D.GPC_SEGMENT_TYPE.toString(),D.GPC.toString()],a=[o,s];return n=m(this,r,[t,a]),h(W(n),"base64UrlEncoder",new U),e&&e.length>0&&n.decode(e),n}return V(r,i),T(r,[{key:"encode",value:function(){var n=this.encodeSegmentsToBitStrings(),t=[];return t.push(this.base64UrlEncoder.encode(n[0])),n[1]&&n[1].length>0&&this.fields.get(D.GPC_SEGMENT_INCLUDED).getValue()===!0&&t.push(this.base64UrlEncoder.encode(n[1])),t.join(".")}},{key:"decode",value:function(n){for(var t=n.split("."),o=[],s=!1,a=0;a<t.length;a++){var d=this.base64UrlEncoder.decode(t[a]);switch(d.substring(0,2)){case"00":{o[0]=d;break}case"01":{s=!0,o[1]=d;break}default:throw new c("Unable to decode segment '"+t[a]+"'")}}this.decodeSegmentsFromBitStrings(o),this.fields.get(D.GPC_SEGMENT_INCLUDED).setValue(s)}},{key:"getId",value:function(){return et.ID}},{key:"getName",value:function(){return et.NAME}}])}(Ge),J=et;f(J,"ID",8),f(J,"VERSION",1),f(J,"NAME","usca");var L;(function(i){i.VERSION="Version",i.SHARING_NOTICE="SharingNotice",i.SALE_OPT_OUT_NOTICE="SaleOptOutNotice",i.TARGETED_ADVERTISING_OPT_OUT_NOTICE="TargetedAdvertisingOptOutNotice",i.SALE_OPT_OUT="SaleOptOut",i.TARGETED_ADVERTISING_OPT_OUT="TargetedAdvertisingOptOut",i.SENSITIVE_DATA_PROCESSING="SensitiveDataProcessing",i.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS="KnownChildSensitiveDataConsents",i.MSPA_COVERED_TRANSACTION="MspaCoveredTransaction",i.MSPA_OPT_OUT_OPTION_MODE="MspaOptOutOptionMode",i.MSPA_SERVICE_PROVIDER_MODE="MspaServiceProviderMode"})(L||(L={}));var tt=function(i){function r(e){var n;O(this,r);var t=new Map;t.set(L.VERSION.toString(),new E(6,tt.VERSION)),t.set(L.SHARING_NOTICE.toString(),new E(2,0)),t.set(L.SALE_OPT_OUT_NOTICE.toString(),new E(2,0)),t.set(L.TARGETED_ADVERTISING_OPT_OUT_NOTICE.toString(),new E(2,0)),t.set(L.SALE_OPT_OUT.toString(),new E(2,0)),t.set(L.TARGETED_ADVERTISING_OPT_OUT.toString(),new E(2,0)),t.set(L.SENSITIVE_DATA_PROCESSING.toString(),new pe(2,[0,0,0,0,0,0,0,0])),t.set(L.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS.toString(),new E(2,0)),t.set(L.MSPA_COVERED_TRANSACTION.toString(),new E(2,0)),t.set(L.MSPA_OPT_OUT_OPTION_MODE.toString(),new E(2,0)),t.set(L.MSPA_SERVICE_PROVIDER_MODE.toString(),new E(2,0));var o=[L.VERSION.toString(),L.SHARING_NOTICE.toString(),L.SALE_OPT_OUT_NOTICE.toString(),L.TARGETED_ADVERTISING_OPT_OUT_NOTICE.toString(),L.SALE_OPT_OUT.toString(),L.TARGETED_ADVERTISING_OPT_OUT.toString(),L.SENSITIVE_DATA_PROCESSING.toString(),L.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS.toString(),L.MSPA_COVERED_TRANSACTION.toString(),L.MSPA_OPT_OUT_OPTION_MODE.toString(),L.MSPA_SERVICE_PROVIDER_MODE.toString()];return n=m(this,r,[t,o]),h(W(n),"base64UrlEncoder",new U),e&&e.length>0&&n.decode(e),n}return V(r,i),T(r,[{key:"encode",value:function(){return this.base64UrlEncoder.encode(this.encodeToBitString())}},{key:"decode",value:function(n){this.decodeFromBitString(this.base64UrlEncoder.decode(n))}},{key:"getId",value:function(){return tt.ID}},{key:"getName",value:function(){return tt.NAME}}])}(ct),Z=tt;f(Z,"ID",9),f(Z,"VERSION",1),f(Z,"NAME","usva");var w;(function(i){i.VERSION="Version",i.SHARING_NOTICE="SharingNotice",i.SALE_OPT_OUT_NOTICE="SaleOptOutNotice",i.TARGETED_ADVERTISING_OPT_OUT_NOTICE="TargetedAdvertisingOptOutNotice",i.SALE_OPT_OUT="SaleOptOut",i.TARGETED_ADVERTISING_OPT_OUT="TargetedAdvertisingOptOut",i.SENSITIVE_DATA_PROCESSING="SensitiveDataProcessing",i.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS="KnownChildSensitiveDataConsents",i.MSPA_COVERED_TRANSACTION="MspaCoveredTransaction",i.MSPA_OPT_OUT_OPTION_MODE="MspaOptOutOptionMode",i.MSPA_SERVICE_PROVIDER_MODE="MspaServiceProviderMode",i.GPC_SEGMENT_TYPE="GpcSegmentType",i.GPC_SEGMENT_INCLUDED="GpcSegmentIncluded",i.GPC="Gpc"})(w||(w={}));var nt=function(i){function r(e){var n;O(this,r);var t=new Map;t.set(w.VERSION.toString(),new E(6,nt.VERSION)),t.set(w.SHARING_NOTICE.toString(),new E(2,0)),t.set(w.SALE_OPT_OUT_NOTICE.toString(),new E(2,0)),t.set(w.TARGETED_ADVERTISING_OPT_OUT_NOTICE.toString(),new E(2,0)),t.set(w.SALE_OPT_OUT.toString(),new E(2,0)),t.set(w.TARGETED_ADVERTISING_OPT_OUT.toString(),new E(2,0)),t.set(w.SENSITIVE_DATA_PROCESSING.toString(),new pe(2,[0,0,0,0,0,0,0])),t.set(w.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS.toString(),new E(2,0)),t.set(w.MSPA_COVERED_TRANSACTION.toString(),new E(2,0)),t.set(w.MSPA_OPT_OUT_OPTION_MODE.toString(),new E(2,0)),t.set(w.MSPA_SERVICE_PROVIDER_MODE.toString(),new E(2,0)),t.set(w.GPC_SEGMENT_TYPE.toString(),new E(2,1)),t.set(w.GPC_SEGMENT_INCLUDED.toString(),new ue(!0)),t.set(w.GPC.toString(),new ue(!1));var o=[w.VERSION.toString(),w.SHARING_NOTICE.toString(),w.SALE_OPT_OUT_NOTICE.toString(),w.TARGETED_ADVERTISING_OPT_OUT_NOTICE.toString(),w.SALE_OPT_OUT.toString(),w.TARGETED_ADVERTISING_OPT_OUT.toString(),w.SENSITIVE_DATA_PROCESSING.toString(),w.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS.toString(),w.MSPA_COVERED_TRANSACTION.toString(),w.MSPA_OPT_OUT_OPTION_MODE.toString(),w.MSPA_SERVICE_PROVIDER_MODE.toString()],s=[w.GPC_SEGMENT_TYPE.toString(),w.GPC.toString()],a=[o,s];return n=m(this,r,[t,a]),h(W(n),"base64UrlEncoder",new U),e&&e.length>0&&n.decode(e),n}return V(r,i),T(r,[{key:"encode",value:function(){var n=this.encodeSegmentsToBitStrings(),t=[];return t.push(this.base64UrlEncoder.encode(n[0])),n[1]&&n[1].length>0&&this.fields.get(w.GPC_SEGMENT_INCLUDED).getValue()===!0&&t.push(this.base64UrlEncoder.encode(n[1])),t.join(".")}},{key:"decode",value:function(n){for(var t=n.split("."),o=[],s=!1,a=0;a<t.length;a++){var d=this.base64UrlEncoder.decode(t[a]);switch(d.substring(0,2)){case"00":{o[0]=d;break}case"01":{s=!0,o[1]=d;break}default:throw new c("Unable to decode segment '"+t[a]+"'")}}this.decodeSegmentsFromBitStrings(o),this.fields.get(w.GPC_SEGMENT_INCLUDED).setValue(s)}},{key:"getId",value:function(){return nt.ID}},{key:"getName",value:function(){return nt.NAME}}])}(Ge),ee=nt;f(ee,"ID",10),f(ee,"VERSION",1),f(ee,"NAME","usco");var k;(function(i){i.VERSION="Version",i.SHARING_NOTICE="SharingNotice",i.SALE_OPT_OUT_NOTICE="SaleOptOutNotice",i.TARGETED_ADVERTISING_OPT_OUT_NOTICE="TargetedAdvertisingOptOutNotice",i.SENSITIVE_DATA_PROCESSING_OPT_OUT_NOTICE="SensitiveDataProcessingOptOutNotice",i.SALE_OPT_OUT="SaleOptOut",i.TARGETED_ADVERTISING_OPT_OUT="TargetedAdvertisingOptOut",i.SENSITIVE_DATA_PROCESSING="SensitiveDataProcessing",i.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS="KnownChildSensitiveDataConsents",i.MSPA_COVERED_TRANSACTION="MspaCoveredTransaction",i.MSPA_OPT_OUT_OPTION_MODE="MspaOptOutOptionMode",i.MSPA_SERVICE_PROVIDER_MODE="MspaServiceProviderMode"})(k||(k={}));var rt=function(i){function r(e){var n;O(this,r);var t=new Map;t.set(k.VERSION.toString(),new E(6,rt.VERSION)),t.set(k.SHARING_NOTICE.toString(),new E(2,0)),t.set(k.SALE_OPT_OUT_NOTICE.toString(),new E(2,0)),t.set(k.TARGETED_ADVERTISING_OPT_OUT_NOTICE.toString(),new E(2,0)),t.set(k.SENSITIVE_DATA_PROCESSING_OPT_OUT_NOTICE.toString(),new E(2,0)),t.set(k.SALE_OPT_OUT.toString(),new E(2,0)),t.set(k.TARGETED_ADVERTISING_OPT_OUT.toString(),new E(2,0)),t.set(k.SENSITIVE_DATA_PROCESSING.toString(),new pe(2,[0,0,0,0,0,0,0,0])),t.set(k.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS.toString(),new E(2,0)),t.set(k.MSPA_COVERED_TRANSACTION.toString(),new E(2,0)),t.set(k.MSPA_OPT_OUT_OPTION_MODE.toString(),new E(2,0)),t.set(k.MSPA_SERVICE_PROVIDER_MODE.toString(),new E(2,0));var o=[k.VERSION.toString(),k.SHARING_NOTICE.toString(),k.SALE_OPT_OUT_NOTICE.toString(),k.TARGETED_ADVERTISING_OPT_OUT_NOTICE.toString(),k.SENSITIVE_DATA_PROCESSING_OPT_OUT_NOTICE.toString(),k.SALE_OPT_OUT.toString(),k.TARGETED_ADVERTISING_OPT_OUT.toString(),k.SENSITIVE_DATA_PROCESSING.toString(),k.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS.toString(),k.MSPA_COVERED_TRANSACTION.toString(),k.MSPA_OPT_OUT_OPTION_MODE.toString(),k.MSPA_SERVICE_PROVIDER_MODE.toString()];return n=m(this,r,[t,o]),h(W(n),"base64UrlEncoder",new U),e&&e.length>0&&n.decode(e),n}return V(r,i),T(r,[{key:"encode",value:function(){return this.base64UrlEncoder.encode(this.encodeToBitString())}},{key:"decode",value:function(n){this.decodeFromBitString(this.base64UrlEncoder.decode(n))}},{key:"getId",value:function(){return rt.ID}},{key:"getName",value:function(){return rt.NAME}}])}(ct),te=rt;f(te,"ID",11),f(te,"VERSION",1),f(te,"NAME","usut");var M;(function(i){i.VERSION="Version",i.SHARING_NOTICE="SharingNotice",i.SALE_OPT_OUT_NOTICE="SaleOptOutNotice",i.TARGETED_ADVERTISING_OPT_OUT_NOTICE="TargetedAdvertisingOptOutNotice",i.SALE_OPT_OUT="SaleOptOut",i.TARGETED_ADVERTISING_OPT_OUT="TargetedAdvertisingOptOut",i.SENSITIVE_DATA_PROCESSING="SensitiveDataProcessing",i.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS="KnownChildSensitiveDataConsents",i.MSPA_COVERED_TRANSACTION="MspaCoveredTransaction",i.MSPA_OPT_OUT_OPTION_MODE="MspaOptOutOptionMode",i.MSPA_SERVICE_PROVIDER_MODE="MspaServiceProviderMode",i.GPC_SEGMENT_TYPE="GpcSegmentType",i.GPC_SEGMENT_INCLUDED="GpcSegmentIncluded",i.GPC="Gpc"})(M||(M={}));var it=function(i){function r(e){var n;O(this,r);var t=new Map;t.set(M.VERSION.toString(),new E(6,it.VERSION)),t.set(M.SHARING_NOTICE.toString(),new E(2,0)),t.set(M.SALE_OPT_OUT_NOTICE.toString(),new E(2,0)),t.set(M.TARGETED_ADVERTISING_OPT_OUT_NOTICE.toString(),new E(2,0)),t.set(M.SALE_OPT_OUT.toString(),new E(2,0)),t.set(M.TARGETED_ADVERTISING_OPT_OUT.toString(),new E(2,0)),t.set(M.SENSITIVE_DATA_PROCESSING.toString(),new pe(2,[0,0,0,0,0,0,0,0])),t.set(M.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS.toString(),new pe(2,[0,0,0])),t.set(M.MSPA_COVERED_TRANSACTION.toString(),new E(2,0)),t.set(M.MSPA_OPT_OUT_OPTION_MODE.toString(),new E(2,0)),t.set(M.MSPA_SERVICE_PROVIDER_MODE.toString(),new E(2,0)),t.set(M.GPC_SEGMENT_TYPE.toString(),new E(2,1)),t.set(M.GPC_SEGMENT_INCLUDED.toString(),new ue(!0)),t.set(M.GPC.toString(),new ue(!1));var o=[M.VERSION.toString(),M.SHARING_NOTICE.toString(),M.SALE_OPT_OUT_NOTICE.toString(),M.TARGETED_ADVERTISING_OPT_OUT_NOTICE.toString(),M.SALE_OPT_OUT.toString(),M.TARGETED_ADVERTISING_OPT_OUT.toString(),M.SENSITIVE_DATA_PROCESSING.toString(),M.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS.toString(),M.MSPA_COVERED_TRANSACTION.toString(),M.MSPA_OPT_OUT_OPTION_MODE.toString(),M.MSPA_SERVICE_PROVIDER_MODE.toString()],s=[M.GPC_SEGMENT_TYPE.toString(),M.GPC.toString()],a=[o,s];return n=m(this,r,[t,a]),h(W(n),"base64UrlEncoder",new U),e&&e.length>0&&n.decode(e),n}return V(r,i),T(r,[{key:"encode",value:function(){var n=this.encodeSegmentsToBitStrings(),t=[];return t.push(this.base64UrlEncoder.encode(n[0])),n[1]&&n[1].length>0&&this.fields.get(M.GPC_SEGMENT_INCLUDED).getValue()===!0&&t.push(this.base64UrlEncoder.encode(n[1])),t.join(".")}},{key:"decode",value:function(n){for(var t=n.split("."),o=[],s=!1,a=0;a<t.length;a++){var d=this.base64UrlEncoder.decode(t[a]);switch(d.substring(0,2)){case"00":{o[0]=d;break}case"01":{s=!0,o[1]=d;break}default:throw new c("Unable to decode segment '"+t[a]+"'")}}this.decodeSegmentsFromBitStrings(o),this.fields.get(M.GPC_SEGMENT_INCLUDED).setValue(s)}},{key:"getId",value:function(){return it.ID}},{key:"getName",value:function(){return it.NAME}}])}(Ge),ne=it;f(ne,"ID",12),f(ne,"VERSION",1),f(ne,"NAME","usct");var F=T(function i(){O(this,i)});f(F,"SECTION_ID_NAME_MAP",new Map([[X.ID,X.NAME],[$.ID,$.NAME],[q.ID,q.NAME],[z.ID,z.NAME],[J.ID,J.NAME],[Z.ID,Z.NAME],[ee.ID,ee.NAME],[te.ID,te.NAME],[ne.ID,ne.NAME]])),f(F,"SECTION_ORDER",[X.NAME,$.NAME,q.NAME,z.NAME,J.NAME,Z.NAME,ee.NAME,te.NAME,ne.NAME]);var ce=function(i){function r(e){var n;return O(this,r),n=m(this,r,[e]),n.name="LazyDecodingError",n}return V(r,i),T(r)}(c),It=function(){function i(r){O(this,i),h(this,"sections",new Map),h(this,"encodedString",void 0),h(this,"decoded",void 0),h(this,"dirty",void 0),r?(this.encodedString=r,this.decoded=!1,this.dirty=!1):(this.encodedString="DBAA",this.decoded=!1,this.dirty=!1)}return T(i,[{key:"setFieldValue",value:function(e,n,t){if(!this.decoded&&this.encodedString!=null&&this.encodedString.length>0)try{this.decode(this.encodedString)}catch(s){throw new ce(s.message)}var o=null;if(this.sections.has(e)?o=this.sections.get(e):e===$.NAME?(o=new $,this.sections.set($.NAME,o)):e===X.NAME?(o=new X,this.sections.set(X.NAME,o)):e===q.NAME?(o=new q,this.sections.set(q.NAME,o)):e===z.NAME?(o=new z,this.sections.set(z.NAME,o)):e===J.NAME?(o=new J,this.sections.set(J.NAME,o)):e===Z.NAME?(o=new Z,this.sections.set(Z.NAME,o)):e===ee.NAME?(o=new ee,this.sections.set(ee.NAME,o)):e===te.NAME?(o=new te,this.sections.set(te.NAME,o)):e===ne.NAME&&(o=new ne,this.sections.set(ne.NAME,o)),o)o.setFieldValue(n,t),this.dirty=!0;else throw new pt(e+"."+n+" not found")}},{key:"setFieldValueBySectionId",value:function(e,n,t){this.setFieldValue(F.SECTION_ID_NAME_MAP.get(e),n,t)}},{key:"getFieldValue",value:function(e,n){if(!this.decoded&&this.encodedString!=null&&this.encodedString.length>0)try{this.decode(this.encodedString)}catch(t){throw new ce(t.message)}return this.sections.has(e)?this.sections.get(e).getFieldValue(n):null}},{key:"getFieldValueBySectionId",value:function(e,n){return this.getFieldValue(F.SECTION_ID_NAME_MAP.get(e),n)}},{key:"hasField",value:function(e,n){if(!this.decoded&&this.encodedString!=null&&this.encodedString.length>0)try{this.decode(this.encodedString)}catch(t){throw new ce(t.message)}return this.sections.has(e)?this.sections.get(e).hasField(n):!1}},{key:"hasFieldBySectionId",value:function(e,n){return this.hasField(F.SECTION_ID_NAME_MAP.get(e),n)}},{key:"hasSection",value:function(e){if(!this.decoded&&this.encodedString!=null&&this.encodedString.length>0)try{this.decode(this.encodedString)}catch(n){throw new ce(n.message)}return this.sections.has(e)}},{key:"hasSectionId",value:function(e){return this.hasSection(F.SECTION_ID_NAME_MAP.get(e))}},{key:"deleteSection",value:function(e){if(!this.decoded&&this.encodedString!=null&&this.encodedString.length>0)try{this.decode(this.encodedString)}catch(n){throw new ce(n.message)}this.sections.delete(e),this.dirty=!0}},{key:"deleteSectionById",value:function(e){this.deleteSection(F.SECTION_ID_NAME_MAP.get(e))}},{key:"clear",value:function(){this.sections.clear(),this.encodedString="DBAA",this.decoded=!1,this.dirty=!1}},{key:"getHeader",value:function(){if(!this.decoded&&this.encodedString!=null&&this.encodedString.length>0)try{this.decode(this.encodedString)}catch(n){throw new ce(n.message)}var e=new Re;return e.setFieldValue("SectionIds",this.getSectionIds()),e.toObj()}},{key:"getSection",value:function(e){if(!this.decoded&&this.encodedString!=null&&this.encodedString.length>0)try{this.decode(this.encodedString)}catch(n){throw new ce(n.message)}return this.sections.has(e)?this.sections.get(e).toObj():null}},{key:"getSectionIds",value:function(){if(!this.decoded&&this.encodedString!=null&&this.encodedString.length>0)try{this.decode(this.encodedString)}catch(s){throw new ce(s.message)}for(var e=[],n=0;n<F.SECTION_ORDER.length;n++){var t=F.SECTION_ORDER[n];if(this.sections.has(t)){var o=this.sections.get(t);e.push(o.getId())}}return e}},{key:"encode",value:function(){if(!this.dirty)return this.encodedString;if(!this.decoded&&this.encodedString!=null&&this.encodedString.length>0)try{this.decode(this.encodedString)}catch(d){throw new ce(d.message)}for(var e=[],n=[],t=0;t<F.SECTION_ORDER.length;t++){var o=F.SECTION_ORDER[t];if(this.sections.has(o)){var s=this.sections.get(o);e.push(s.encode()),n.push(s.getId())}}var a=new Re;return a.setFieldValue("SectionIds",this.getSectionIds()),e.unshift(a.encode()),this.encodedString=e.join("~"),this.dirty=!1,this.encodedString}},{key:"decode",value:function(e){this.encodedString=e,this.decoded=!1,this.dirty=!0,this.sections.clear();var n=e.split("~"),t=new Re(n[0]);this.sections.set(Re.NAME,t);for(var o=t.getFieldValue("SectionIds"),s=0;s<o.length;s++)if(o[s]===$.ID){var a=new $(n[s+1]);this.sections.set($.NAME,a)}else if(o[s]===X.ID){var d=new X(n[s+1]);this.sections.set(X.NAME,d)}else if(o[s]===q.ID){var y=new q(n[s+1]);this.sections.set(q.NAME,y)}else if(o[s]===z.ID){var x=new z(n[s+1]);this.sections.set(z.NAME,x)}else if(o[s]===J.ID){var oe=new J(n[s+1]);this.sections.set(J.NAME,oe)}else if(o[s]===Z.ID){var R=new Z(n[s+1]);this.sections.set(Z.NAME,R)}else if(o[s]===ee.ID){var he=new ee(n[s+1]);this.sections.set(ee.NAME,he)}else if(o[s]===te.ID){var Ne=new te(n[s+1]);this.sections.set(te.NAME,Ne)}else if(o[s]===ne.ID){var Ct=new ne(n[s+1]);this.sections.set(ne.NAME,Ct)}this.decoded=!0,this.dirty=!1}},{key:"encodeSection",value:function(e){if(!this.decoded&&this.encodedString!=null&&this.encodedString.length>0)try{this.decode(this.encodedString)}catch(n){throw new ce(n.message)}return this.sections.has(e)?this.sections.get(e).encode():null}},{key:"encodeSectionById",value:function(e){return this.encodeSection(F.SECTION_ID_NAME_MAP.get(e))}},{key:"decodeSection",value:function(e,n){if(!this.decoded&&this.encodedString!=null&&this.encodedString.length>0)try{this.decode(this.encodedString)}catch(o){throw new ce(o.message)}var t=null;this.sections.has(e)?t=this.sections.get(e):e===$.NAME?(t=new $,this.sections.set($.NAME,t)):e===X.NAME?(t=new X,this.sections.set(X.NAME,t)):e===q.NAME?(t=new q,this.sections.set(q.NAME,t)):e===z.NAME?(t=new z,this.sections.set(z.NAME,t)):e===J.NAME?(t=new J,this.sections.set(J.NAME,t)):e===Z.NAME?(t=new Z,this.sections.set(Z.NAME,t)):e===ee.NAME?(t=new ee,this.sections.set(ee.NAME,t)):e===te.NAME?(t=new te,this.sections.set(te.NAME,t)):e===ne.NAME&&(t=new ne,this.sections.set(ne.NAME,t)),t&&t.decode(n)}},{key:"decodeSectionById",value:function(e,n){this.decodeSection(F.SECTION_ID_NAME_MAP.get(e),n)}},{key:"toObject",value:function(){if(!this.decoded&&this.encodedString!=null&&this.encodedString.length>0)try{this.decode(this.encodedString)}catch(o){throw new ce(o.message)}for(var e={},n=0;n<F.SECTION_ORDER.length;n++){var t=F.SECTION_ORDER[n];this.sections.has(t)&&(e[t]=this.sections.get(t).toObj())}return e}}])}(),wt=function(){function i(){O(this,i),h(this,"gppVersion","1.1"),h(this,"supportedAPIs",[]),h(this,"eventQueue",new g(this)),h(this,"cmpStatus",Ae.LOADING),h(this,"cmpDisplayStatus",De.HIDDEN),h(this,"signalStatus",Oe.NOT_READY),h(this,"applicableSections",[]),h(this,"gppModel",new It),h(this,"cmpId",void 0),h(this,"cmpVersion",void 0),h(this,"eventStatus",void 0)}return T(i,[{key:"reset",value:function(){this.eventQueue.clear(),this.cmpStatus=Ae.LOADING,this.cmpDisplayStatus=De.HIDDEN,this.signalStatus=Oe.NOT_READY,this.applicableSections=[],this.supportedAPIs=[],this.gppModel=new It,delete this.cmpId,delete this.cmpVersion,delete this.eventStatus}}])}(),lt=function(){function i(){O(this,i)}return T(i,null,[{key:"absCall",value:function(e,n,t,o){return new Promise(function(s,a){var d=new XMLHttpRequest,y=function(){if(d.readyState==XMLHttpRequest.DONE)if(d.status>=200&&d.status<300){var Ne=d.response;if(typeof Ne=="string")try{Ne=JSON.parse(Ne)}catch(Ct){}s(Ne)}else a(new Error("HTTP Status: ".concat(d.status," response type: ").concat(d.responseType)))},x=function(){a(new Error("error"))},oe=function(){a(new Error("aborted"))},R=function(){a(new Error("Timeout "+o+"ms "+e))};d.withCredentials=t,d.addEventListener("load",y),d.addEventListener("error",x),d.addEventListener("abort",oe),n===null?d.open("GET",e,!0):d.open("POST",e,!0),d.responseType="json",d.timeout=o,d.ontimeout=R,d.send(n)})}},{key:"post",value:function(e,n){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;return this.absCall(e,JSON.stringify(n),t,o)}},{key:"fetch",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return this.absCall(e,null,n,t)}}])}(),ot=function(i){function r(e){var n;return O(this,r),n=m(this,r,[e]),n.name="GVLError",n}return V(r,i),T(r)}(Be(Error)),st=function(){function i(){O(this,i)}return T(i,[{key:"has",value:function(e){return st.langSet.has(e)}},{key:"forEach",value:function(e){st.langSet.forEach(e)}},{key:"size",get:function(){return st.langSet.size}}])}(),At=st;f(At,"langSet",new Set(["BG","CA","CS","DA","DE","EL","EN","ES","ET","FI","FR","HR","HU","IT","JA","LT","LV","MT","NL","NO","PL","PT","RO","RU","SK","SL","SV","TR","ZH"]));var at=function(){function i(){O(this,i),h(this,"vendors",void 0),h(this,"consentLanguages",new At),h(this,"gvlSpecificationVersion",void 0),h(this,"vendorListVersion",void 0),h(this,"tcfPolicyVersion",void 0),h(this,"lastUpdated",void 0),h(this,"purposes",void 0),h(this,"specialPurposes",void 0),h(this,"features",void 0),h(this,"specialFeatures",void 0),h(this,"stacks",void 0),h(this,"dataCategories",void 0),h(this,"language",at.DEFAULT_LANGUAGE),h(this,"vendorIds",void 0),h(this,"ready",!1),h(this,"fullVendorList",void 0),h(this,"byPurposeVendorMap",void 0),h(this,"bySpecialPurposeVendorMap",void 0),h(this,"byFeatureVendorMap",void 0),h(this,"bySpecialFeatureVendorMap",void 0),h(this,"baseUrl",void 0),h(this,"languageFilename","purposes-[LANG].json")}return T(i,[{key:"changeLanguage",value:function(){var r=ht(me().mark(function n(t){var o,s;return me().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(o=t.toUpperCase(),!this.consentLanguages.has(o)){d.next=18;break}if(o===this.language){d.next=16;break}return this.language=o,s=this.baseUrl+this.languageFilename.replace("[LANG]",t),d.prev=5,d.t0=this,d.next=9,lt.fetch(s);case 9:d.t1=d.sent,d.t0.populate.call(d.t0,d.t1),d.next=16;break;case 13:throw d.prev=13,d.t2=d.catch(5),new ot("unable to load language: "+d.t2.message);case 16:d.next=19;break;case 18:throw new ot("unsupported language ".concat(t));case 19:case"end":return d.stop()}},n,this,[[5,13]])}));function e(n){return r.apply(this,arguments)}return e}()},{key:"getJson",value:function(){return JSON.parse(JSON.stringify({gvlSpecificationVersion:this.gvlSpecificationVersion,vendorListVersion:this.vendorListVersion,tcfPolicyVersion:this.tcfPolicyVersion,lastUpdated:this.lastUpdated,purposes:this.purposes,specialPurposes:this.specialPurposes,features:this.features,specialFeatures:this.specialFeatures,stacks:this.stacks,dataCategories:this.dataCategories,vendors:this.fullVendorList}))}},{key:"isVendorList",value:function(e){return e!==void 0&&e.vendors!==void 0}},{key:"populate",value:function(e){this.purposes=e.purposes,this.specialPurposes=e.specialPurposes,this.features=e.features,this.specialFeatures=e.specialFeatures,this.stacks=e.stacks,this.dataCategories=e.dataCategories,this.isVendorList(e)&&(this.gvlSpecificationVersion=e.gvlSpecificationVersion,this.tcfPolicyVersion=e.tcfPolicyVersion,this.vendorListVersion=e.vendorListVersion,this.lastUpdated=e.lastUpdated,typeof this.lastUpdated=="string"&&(this.lastUpdated=new Date(this.lastUpdated)),this.vendors=e.vendors,this.fullVendorList=e.vendors,this.mapVendors(),this.ready=!0)}},{key:"mapVendors",value:function(e){var n=this;this.byPurposeVendorMap={},this.bySpecialPurposeVendorMap={},this.byFeatureVendorMap={},this.bySpecialFeatureVendorMap={},Object.keys(this.purposes).forEach(function(t){n.byPurposeVendorMap[t]={legInt:new Set,consent:new Set,flexible:new Set}}),Object.keys(this.specialPurposes).forEach(function(t){n.bySpecialPurposeVendorMap[t]=new Set}),Object.keys(this.features).forEach(function(t){n.byFeatureVendorMap[t]=new Set}),Object.keys(this.specialFeatures).forEach(function(t){n.bySpecialFeatureVendorMap[t]=new Set}),Array.isArray(e)||(e=Object.keys(this.fullVendorList).map(function(t){return+t})),this.vendorIds=new Set(e),this.vendors=e.reduce(function(t,o){var s=n.vendors[String(o)];return s&&s.deletedDate===void 0&&(s.purposes.forEach(function(a){n.byPurposeVendorMap[String(a)].consent.add(o)}),s.specialPurposes.forEach(function(a){n.bySpecialPurposeVendorMap[String(a)].add(o)}),s.legIntPurposes.forEach(function(a){n.byPurposeVendorMap[String(a)].legInt.add(o)}),s.flexiblePurposes&&s.flexiblePurposes.forEach(function(a){n.byPurposeVendorMap[String(a)].flexible.add(o)}),s.features.forEach(function(a){n.byFeatureVendorMap[String(a)].add(o)}),s.specialFeatures.forEach(function(a){n.bySpecialFeatureVendorMap[String(a)].add(o)}),t[o]=s),t},{})}},{key:"getFilteredVendors",value:function(e,n,t,o){var s=this,a=e.charAt(0).toUpperCase()+e.slice(1),d,y={};return e==="purpose"&&t?d=this["by"+a+"VendorMap"][String(n)][t]:d=this["by"+(o?"Special":"")+a+"VendorMap"][String(n)],d.forEach(function(x){y[String(x)]=s.vendors[String(x)]}),y}},{key:"getVendorsWithConsentPurpose",value:function(e){return this.getFilteredVendors("purpose",e,"consent")}},{key:"getVendorsWithLegIntPurpose",value:function(e){return this.getFilteredVendors("purpose",e,"legInt")}},{key:"getVendorsWithFlexiblePurpose",value:function(e){return this.getFilteredVendors("purpose",e,"flexible")}},{key:"getVendorsWithSpecialPurpose",value:function(e){return this.getFilteredVendors("purpose",e,void 0,!0)}},{key:"getVendorsWithFeature",value:function(e){return this.getFilteredVendors("feature",e)}},{key:"getVendorsWithSpecialFeature",value:function(e){return this.getFilteredVendors("feature",e,void 0,!0)}},{key:"narrowVendorsTo",value:function(e){this.mapVendors(e)}},{key:"isReady",get:function(){return this.ready}}],[{key:"fromVendorList",value:function(e){var n=new at;return n.populate(e),n}},{key:"fromUrl",value:function(){var r=ht(me().mark(function n(t){var o,s,a,d,y,x;return me().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:if(o=t.baseUrl,!(!o||o.length===0)){R.next=3;break}throw new ot("Invalid baseUrl: '"+o+"'");case 3:if(!/^https?:\/\/vendorlist\.consensu\.org\//.test(o)){R.next=5;break}throw new ot("Invalid baseUrl!  You may not pull directly from vendorlist.consensu.org and must provide your own cache");case 5:if(o.length>0&&o[o.length-1]!=="/"&&(o+="/"),s=new at,s.baseUrl=o,t.languageFilename?s.languageFilename=t.languageFilename:s.languageFilename="purposes-[LANG].json",!(t.version>0)){R.next=18;break}return a=t.versionedFilename,a||(a="archives/vendor-list-v[VERSION].json"),d=o+a.replace("[VERSION]",String(t.version)),R.t0=s,R.next=14,lt.fetch(d);case 14:R.t1=R.sent,R.t0.populate.call(R.t0,R.t1),R.next=26;break;case 18:return y=t.latestFilename,y||(y="vendor-list.json"),x=o+y,R.t2=s,R.next=24,lt.fetch(x);case 24:R.t3=R.sent,R.t2.populate.call(R.t2,R.t3);case 26:return R.abrupt("return",s);case 27:case"end":return R.stop()}},n)}));function e(n){return r.apply(this,arguments)}return e}()},{key:"isInstanceOf",value:function(e){return ge(e)=="object"&&typeof e.narrowVendorsTo=="function"}}])}(),dt=at;f(dt,"DEFAULT_LANGUAGE","EN");var Mt=function(){function i(r,e,n){O(this,i),h(this,"callResponder",void 0),h(this,"cmpApiContext",void 0),this.cmpApiContext=new wt,this.cmpApiContext.cmpId=r,this.cmpApiContext.cmpVersion=e,this.callResponder=new je(this.cmpApiContext,n)}return T(i,[{key:"fireEvent",value:function(e,n){this.cmpApiContext.eventQueue.exec(e,n)}},{key:"fireErrorEvent",value:function(e){this.cmpApiContext.eventQueue.exec("error",e)}},{key:"fireSectionChange",value:function(e){this.cmpApiContext.eventQueue.exec("sectionChange",e)}},{key:"getEventStatus",value:function(){return this.cmpApiContext.eventStatus}},{key:"setEventStatus",value:function(e){this.cmpApiContext.eventStatus=e}},{key:"getCmpStatus",value:function(){return this.cmpApiContext.cmpStatus}},{key:"setCmpStatus",value:function(e){this.cmpApiContext.cmpStatus=e,this.cmpApiContext.eventQueue.exec("cmpStatus",e)}},{key:"getCmpDisplayStatus",value:function(){return this.cmpApiContext.cmpDisplayStatus}},{key:"setCmpDisplayStatus",value:function(e){this.cmpApiContext.cmpDisplayStatus=e,this.cmpApiContext.eventQueue.exec("cmpDisplayStatus",e)}},{key:"getSignalStatus",value:function(){return this.cmpApiContext.signalStatus}},{key:"setSignalStatus",value:function(e){this.cmpApiContext.signalStatus=e,this.cmpApiContext.eventQueue.exec("signalStatus",e)}},{key:"getApplicableSections",value:function(){return this.cmpApiContext.applicableSections}},{key:"setApplicableSections",value:function(e){this.cmpApiContext.applicableSections=e}},{key:"getSupportedAPIs",value:function(){return this.cmpApiContext.supportedAPIs}},{key:"setSupportedAPIs",value:function(e){this.cmpApiContext.supportedAPIs=e}},{key:"setGppString",value:function(e){this.cmpApiContext.gppModel.decode(e)}},{key:"getGppString",value:function(){return this.cmpApiContext.gppModel.encode()}},{key:"setSectionString",value:function(e,n){this.cmpApiContext.gppModel.decodeSection(e,n)}},{key:"setSectionStringById",value:function(e,n){this.setSectionString(F.SECTION_ID_NAME_MAP.get(e),n)}},{key:"getSectionString",value:function(e){return this.cmpApiContext.gppModel.encodeSection(e)}},{key:"getSectionStringById",value:function(e){return this.getSectionString(F.SECTION_ID_NAME_MAP.get(e))}},{key:"setFieldValue",value:function(e,n,t){this.cmpApiContext.gppModel.setFieldValue(e,n,t)}},{key:"setFieldValueBySectionId",value:function(e,n,t){this.setFieldValue(F.SECTION_ID_NAME_MAP.get(e),n,t)}},{key:"getFieldValue",value:function(e,n){return this.cmpApiContext.gppModel.getFieldValue(e,n)}},{key:"getFieldValueBySectionId",value:function(e,n){return this.getFieldValue(F.SECTION_ID_NAME_MAP.get(e),n)}},{key:"getSection",value:function(e){return this.cmpApiContext.gppModel.getSection(e)}},{key:"getSectionById",value:function(e){return this.getSection(F.SECTION_ID_NAME_MAP.get(e))}},{key:"hasSection",value:function(e){return this.cmpApiContext.gppModel.hasSection(e)}},{key:"hasSectionId",value:function(e){return this.hasSection(F.SECTION_ID_NAME_MAP.get(e))}},{key:"deleteSection",value:function(e){this.cmpApiContext.gppModel.deleteSection(e)}},{key:"deleteSectionById",value:function(e){this.deleteSection(F.SECTION_ID_NAME_MAP.get(e))}},{key:"clear",value:function(){this.cmpApiContext.gppModel.clear()}},{key:"getObject",value:function(){return this.cmpApiContext.gppModel.toObject()}},{key:"getGvlFromVendorList",value:function(e){return dt.fromVendorList(e)}},{key:"getGvlFromUrl",value:function(){var r=ht(me().mark(function n(t){return me().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",dt.fromUrl(t));case 1:case"end":return s.stop()}},n)}));function e(n){return r.apply(this,arguments)}return e}()}])}(),bt=function(){function i(){O(this,i),this.cmpStatus=Ae,this.displayStatus=De}return T(i,[{key:"getCmpApi",value:function(e,n,t){return new Mt(e,n,t)}}])}(),Et=new bt,Ut={gppCmpApi:Et.getCmpApi,cmpStatus:Et.cmpStatus,displayStatus:Et.displayStatus,signalStatus:Oe};window.otIabModule=H(se({},window.otIabModule),{gppSdkRef:Ut})})();})();
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
