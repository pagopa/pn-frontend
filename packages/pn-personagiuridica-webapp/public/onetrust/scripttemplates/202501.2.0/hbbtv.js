/** 
 * onetrust-hbbtv-script
 * v202501.2.0
 * by OneTrust LLC
 * Copyright 2025 
 */
(()=>{function o(t){return t=document.querySelector(t),"none"!==getComputedStyle(t).display}(t=i=i||{}).BANNER="banner",t.PC_SDK_CONTENT="pc_sdk_content",t.PC_LIST="pc_list",t.PC_LIST_FILTER_MODAL="pc_list_filter_modal",t.PC_SDK="pc_sdk",t.UNKNOWN="unknown",(t=c=c||{}).CLICKABLE="clickable",t.IGNORE="ignore",(t=_=_||{}).DOWN="ArrowDown",t.ENTER="Enter",t.LEFT="ArrowLeft",t.RIGHT="ArrowRight";var i,c,_,t,d={B_Sdk:"#onetrust-banner-sdk",B_logo:".banner_logo",Body:"body",H3:"h3",H4:"h4",Html:"html",Ot_Consent_Sdk:"#onetrust-consent-sdk",Ot_Cookie_Policy:"#ot-sdk-cookie-policy",Ot_Show_Settings:".ot-sdk-show-settings",Optanon_Cookie_Policy:"#optanon-cookie-policy",P_Dark_Filter:".onetrust-pc-dark-filter",P_Sdk:"#onetrust-pc-sdk"},u={B_Accept_Btn_Handler:"#onetrust-accept-btn-handler",B_RejectAll_Btn_Handler:"#onetrust-reject-all-handler",BAndP_Close_Btn_Handler:".onetrust-close-btn-handler",P_Accept_Rec_Btn_Handler:"#accept-recommended-btn-handler",P_Category_Vendor_List_Handler:".category-vendors-list-handler",P_Close_Pc_Btn_Handler:"#close-pc-btn-handler",P_Menu_Switch_Hanlder:".category-menu-switch-handler",P_Refuse_All_Handler:".ot-pc-refuse-all-handler",P_Save_Pref_Btn_Handler:".save-preference-btn-handler"},p={P_Content:"#ot-pc-content",P_Logo:".ot-pc-logo",P_Title:"#ot-pc-title",P_Policy_Txt:"#ot-pc-desc",P_Vendor_Title_Elm:"#ot-lst-title",P_Vendor_Title:"#ot-lst-title h3",P_Manage_Cookies_Txt:"#ot-category-title",P_Label_Txt:".ot-label-txt",P_Category_Header:".ot-cat-header",P_Category_Grp:".ot-cat-grp",P_Category_Item:".ot-cat-item",P_Vendor_List:"#ot-pc-lst",P_Vendor_Content:"#ot-lst-cnt",P_Vendor_Container:"#ot-ven-lst",P_Ven_Bx:"ot-ven-box",P_Ven_Name:".ot-ven-name",P_Ven_Link:".ot-ven-link",P_Ven_Leg_Claim:".ot-ven-legclaim-link",P_Ven_Ctgl:"ot-ven-ctgl",P_Ven_Ltgl:"ot-ven-litgl",P_Ven_Ltgl_Only:"ot-ven-litgl-only",P_Ven_Opts:".ot-ven-opts",P_Triangle:"#ot-anchor",P_Fltr_Modal:"#ot-fltr-modal",P_Fltr_Options:".ot-fltr-opts",P_Fltr_Option:".ot-fltr-opt",P_Select_Cntr:"#ot-sel-blk",P_Host_Cntr:"#ot-host-lst",P_Host_Hdr:".ot-host-hdr",P_Host_Desc:".ot-host-desc",P_Li_Hdr:".ot-pli-hdr",P_Li_Title:".ot-li-title",P_Sel_All_Vendor_Consent_Handler:"#select-all-vendor-leg-handler",P_Sel_All_Vendor_Leg_Handler:"#select-all-vendor-groups-handler",P_Sel_All_Host_Handler:"#select-all-hosts-groups-handler",P_Host_Title:".ot-host-name",P_Leg_Select_All:".ot-sel-all-hdr",P_Leg_Header:".ot-li-hdr",P_Acc_Header:".ot-acc-hdr",P_Cnsnt_Header:".ot-consent-hdr",P_Tgl_Cntr:".ot-tgl-cntr",P_CBx_Cntr:".ot-chkbox",P_Sel_All_Host_El:"ot-selall-hostcntr",P_Sel_All_Vendor_Consent_El:"ot-selall-vencntr",P_Sel_All_Vendor_Leg_El:"ot-selall-licntr",P_c_Name:"ot-c-name",P_c_Host:"ot-c-host",P_c_Duration:"ot-c-duration",P_c_Type:"ot-c-type",P_c_Category:"ot-c-category",P_c_Desc:"ot-c-description",P_Host_View_Cookies:".ot-host-expand",P_Host_Opt:".ot-host-opt",P_Host_Info:".ot-host-info",P_Arrw_Cntr:".ot-arw-cntr",P_Acc_Txt:".ot-acc-txt",P_Vendor_CheckBx:"ot-ven-chkbox",P_Vendor_LegCheckBx:"ot-ven-leg-chkbox",P_Host_UI:"ot-hosts-ui",P_Host_Cnt:"ot-host-cnt",P_Host_Bx:"ot-host-box",P_Ven_Dets:".ot-ven-dets",P_Ven_Disc:".ot-ven-disc",P_Gven_List:"#ot-gn-venlst",P_Close_Btn:".ot-close-icon",P_Ven_Lst_Cntr:".ot-vlst-cntr",P_Host_Lst_cntr:".ot-hlst-cntr",P_Sub_Grp_Cntr:".ot-subgrp-cntr",P_Subgrp_Desc:".ot-subgrp-desc",P_Subgp_ul:".ot-subgrps",P_Subgrp_li:".ot-subgrp",P_Subgrp_Tgl_Cntr:".ot-subgrp-tgl",P_Grp_Container:".ot-grps-cntr",P_Privacy_Txt:"#ot-pvcy-txt",P_Privacy_Hdr:"#ot-pvcy-hdr",P_Active_Menu:"ot-active-menu",P_Desc_Container:".ot-desc-cntr",P_Tab_Grp_Hdr:"ot-grp-hdr1",P_Search_Cntr:"#ot-search-cntr",P_Clr_Fltr_Txt:"#clear-filters-handler",P_Acc_Grp_Desc:".ot-acc-grpdesc",P_Acc_Container:".ot-acc-grpcntr",P_Line_Through:"line-through",P_Vendor_Search_Input:"#vendor-search-handler"},r=function(t){for(var e=!1,n=t,o=[];null!==n.parentNode&&!n.parentNode.classList.contains("ot-sdk-row")&&n.parentNode!==document.documentElement;)o.push(n.parentNode),(n=n.parentNode).classList.contains("ot-accordion-layout")&&(e=!0);(t.getAttribute("ot-accordion")||t.classList.contains("category-switch-handler"))&&(e=!1);t=n.querySelector("button[aria-expanded]");return t&&t.getAttribute("aria-expanded")?"true"!==t.getAttribute("aria-expanded")&&e:null},s=function(t,e){for(var n=t;null!=n&&n.parentNode!=document.documentElement;){if("none"===getComputedStyle(n).display)return!0;n=n.parentNode}return!1};function P(t,e,n){var o;if(t instanceof Element)return o=getComputedStyle(t),t=t,o=o,n=n,!((e=e)!==i.PC_SDK_CONTENT||!r(t))||"none"===o.display||"visible"!==o.visibility||!!s(t,n)||t.offsetWidth+t.offsetHeight+t.getBoundingClientRect().height+t.getBoundingClientRect().width===0&&(e=null,!(e=t.nextElementSibling&&"LABEL"===t.nextElementSibling.tagName&&getComputedStyle(t.nextElementSibling)?getComputedStyle(t.nextElementSibling).display:e)||"inline-block"!==e&&"block"!==e)?c.IGNORE:c.CLICKABLE;throw Error("DomUtil: elem is not an element.")}var e,h={content:!(t.UP="ArrowUp"),filterModal:!1,list:!1};function l(t,e,n,o){var r,s,l,a,_=(t=>{for(var e=t,n=[];null!=e&&e.parentNode!=document.documentElement;){if(n.push(e.parentNode),"#"+(e=e.parentNode).parentNode.id===p.P_Fltr_Modal)return i.PC_LIST_FILTER_MODAL;if("#"+e.parentNode.id===p.P_Vendor_List)return i.PC_LIST;if("#"+e.parentNode.id===p.P_Content)return i.PC_SDK_CONTENT;if("#"+e.parentNode.id===d.B_Sdk)return i.BANNER;if("#"+e.parentNode.id===d.P_Sdk)return i.PC_SDK}return i.UNKNOWN})(t),n=(h=n,{});return"#"+(a=t).id===u.P_Accept_Rec_Btn_Handler||"#"+a.id===u.P_Close_Pc_Btn_Handler||a.parentNode.classList.contains("ot-pc-footer-logo")||a.classList.contains(u.P_Refuse_All_Handler.substring(1))||a.classList.contains(u.P_Save_Pref_Btn_Handler.substring(1))?(a=t,r=e,s=o,l={},h.content&&!h.list?(l.areaName=i.PC_SDK_CONTENT,l.status=P(a,r,"universalAssignedToContent-"+s)):h.filterModal?l.status=c.IGNORE:!h.content&&h.list&&(l.areaName=i.PC_LIST,l.status=P(a,r,"universalAssignedToList-"+s)),n=l):(n.areaName=_,n.status=e===_?P(t,e,_+"-"+o):c.IGNORE),n}function a(t){var e=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});t.dispatchEvent(e)}function g(){function t(t){return!!document.querySelector(t)&&(t=document.querySelector(t),"none"!==getComputedStyle(t).display)}var e=t(d.B_Sdk),n=t(p.P_Content),o=t(p.P_Fltr_Modal),r=t(p.P_Vendor_List),s=t(d.P_Sdk);return e&&!s?i.BANNER:s&&n&&!r&&!o?i.PC_SDK_CONTENT:s&&r&&!o?i.PC_LIST:s&&o?i.PC_LIST_FILTER_MODAL:i.UNKNOWN}function n(){this.clickableButtons=[],this.buttonNavigation={current:0,next:0,previous:0},this.handleKeydown=this.handleKeydown.bind(this)}n.prototype.setClickableButtons=function(){(e={})[i.BANNER]=d.B_Sdk,e[i.PC_SDK_CONTENT]=d.P_Sdk,e[i.PC_LIST]=p.P_Vendor_List,e[i.PC_LIST_FILTER_MODAL]=p.P_Fltr_Modal;this.setCurrentOpenAreaName();var t,e=e[this.currentOpenAreaName],e=document.querySelector(e);e?t=e.querySelectorAll('a, button, input[type="checkbox"]'):console.error("No buttons which require keyboard navigation were found."),this.currentOpenAreaName!==i.BANNER&&(t=document.querySelector(d.P_Sdk).querySelectorAll('a, button, input[type="checkbox"]')),this.clickableButtons=this.findClickableButtons(t)},n.prototype.setCurrentOpenAreaName=function(){this.currentOpenAreaName=g()},n.prototype.initEventListener=function(){var t=document.querySelector(d.Ot_Consent_Sdk);t?t.addEventListener("keydown",this.handleKeydown):console.error("Unable to add the keydown event listener for the banner.")},n.prototype.handleEnterKeypress=function(t,e){var n=this,o=(a(t),null);setTimeout(function(){n.setClickableButtons();var t=document.querySelector('[data-remotejs="'+n.currentOpenAreaName+"-"+e+'"]')||null;t&&n.prevOpenAreaName!==n.currentOpenAreaName?o=null:t&&t.getAttribute("data-remotejs").split("-")[0]===n.currentOpenAreaName?o=t:console.error("TODO - hbbtv.ts, line 124")},1),setTimeout(function(){t.classList.contains("ot-remove-objection-handler")&&(o=document.querySelector('[data-remotejs="'+n.currentOpenAreaName+"-"+(e-1)+'"]')),n.setButtonInFocus(o)},2),this.maybePassControlToHbbTv(t)},n.prototype.maybePassControlToHbbTv=function(t){if("#"+t.id===u.B_Accept_Btn_Handler||"#"+t.id===u.P_Accept_Rec_Btn_Handler||"#"+t.id===u.B_RejectAll_Btn_Handler||"#"+t.id===u.P_Close_Pc_Btn_Handler||t.classList.contains(u.BAndP_Close_Btn_Handler.substring(1))||t.classList.contains(u.P_Refuse_All_Handler.substring(1))||t.classList.contains(u.P_Save_Pref_Btn_Handler.substring(1))){t.blur(),t.removeEventListener("keydown",this.handleKeydown);try{window.delegate()}catch(t){console.error("An error occurred passed keyboard navigation to the HbbTV interface.")}a(t)}},n.prototype.handleKeydown=function(t){t.preventDefault();var e,n=t.key,o=(this.prevOpenAreaName=g(),this.buttonNavigation.current=parseInt(t.target.getAttribute("data-remotejs").split("-")[1]),this.clickableButtons.indexOf(this.buttonNavigation.current)),r=this.clickableButtons[o],s=this.clickableButtons[0],l=this.clickableButtons[o+1],a=this.clickableButtons[this.clickableButtons.length-1],o=this.clickableButtons[o-1];this.buttonNavigation.next=r===a?s:l,this.buttonNavigation.previous=r===s?a:o,n===_.ENTER?this.handleEnterKeypress(t.target,r):n===_.UP||n===_.LEFT?(e=document.querySelector('[data-remotejs="'+this.currentOpenAreaName+"-"+this.buttonNavigation.previous+'"]'),this.setButtonInFocus(e)):n!==_.DOWN&&n!=_.RIGHT||(e=document.querySelector('[data-remotejs="'+this.currentOpenAreaName+"-"+this.buttonNavigation.next+'"]'),this.setButtonInFocus(e))},n.prototype.setButtonInFocus=function(t){var e=this;setTimeout(function(){(t||document.querySelector('[data-remotejs="'+e.currentOpenAreaName+"-"+e.clickableButtons[0]+'"]')).focus()},3)},n.prototype.findClickableButtons=function(t){var n=this,o=[];return this.setCurrentOpenAreaName(),t.forEach(function(t,e){n.assessButtonStatus(t,e)&&o.push(e)}),o},n.prototype.assessButtonStatus=function(t,e){var n={content:o(p.P_Content),filterModal:o(p.P_Fltr_Modal),list:o(p.P_Vendor_List)},n=l(t,this.currentOpenAreaName,n,e);return this.setButtonStatus(t,n.areaName+"-"+e,n.status+"-"+void 0),n.status===c.CLICKABLE},n.prototype.setButtonStatus=function(t,e,n){t.setAttribute("data-remotejs",e),t.setAttribute("data-remotejs-status",n),t.setAttribute("tabindex","0")},n.prototype.remoteNavigation=function(){console.log("Initializing HbbTV keyboard controls."),this.initEventListener(),this.setClickableButtons(),this.setButtonInFocus()},e=new n,setTimeout(function(){e.remoteNavigation()},1e3)})();
