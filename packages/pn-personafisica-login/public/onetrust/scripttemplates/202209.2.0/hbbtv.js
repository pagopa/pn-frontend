/** 
 * onetrust-hbbtv-script
 * v202209.2.0
 * by OneTrust LLC
 * Copyright 2022 
 */
!function(){"use strict";var d,t,_,e,n,r,l,o;(t=d=d||{}).BANNER="banner",t.PC_SDK_CONTENT="pc_sdk_content",t.PC_LIST="pc_list",t.PC_LIST_FILTER_MODAL="pc_list_filter_modal",t.PC_SDK="pc_sdk",t.UNKNOWN="unknown",(e=_=_||{}).CLICKABLE="clickable",e.IGNORE="ignore",(r=n=n||{}).IS1="is1",r.IS2="is2",r.IS3="is3",r.IS4="is4",r.BANNER_BTN_BUT_PC_OPEN="is5",r.PC_BTN_BUT_PC_CLOSED="is6",r.UNKNOWN_REASON="is7",(o=l=l||{}).DOWN="ArrowDown",o.ENTER="Enter",o.LEFT="ArrowLeft",o.RIGHT="ArrowRight",o.UP="ArrowUp";function a(t){var e=document.querySelector(t);return"none"!==getComputedStyle(e).display}var p="#onetrust-banner-sdk",i="#onetrust-consent-sdk",N="#onetrust-pc-sdk",h={B_Accept_Btn_Handler:"#onetrust-accept-btn-handler",B_RejectAll_Btn_Handler:"#onetrust-reject-all-handler",BAndP_Close_Btn_Handler:".onetrust-close-btn-handler",P_Accept_Rec_Btn_Handler:"#accept-recommended-btn-handler",P_Category_Vendor_List_Handler:".category-vendors-list-handler",P_Close_Pc_Btn_Handler:"#close-pc-btn-handler",P_Menu_Switch_Hanlder:".category-menu-switch-handler",P_Refuse_All_Handler:".ot-pc-refuse-all-handler",P_Save_Pref_Btn_Handler:".save-preference-btn-handler"},b="#ot-pc-content",m="#ot-pc-lst",f="#ot-fltr-modal",s=function(t){for(var e=!1,n=t,r=[];null!==n.parentNode&&!n.parentNode.classList.contains("ot-sdk-row")&&n.parentNode!==document.documentElement;)r.push(n.parentNode),(n=n.parentNode).classList.contains("ot-accordion-layout")&&(e=!0);(t.getAttribute("ot-accordion")||t.classList.contains("category-switch-handler"))&&(e=!1);var o=n.querySelector("button[aria-expanded]");return o&&o.getAttribute("aria-expanded")?"true"!==o.getAttribute("aria-expanded")&&e:null},u=function(t,e){for(var n=t;null!=n&&n.parentNode!=document.documentElement;){if("none"===getComputedStyle(n).display)return!0;n=n.parentNode}return!1};function v(t,e,n){if(!(t instanceof Element))throw Error("DomUtil: elem is not an element.");return function(t,e,n,r){if(n===d.PC_SDK_CONTENT&&s(t))return!0;if("none"===e.display||"visible"!==e.visibility)return!0;if(u(t,r))return!0;if(t.offsetWidth+t.offsetHeight+t.getBoundingClientRect().height+t.getBoundingClientRect().width!==0)return!1;var o=null;return t.nextElementSibling&&"LABEL"===t.nextElementSibling.tagName&&getComputedStyle(t.nextElementSibling)&&(o=getComputedStyle(t.nextElementSibling).display),!o||"inline-block"!==o&&"block"!==o}(t,getComputedStyle(t),e,n)?_.IGNORE:_.CLICKABLE}var y={content:!1,filterModal:!1,list:!1};function c(t,e,n,r){var o=function(t){for(var e=t,n=[];null!=e&&e.parentNode!=document.documentElement;){if(n.push(e.parentNode),"#"+(e=e.parentNode).parentNode.id===f)return d.PC_LIST_FILTER_MODAL;if("#"+e.parentNode.id===m)return d.PC_LIST;if("#"+e.parentNode.id===b)return d.PC_SDK_CONTENT;if("#"+e.parentNode.id===p)return d.BANNER;if("#"+e.parentNode.id===N)return d.PC_SDK}return d.UNKNOWN}(t);y=n;var a,i,s,u,l,c={};return"#"+(l=t).id===h.P_Accept_Rec_Btn_Handler||"#"+l.id===h.P_Close_Pc_Btn_Handler||l.parentNode.classList.contains("ot-pc-footer-logo")||l.classList.contains(h.P_Refuse_All_Handler.substring(1))||l.classList.contains(h.P_Save_Pref_Btn_Handler.substring(1))?(a=t,i=e,s=r,u={},y.content&&!y.list?(u.areaName=d.PC_SDK_CONTENT,u.status=v(a,i,"universalAssignedToContent-"+s)):y.filterModal?u.status=_.IGNORE:!y.content&&y.list&&(u.areaName=d.PC_LIST,u.status=v(a,i,"universalAssignedToList-"+s)),c=u):(c.areaName=o,c.status=e===o?v(t,e,o+"-"+r):_.IGNORE),c}function B(t){var e=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});t.dispatchEvent(e)}function A(){function t(t){var e;return!!document.querySelector(t)&&(e=document.querySelector(t),"none"!==getComputedStyle(e).display)}var e=t(p),n=t(b),r=t(f),o=t(m),a=t(N);return e&&!a?d.BANNER:a&&n&&!o&&!r?d.PC_SDK_CONTENT:a&&o&&!r?d.PC_LIST:a&&r?d.PC_LIST_FILTER_MODAL:d.UNKNOWN}var C,S=(g.prototype.setClickableButtons=function(){var t,e=((t={})[d.BANNER]=p,t[d.PC_SDK_CONTENT]=N,t[d.PC_LIST]=m,t[d.PC_LIST_FILTER_MODAL]=f,t);this.setCurrentOpenAreaName();var n,r=e[this.currentOpenAreaName],o=document.querySelector(r);o?n=o.querySelectorAll('a, button, input[type="checkbox"]'):console.error("No buttons which require keyboard navigation were found."),this.currentOpenAreaName!==d.BANNER&&(n=document.querySelector(N).querySelectorAll('a, button, input[type="checkbox"]')),this.clickableButtons=this.findClickableButtons(n)},g.prototype.setCurrentOpenAreaName=function(){this.currentOpenAreaName=A()},g.prototype.initEventListener=function(){var t=document.querySelector(i);t?t.addEventListener("keydown",this.handleKeydown):console.error("Unable to add the keydown event listener for the banner.")},g.prototype.handleEnterKeypress=function(t,e){var n=this;B(t);var r=null;setTimeout(function(){n.setClickableButtons();var t=document.querySelector('[data-remotejs="'+n.currentOpenAreaName+"-"+e+'"]')||null;t&&n.prevOpenAreaName!==n.currentOpenAreaName?r=null:t&&t.getAttribute("data-remotejs").split("-")[0]===n.currentOpenAreaName?r=t:console.error("TODO - hbbtv.ts, line 124")},1),setTimeout(function(){t.classList.contains("ot-remove-objection-handler")&&(r=document.querySelector('[data-remotejs="'+n.currentOpenAreaName+"-"+(e-1)+'"]')),n.setButtonInFocus(r)},2),this.maybePassControlToHbbTv(t)},g.prototype.maybePassControlToHbbTv=function(t){if("#"+t.id===h.B_Accept_Btn_Handler||"#"+t.id===h.P_Accept_Rec_Btn_Handler||"#"+t.id===h.B_RejectAll_Btn_Handler||"#"+t.id===h.P_Close_Pc_Btn_Handler||t.classList.contains(h.BAndP_Close_Btn_Handler.substring(1))||t.classList.contains(h.P_Refuse_All_Handler.substring(1))||t.classList.contains(h.P_Save_Pref_Btn_Handler.substring(1))){t.blur(),t.removeEventListener("keydown",this.handleKeydown);try{window.delegate()}catch(t){console.error("An error occurred passed keyboard navigation to the HbbTV interface.")}B(t)}},g.prototype.handleKeydown=function(t){t.preventDefault();var e,n=t.key;this.prevOpenAreaName=A(),this.buttonNavigation.current=parseInt(t.target.getAttribute("data-remotejs").split("-")[1]);var r=this.clickableButtons.indexOf(this.buttonNavigation.current),o=this.clickableButtons[r],a=this.clickableButtons[0],i=this.clickableButtons[r+1],s=this.clickableButtons[this.clickableButtons.length-1],u=this.clickableButtons[r-1];this.buttonNavigation.next=o===s?a:i,this.buttonNavigation.previous=o===a?s:u,n===l.ENTER?this.handleEnterKeypress(t.target,o):n===l.UP||n===l.LEFT?(e=document.querySelector('[data-remotejs="'+this.currentOpenAreaName+"-"+this.buttonNavigation.previous+'"]'),this.setButtonInFocus(e)):n!==l.DOWN&&n!=l.RIGHT||(e=document.querySelector('[data-remotejs="'+this.currentOpenAreaName+"-"+this.buttonNavigation.next+'"]'),this.setButtonInFocus(e))},g.prototype.setButtonInFocus=function(t){var e=this;setTimeout(function(){t?t.focus():document.querySelector('[data-remotejs="'+e.currentOpenAreaName+"-"+e.clickableButtons[0]+'"]').focus()},3)},g.prototype.findClickableButtons=function(t){var n=this,r=[];return this.setCurrentOpenAreaName(),t.forEach(function(t,e){n.assessButtonStatus(t,e)&&r.push(e)}),r},g.prototype.assessButtonStatus=function(t,e){var n={content:a(b),filterModal:a(f),list:a(m)},r=c(t,this.currentOpenAreaName,n,e);return this.setButtonStatus(t,r.areaName+"-"+e,r.status+"-"+void 0),r.status===_.CLICKABLE},g.prototype.setButtonStatus=function(t,e,n){t.setAttribute("data-remotejs",e),t.setAttribute("data-remotejs-status",n),t.setAttribute("tabindex","0")},g.prototype.remoteNavigation=function(){console.log("Initializing HbbTV keyboard controls."),this.initEventListener(),this.setClickableButtons(),this.setButtonInFocus()},g);function g(){this.clickableButtons=[],this.buttonNavigation={current:0,next:0,previous:0},this.handleKeydown=this.handleKeydown.bind(this)}C=new S,setTimeout(function(){C.remoteNavigation()},1e3)}();
