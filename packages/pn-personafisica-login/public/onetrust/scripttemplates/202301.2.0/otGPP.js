!function(){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e,n,r,i,o,s){try{var c=t[o](s),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,i)}function t(c){return function(){var t=this,s=arguments;return new Promise(function(e,n){var r=c.apply(t,s);function i(t){u(r,e,n,i,o,"next",t)}function o(t){u(r,e,n,i,o,"throw",t)}i(void 0)})}}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}function S(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}function E(t){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t,e,n){return(s=function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(t){return}}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&o(i,n.prototype),i}).apply(null,arguments)}function e(t){var r="function"==typeof Map?new Map:void 0;return(e=function(t){if(null===t||(e=t,-1===Function.toString.call(e).indexOf("[native code]")))return t;var e;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(t))return r.get(t);r.set(t,n)}function n(){return s(t,arguments,E(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),o(n,t)})(t)}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?f(t):e}function p(t,e,n){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=E(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function n(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var d=function(){function r(t,e,n){c(this,r),S(this,"callback",void 0),S(this,"parameter",void 0),S(this,"success",!0),S(this,"cmpApiContext",void 0),this.cmpApiContext=t,Object.assign(this,{callback:e,parameter:n})}return a(r,[{key:"execute",value:function(){try{return this.respond()}catch(t){return this.invokeCallback(null),null}}},{key:"invokeCallback",value:function(t){var e=null!==t;this.callback&&this.callback(t,e)}}]),r}();function _(r){return function(){var t,e=E(r);if(function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(t){return}}}()){var n=E(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return h(this,t)}}var g=function(){l(e,d);var t=_(e);function e(){return c(this,e),t.apply(this,arguments)}return a(e,[{key:"respond",value:function(){return{eventName:"listenerRegistered",listenerId:this.cmpApiContext.eventQueue.add({callback:this.callback,parameter:this.parameter}),data:!0,pingData:{gppVersion:this.cmpApiContext.gppVersion,cmpStatus:this.cmpApiContext.cmpStatus,cmpDisplayStatus:this.cmpApiContext.cmpDisplayStatus,apiSupport:this.cmpApiContext.apiSupport,currentAPI:this.cmpApiContext.currentAPI,cmpId:this.cmpApiContext.cmpId,cmpVersion:this.cmpApiContext.cmpVersion}}}}]),e}();function T(r){return function(){var t,e=E(r);if(function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(t){return}}}()){var n=E(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return h(this,t)}}var O=function(){l(e,d);var t=T(e);function e(){return c(this,e),t.apply(this,arguments)}return a(e,[{key:"respond",value:function(){var t={gppVersion:this.cmpApiContext.gppVersion,cmpStatus:this.cmpApiContext.cmpStatus,cmpDisplayStatus:this.cmpApiContext.cmpDisplayStatus,apiSupport:this.cmpApiContext.apiSupport,currentAPI:this.cmpApiContext.currentAPI,cmpId:this.cmpApiContext.cmpId,cmpVersion:this.cmpApiContext.cmpVersion};return this.invokeCallback(t),t}}]),e}();function N(r){return function(){var t,e=E(r);if(function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(t){return}}}()){var n=E(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return h(this,t)}}var I=function(){l(e,d);var t=N(e);function e(){return c(this,e),t.apply(this,arguments)}return a(e,[{key:"respond",value:function(){if(!this.parameter||0===this.parameter.length)throw new Error("<section>.<field> parameter required");var t=this.parameter.split(".");if(2!=t.length)throw new Error("Field name must be in the format <section>.<fieldName>");var e=t[0],n=t[1],r=this.cmpApiContext.gppModel.getFieldValue(e,n);return this.invokeCallback(r),r}}]),e}();function v(r){return function(){var t,e=E(r);if(function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(t){return}}}()){var n=E(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return h(this,t)}}var A=function(){l(e,d);var t=v(e);function e(){return c(this,e),t.apply(this,arguments)}return a(e,[{key:"respond",value:function(){var t=this.cmpApiContext.gppModel.getHeader(),e={sectionId:t.Id,gppVersion:this.cmpApiContext.gppVersion,sectionList:t.SectionIds,applicableSections:this.cmpApiContext.applicableSections,gppString:this.cmpApiContext.gppModel.encode(),pingData:{gppVersion:this.cmpApiContext.gppVersion,cmpStatus:this.cmpApiContext.cmpStatus,cmpDisplayStatus:this.cmpApiContext.cmpDisplayStatus,apiSupport:this.cmpApiContext.apiSupport,currentAPI:this.cmpApiContext.currentAPI,cmpId:this.cmpApiContext.cmpId,cmpVersion:this.cmpApiContext.cmpVersion}};return this.invokeCallback(e),e}}]),e}();function R(r){return function(){var t,e=E(r);if(function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(t){return}}}()){var n=E(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return h(this,t)}}var C=function(){l(e,d);var t=R(e);function e(){return c(this,e),t.apply(this,arguments)}return a(e,[{key:"respond",value:function(){if(!this.parameter||0===this.parameter.length)throw new Error("<section> parameter required");var t=null;return this.cmpApiContext.gppModel.hasSection(this.parameter)&&(t=this.cmpApiContext.gppModel.getSection(this.parameter)),this.invokeCallback(t),t}}]),e}();function P(r){return function(){var t,e=E(r);if(function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(t){return}}}()){var n=E(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return h(this,t)}}var y,D,V=function(){l(e,d);var t=P(e);function e(){return c(this,e),t.apply(this,arguments)}return a(e,[{key:"respond",value:function(){if(!this.parameter||0===this.parameter.length)throw new Error("<section>[.version] parameter required");var t=this.cmpApiContext.gppModel.hasSection(this.parameter);return this.invokeCallback(t),t}}]),e}();function m(r){return function(){var t,e=E(r);if(function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(t){return}}}()){var n=E(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return h(this,t)}}(D=y=y||{}).ADD_EVENT_LISTENER="addEventListener",D.GET_FIELD="getField",D.GET_GPP_DATA="getGPPData",D.GET_SECTION="getSection",D.GET_TC_DATA="getTCData",D.HAS_SECTION="hasSection",D.PING="ping",D.REMOVE_EVENT_LISTENER="removeEventListener";var M=function(){l(e,d);var t=m(e);function e(){return c(this,e),t.apply(this,arguments)}return a(e,[{key:"respond",value:function(){var t=this.parameter;return this.cmpApiContext.eventQueue.remove(t)?{eventName:"listenerRemoved",listenerId:t,data:!0,pingData:{gppVersion:this.cmpApiContext.gppVersion,cmpStatus:this.cmpApiContext.cmpStatus,cmpDisplayStatus:this.cmpApiContext.cmpDisplayStatus,apiSupport:this.cmpApiContext.apiSupport,currentAPI:this.cmpApiContext.currentAPI,cmpId:this.cmpApiContext.cmpId,cmpVersion:this.cmpApiContext.cmpVersion}}:{eventName:"listenerRemoved",listenerId:t,data:!1,pingData:{gppVersion:this.cmpApiContext.gppVersion,cmpStatus:this.cmpApiContext.cmpStatus,cmpDisplayStatus:this.cmpApiContext.cmpDisplayStatus,apiSupport:this.cmpApiContext.apiSupport,currentAPI:this.cmpApiContext.currentAPI,cmpId:this.cmpApiContext.cmpId,cmpVersion:this.cmpApiContext.cmpVersion}}}}]),e}();function w(r){return function(){var t,e=E(r);if(function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(t){return}}}()){var n=E(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return h(this,t)}}var U,b,k,L,G,x,F,B,H=function(){l(e,d);var t=w(e);function e(){return c(this,e),t.apply(this,arguments)}return a(e,[{key:"respond",value:function(){var t=null;return this.cmpApiContext.gppModel.hasSection("tcfeuvs")&&(t=this.cmpApiContext.gppModel.getSection("tcfeuv2")),this.invokeCallback(t),t}}]),e}();U=y.ADD_EVENT_LISTENER,b=y.GET_FIELD,k=y.GET_GPP_DATA,L=y.GET_SECTION,G=y.GET_TC_DATA,x=y.HAS_SECTION,F=y.PING,B=y.REMOVE_EVENT_LISTENER;function j(){c(this,j)}var Y,K,W,Q,X,q;S(j,U,g),S(j,b,I),S(j,k,A),S(j,L,C),S(j,G,H),S(j,x,V),S(j,F,O),S(j,B,M),(K=Y=Y||{}).STUB="stub",K.LOADING="loading",K.LOADED="loaded",K.ERROR="error",(Q=W=W||{}).VISIBLE="visible",Q.HIDDEN="hidden",Q.DISABLED="disabled",(q=X=X||{}).GPP_LOADED="gpploaded",q.CMP_UI_SHOWN="cmpuishown",q.USER_ACTION_COMPLETE="useractioncomplete";var $=function(){function r(t,e){if(c(this,r),S(this,"callQueue",void 0),S(this,"customCommands",void 0),S(this,"cmpApiContext",void 0),this.cmpApiContext=t,e){var n=y.ADD_EVENT_LISTENER;if(null!=e&&e[n])throw new Error("Built-In Custom Commmand for ".concat(n," not allowed"));if(n=y.REMOVE_EVENT_LISTENER,null!=e&&e[n])throw new Error("Built-In Custom Commmand for ".concat(n," not allowed"));this.customCommands=e}try{this.callQueue=window.__gpp()||[]}catch(t){this.callQueue=[]}finally{window.__gpp=this.apiCall.bind(this),this.purgeQueuedCalls()}}return a(r,[{key:"apiCall",value:function(t,e,n){if("string"!=typeof t)return e(null,!1);if(e&&"function"!=typeof e)throw new Error("invalid callback function");return this.isCustomCommand(t)?this.customCommands[t](e,n):this.isBuiltInCommand(t)?new j[t](this.cmpApiContext,e,n).execute():e?e(null,!1):void 0}},{key:"purgeQueuedCalls",value:function(){var t=this.callQueue;this.callQueue=[],t.forEach(function(t){var e;(e=window).__gpp.apply(e,n(t))})}},{key:"isCustomCommand",value:function(t){return this.customCommands&&"function"==typeof this.customCommands[t]}},{key:"isBuiltInCommand",value:function(t){return void 0!==j[t]}}]),r}(),J=function(){function i(t){c(this,i),S(this,"eventQueue",new Map),S(this,"queueNumber",1e3),S(this,"cmpApiContext",void 0),this.cmpApiContext=t;try{for(var e=window.__gpp("events")||[],n=0;n<e.length;n++){var r=e[n];this.eventQueue.set(r.id,{callback:r.callback,parameter:r.parameter})}}catch(t){console.log(t)}}return a(i,[{key:"add",value:function(t){return this.eventQueue.set(this.queueNumber,t),this.queueNumber++}},{key:"get",value:function(t){return this.eventQueue.get(t)}},{key:"remove",value:function(t){return this.eventQueue.delete(t)}},{key:"exec",value:function(n,r){var i=this;this.eventQueue.forEach(function(t,e){t.callback({eventName:n,listenerId:e,data:r,pingData:{gppVersion:i.cmpApiContext.gppVersion,cmpStatus:i.cmpApiContext.cmpStatus,cmpDisplayStatus:i.cmpApiContext.cmpDisplayStatus,apiSupport:i.cmpApiContext.apiSupport,currentAPI:i.cmpApiContext.currentAPI,cmpId:i.cmpApiContext.cmpId,cmpVersion:i.cmpApiContext.cmpVersion}})})}},{key:"clear",value:function(){this.queueNumber=1e3,this.eventQueue.clear()}},{key:"size",get:function(){return this.eventQueue.size}}]),i}();function z(r){return function(){var t,e=E(r);if(function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(t){return}}}()){var n=E(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return h(this,t)}}var Z=function(){l(r,e(Error));var n=z(r);function r(t){var e;return c(this,r),(e=n.call(this,t)).name="DecodingError",e}return r}(),tt=function(){function t(){c(this,t)}return a(t,null,[{key:"encode",value:function(t,e){var n=[];if(1<=t)for(n.push(1);t>=2*n[0];)n.unshift(2*n[0]);for(var r="",i=0;i<n.length;i++){var o=n[i];o<=t?(r+="1",t-=o):r+="0"}for(;r.length<e;)r="0"+r;return r}},{key:"decode",value:function(t){if(!/^[0-1]*$/.test(t))throw new Z("Undecodable FixedInteger '"+t+"'");for(var e=0,n=[],r=0;r<t.length;r++)n[t.length-(r+1)]=0===r?1:2*n[t.length-r];for(var i=0;i<t.length;i++)"1"===t.charAt(i)&&(e+=n[i]);return e}}]),t}();function et(r){return function(){var t,e=E(r);if(function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(t){return}}}()){var n=E(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return h(this,t)}}var nt=function(){l(r,e(Error));var n=et(r);function r(t){var e;return c(this,r),(e=n.call(this,t)).name="EncodingError",e}return r}(),rt=function(){function o(){c(this,o)}return a(o,[{key:"encode",value:function(e){if(!/^[0-1]*$/.test(e))throw new nt("Unencodable Base64Url '"+e+"'");e=this.pad(e);for(var t="",n=0;n<=e.length-6;){var r=e.substring(n,n+6);try{var i=tt.decode(r);t+=o.DICT.charAt(i),n+=6}catch(t){throw new nt("Unencodable Base64Url '"+e+"'")}}return t}},{key:"decode",value:function(t){if(!/^[A-Za-z0-9\-_]*$/.test(t))throw new Z("Undecodable Base64URL string");for(var e="",n=0;n<t.length;n++){var r=t.charAt(n),i=o.REVERSE_DICT.get(r);e+=tt.encode(i,6)}return e}}]),o}();function it(r){return function(){var t,e=E(r);if(function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(t){return}}}()){var n=E(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return h(this,t)}}S(rt,"DICT","ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),S(rt,"REVERSE_DICT",new Map([["A",0],["B",1],["C",2],["D",3],["E",4],["F",5],["G",6],["H",7],["I",8],["J",9],["K",10],["L",11],["M",12],["N",13],["O",14],["P",15],["Q",16],["R",17],["S",18],["T",19],["U",20],["V",21],["W",22],["X",23],["Y",24],["Z",25],["a",26],["b",27],["c",28],["d",29],["e",30],["f",31],["g",32],["h",33],["i",34],["j",35],["k",36],["l",37],["m",38],["n",39],["o",40],["p",41],["q",42],["r",43],["s",44],["t",45],["u",46],["v",47],["w",48],["x",49],["y",50],["z",51],["0",52],["1",53],["2",54],["3",55],["4",56],["5",57],["6",58],["7",59],["8",60],["9",61],["-",62],["_",63]]));var ot=function(){l(e,rt);var t=it(e);function e(){return c(this,e),t.apply(this,arguments)}return a(e,[{key:"pad",value:function(t){for(;0<t.length%8;)t+="0";for(;0<t.length%6;)t+="0";return t}}]),e}(),st=function(){function t(){c(this,t)}return a(t,null,[{key:"encode",value:function(t){var e=[];if(1<=t&&(e.push(1),2<=t)){e.push(2);for(var n=2;t>=e[n-1]+e[n-2];)e.push(e[n-1]+e[n-2]),n++}for(var r="1",i=e.length-1;0<=i;i--){var o=e[i];o<=t?(r="1"+r,t-=o):r="0"+r}return r}},{key:"decode",value:function(t){if(!/^[0-1]*$/.test(t)||t.length<2||t.indexOf("11")!==t.length-2)throw new Z("Undecodable FibonacciInteger '"+t+"'");for(var e=0,n=[],r=0;r<t.length-1;r++)0===r?n.push(1):1===r?n.push(2):n.push(n[r-1]+n[r-2]);for(var i=0;i<t.length-1;i++)"1"===t.charAt(i)&&(e+=n[i]);return e}}]),t}(),ct=function(){function t(){c(this,t)}return a(t,null,[{key:"encode",value:function(t){if(!0===t)return"1";if(!1===t)return"0";throw new nt("Unencodable Boolean '"+t+"'")}},{key:"decode",value:function(t){if("1"===t)return!0;if("0"===t)return!1;throw new Z("Undecodable Boolean '"+t+"'")}}]),t}(),ut=function(){function t(){c(this,t)}return a(t,null,[{key:"encode",value:function(t){t=t.sort(function(t,e){return t-e});for(var e=[],n=0,r=0;r<t.length;){for(var i=r;i<t.length-1&&t[i]+1===t[i+1];)i++;e.push(t.slice(r,i+1)),r=i+1}for(var o=tt.encode(e.length,12),s=0;s<e.length;s++)if(1==e[s].length){var c=e[s][0]-n;n=e[s][0],o+="0"+st.encode(c)}else{var u=e[s][0]-n;n=e[s][0];var a=e[s][e[s].length-1]-n;n=e[s][e[s].length-1],o+="1"+st.encode(u)+st.encode(a)}return o}},{key:"decode",value:function(t){if(!/^[0-1]*$/.test(t)||t.length<12)throw new Z("Undecodable FibonacciIntegerRange '"+t+"'");for(var e=[],n=tt.decode(t.substring(0,12)),r=0,i=12,o=0;o<n;o++){var s=ct.decode(t.substring(i,i+1));if(i++,!0===s){var c=t.indexOf("11",i),u=st.decode(t.substring(i,c+2))+r;r=u,i=c+2,c=t.indexOf("11",i);var a=st.decode(t.substring(i,c+2))+r;r=a,i=c+2;for(var S=u;S<=a;S++)e.push(S)}else{var l=t.indexOf("11",i),E=st.decode(t.substring(i,l+2))+r;r=E,e.push(E),i=l+2}}return e}}]),t}(),at=function(){function e(t){c(this,e),S(this,"value",void 0),this.value=t}return a(e,[{key:"hasValue",value:function(){return void 0!==this.value&&null!==this.value}},{key:"getValue",value:function(){return this.value}},{key:"setValue",value:function(t){this.value=t}}]),e}();function St(r){return function(){var t,e=E(r);if(function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(t){return}}}()){var n=E(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return h(this,t)}}var lt=function(){l(n,at);var e=St(n);function n(t){return c(this,n),e.call(this,t)}return a(n,[{key:"encode",value:function(){return ut.encode(this.value)}},{key:"decode",value:function(t){this.value=ut.decode(t)}},{key:"substring",value:function(t,e){for(var n=tt.decode(t.substring(e,e+12)),r=e+12,i=0;i<n;i++)r="1"===t.charAt(r)?t.indexOf("11",t.indexOf("11",r+1)+2)+2:t.indexOf("11",r+1)+2;return t.substring(e,r)}}]),n}();function Et(r){return function(){var t,e=E(r);if(function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(t){return}}}()){var n=E(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return h(this,t)}}var ft,ht,pt=function(){l(i,at);var r=Et(i);function i(t,e){var n;return c(this,i),S(f(n=r.call(this,e)),"bitStringLength",void 0),n.bitStringLength=t,n}return a(i,[{key:"encode",value:function(){return tt.encode(this.value,this.bitStringLength)}},{key:"decode",value:function(t){this.value=tt.decode(t)}},{key:"substring",value:function(t,e){return t.substring(e,e+this.bitStringLength)}}]),i}();(ht=ft=ft||{}).ID="Id",ht.VERSION="Version",ht.SECTION_IDS="SectionIds";var dt=function(){function n(t,e){c(this,n),S(this,"fields",void 0),S(this,"fieldOrder",void 0),this.fields=t,this.fieldOrder=e}return a(n,[{key:"hasField",value:function(t){return this.fields.has(t)}},{key:"getFieldValue",value:function(t){return this.fields.has(t)?this.fields.get(t).getValue():null}},{key:"setFieldValue",value:function(t,e){if(!this.fields.has(t))throw new Error(t+" not found");this.fields.get(t).setValue(e)}},{key:"getFieldOrder",value:function(){return this.fieldOrder}},{key:"encodeToBitString",value:function(){for(var t="",e=0;e<this.fieldOrder.length;e++){var n=this.fieldOrder[e];if(!this.fields.has(n))throw new Error("Field not found: '"+n+"'");t+=this.fields.get(n).encode()}return t}},{key:"decodeFromBitString",value:function(t){for(var e=0,n=0;n<this.fieldOrder.length;n++){var r=this.fieldOrder[n];if(!this.fields.has(r))throw new Error("Field not found: '"+r+"'");var i=this.fields.get(r),o=i.substring(t,e);i.decode(o),e+=o.length}}},{key:"toObj",value:function(){for(var t={},e=0;e<this.fieldOrder.length;e++){var n=this.fieldOrder[e];if(this.fields.has(n)){var r=this.fields.get(n).getValue();t[n]=r}}return t}}]),n}();function _t(r){return function(){var t,e=E(r);if(function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(t){return}}}()){var n=E(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return h(this,t)}}var gt=function(){l(o,dt);var i=_t(o);function o(t){var e;c(this,o);var n=new Map;n.set(ft.ID.toString(),new pt(6,o.ID)),n.set(ft.VERSION.toString(),new pt(6,o.VERSION)),n.set(ft.SECTION_IDS.toString(),new lt([]));var r=[ft.ID.toString(),ft.VERSION.toString(),ft.SECTION_IDS.toString()];return S(f(e=i.call(this,n,r)),"base64UrlEncoder",new ot),t&&0<t.length&&e.decode(t),e}return a(o,[{key:"encode",value:function(){var t=this.encodeToBitString();return this.base64UrlEncoder.encode(t)}},{key:"decode",value:function(t){var e=this.base64UrlEncoder.decode(t);this.decodeFromBitString(e)}},{key:"getId",value:function(){return o.ID}},{key:"getName",value:function(){return o.NAME}}]),o}();function Tt(r){return function(){var t,e=E(r);if(function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(t){return}}}()){var n=E(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return h(this,t)}}S(gt,"ID",3),S(gt,"VERSION",1),S(gt,"NAME","header");var Ot=function(){l(n,at);var e=Tt(n);function n(t){return c(this,n),e.call(this,t)}return a(n,[{key:"encode",value:function(){return ct.encode(this.value)}},{key:"decode",value:function(t){this.value=ct.decode(t)}},{key:"substring",value:function(t,e){return t.substring(e,e+1)}}]),n}(),Nt=function(){function t(){c(this,t)}return a(t,null,[{key:"encode",value:function(t){return t?tt.encode(Math.round(t.getTime()/100),36):tt.encode(0,36)}},{key:"decode",value:function(t){if(!/^[0-1]*$/.test(t)||36!==t.length)throw new Z("Undecodable Datetime '"+t+"'");return new Date(100*tt.decode(t))}}]),t}();function It(r){return function(){var t,e=E(r);if(function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(t){return}}}()){var n=E(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return h(this,t)}}var vt=function(){l(n,at);var e=It(n);function n(t){return c(this,n),e.call(this,t)}return a(n,[{key:"encode",value:function(){return Nt.encode(this.value)}},{key:"decode",value:function(t){this.value=Nt.decode(t)}},{key:"substring",value:function(t,e){return t.substring(e,e+36)}}]),n}(),At=function(){function t(){c(this,t)}return a(t,null,[{key:"encode",value:function(t,e){for(var n="",r=0;r<t.length;r++)n+=ct.encode(t[r]);for(;n.length<e;)n+="0";return n}},{key:"decode",value:function(t){if(!/^[0-1]*$/.test(t))throw new Z("Undecodable FixedBitfield '"+t+"'");for(var e=[],n=0;n<t.length;n++)e.push(ct.decode(t.substring(n,n+1)));return e}}]),t}();function Rt(r){return function(){var t,e=E(r);if(function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(t){return}}}()){var n=E(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return h(this,t)}}var Ct=function(){l(i,at);var r=Rt(i);function i(t,e){var n;return c(this,i),S(f(n=r.call(this,e)),"getLength",void 0),n.getLength=t,n}return a(i,[{key:"encode",value:function(){return At.encode(this.value,this.getLength())}},{key:"decode",value:function(t){this.value=At.decode(t)}},{key:"substring",value:function(t,e){return t.substring(e,e+this.getLength())}}]),i}();function Pt(r){return function(){var t,e=E(r);if(function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(t){return}}}()){var n=E(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return h(this,t)}}var yt=function(){l(i,at);var r=Pt(i);function i(t,e){var n;return c(this,i),S(f(n=r.call(this,e)),"bitStringLength",void 0),n.bitStringLength=t,n}return a(i,[{key:"encode",value:function(){return At.encode(this.value,this.bitStringLength)}},{key:"decode",value:function(t){this.value=At.decode(t)}},{key:"substring",value:function(t,e){return t.substring(e,e+this.bitStringLength)}}]),i}(),Dt=function(){function t(){c(this,t)}return a(t,null,[{key:"encode",value:function(t,e){for(;t.length<e;)t+=" ";for(var n="",r=0;r<t.length;r++){var i=t.charCodeAt(r);if(32===i)n+=tt.encode(63,6);else{if(!(65<=i))throw new nt("Unencodable FixedString '"+t+"'");n+=tt.encode(t.charCodeAt(r)-65,6)}}return n}},{key:"decode",value:function(t){if(!/^[0-1]*$/.test(t)||t.length%6!=0)throw new Z("Undecodable FixedString '"+t+"'");for(var e="",n=0;n<t.length;n+=6){var r=tt.decode(t.substring(n,n+6));e+=63===r?" ":String.fromCharCode(r+65)}return e.trim()}}]),t}();function Vt(r){return function(){var t,e=E(r);if(function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(t){return}}}()){var n=E(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return h(this,t)}}var mt=function(){l(i,at);var r=Vt(i);function i(t,e){var n;return c(this,i),S(f(n=r.call(this,e)),"stringLength",void 0),n.stringLength=t,n}return a(i,[{key:"encode",value:function(){return Dt.encode(this.value,this.stringLength)}},{key:"decode",value:function(t){this.value=Dt.decode(t)}},{key:"substring",value:function(t,e){return t.substring(e,e+6*this.stringLength)}}]),i}(),Mt=function(){function n(t,e){c(this,n),S(this,"fields",void 0),S(this,"segments",void 0),this.fields=t,this.segments=e}return a(n,[{key:"hasField",value:function(t){return this.fields.has(t)}},{key:"getFieldValue",value:function(t){return this.fields.has(t)?this.fields.get(t).getValue():null}},{key:"setFieldValue",value:function(t,e){if(!this.fields.has(t))throw new Error(t+" not found");this.fields.get(t).setValue(e)}},{key:"getSegments",value:function(){return this.segments}},{key:"encodeSegmentsToBitStrings",value:function(){for(var t=[],e=0;e<this.segments.length;e++){for(var n="",r=0;r<this.segments[e].length;r++){var i=this.segments[e][r];if(!this.fields.has(i))throw new Error("Field not found: '"+i+"'");try{n+=this.fields.get(i).encode()}catch(t){throw new Error("Unable to encode "+i)}}t.push(n)}return t}},{key:"decodeSegmentsFromBitStrings",value:function(t){for(var e=0;e<this.segments.length&&e<t.length;e++){var n=t[e];if(n&&0<n.length)for(var r=0,i=0;i<this.segments[e].length;i++){var o=this.segments[e][i];if(!this.fields.has(o))throw new Error("Field not found: '"+o+"'");try{var s=this.fields.get(o),c=s.substring(n,r);s.decode(c),r+=c.length}catch(t){throw new Error("Unable to decode "+o)}}}}},{key:"toObj",value:function(){for(var t={},e=0;e<this.segments.length;e++)for(var n=0;n<this.segments[e].length;n++){var r=this.segments[e][n];if(this.fields.has(r)){var i=this.fields.get(r).getValue();t[r]=i}}return t}}]),n}(),wt=function(){function t(){c(this,t)}return a(t,null,[{key:"encode",value:function(t){t.sort(function(t,e){return t-e});for(var e=[],n=0;n<t.length;){for(var r=n;r<t.length-1&&t[r]+1===t[r+1];)r++;e.push(t.slice(n,r+1)),n=r+1}for(var i=tt.encode(e.length,12),o=0;o<e.length;o++)1===e[o].length?i+="0"+tt.encode(e[o][0],16):i+="1"+tt.encode(e[o][0],16)+tt.encode(e[o][e[o].length-1],16);return i}},{key:"decode",value:function(t){if(!/^[0-1]*$/.test(t)||t.length<12)throw new Z("Undecodable FixedIntegerRange '"+t+"'");for(var e=[],n=tt.decode(t.substring(0,12)),r=12,i=0;i<n;i++){var o=ct.decode(t.substring(r,r+1));if(r++,!0===o){var s=tt.decode(t.substring(r,r+16));r+=16;var c=tt.decode(t.substring(r,r+16));r+=16;for(var u=s;u<=c;u++)e.push(u)}else{var a=tt.decode(t.substring(r,r+16));e.push(a),r+=16}}return e}}]),t}();function Ut(r){return function(){var t,e=E(r);if(function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(t){return}}}()){var n=E(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return h(this,t)}}var bt=function(){l(n,at);var e=Ut(n);function n(t){return c(this,n),e.call(this,t)}return a(n,[{key:"encode",value:function(){return wt.encode(this.value)}},{key:"decode",value:function(t){this.value=wt.decode(t)}},{key:"substring",value:function(t,e){for(var n=tt.decode(t.substring(e,e+12)),r=e+12,i=0;i<n;i++)"1"===t.charAt(r)?r+=33:r+=17;return t.substring(e,r)}}]),n}();function kt(r){return function(){var t,e=E(r);if(function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(t){return}}}()){var n=E(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return h(this,t)}}var Lt,Gt,xt=function(){l(n,at);var e=kt(n);function n(t){return c(this,n),e.call(this,t)}return a(n,[{key:"encode",value:function(){var t=0<this.value.length?this.value[this.value.length-1]:0,e=wt.encode(this.value),n=t;if(e.length<=n)return tt.encode(t,16)+"1"+e;for(var r=[],i=0,o=0;o<t;o++)o===this.value[i]-1?(r[o]=!0,i++):r[o]=!1;return tt.encode(t,16)+"0"+At.encode(r,n)}},{key:"decode",value:function(t){if("1"===t.charAt(16))this.value=wt.decode(t.substring(17));else{for(var e=[],n=At.decode(t.substring(17)),r=0;r<n.length;r++)!0===n[r]&&e.push(r+1);this.value=e}}},{key:"substring",value:function(t,e){var n=tt.decode(t.substring(e,e+16));return"1"===t.charAt(e+16)?t.substring(e,e+17)+(new bt).substring(t,e+17):t.substring(e,e+17+n)}}]),n}();function Ft(r){return function(){var t,e=E(r);if(function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(t){return}}}()){var n=E(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return h(this,t)}}(Gt=Lt=Lt||{}).VERSION="Version",Gt.CREATED="Created",Gt.LAST_UPDATED="LastUpdated",Gt.CMP_ID="CmpId",Gt.CMP_VERSION="CmpVersion",Gt.CONSENT_SCREEN="ConsentScreen",Gt.CONSENT_LANGUAGE="ConsentLanguage",Gt.VENDOR_LIST_VERSION="VendorListVersion",Gt.POLICY_VERSION="PolicyVersion",Gt.IS_SERVICE_SPECIFIC="IsServiceSpecific",Gt.USE_NON_STANDARD_STACKS="UseNonStandardStacks",Gt.SPECIAL_FEATURE_OPTINS="SpecialFeatureOptins",Gt.PURPOSE_CONSENTS="PurposeConsents",Gt.PURPOSE_LEGITIMATE_INTERESTS="PurposeLegitimateInterests",Gt.PURPOSE_ONE_TREATMENT="PurposeOneTreatment",Gt.PUBLISHER_COUNTRY_CODE="PublisherCountryCode",Gt.VENDOR_CONSENTS="VendorConsents",Gt.VENDOR_LEGITIMATE_INTERESTS="VendorLegitimateInterests",Gt.PUBLISHER_RESTRICTIONS="PublisherRestrictions",Gt.PUBLISHER_PURPOSES_SEGMENT_TYPE="PublisherPurposesSegmentType",Gt.PUBLISHER_CONSENTS="PublisherConsents",Gt.PUBLISHER_LEGITIMATE_INTERESTS="PublisherLegitimateInterests",Gt.NUM_CUSTOM_PURPOSES="NumCustomPurposes",Gt.PUBLISHER_CUSTOM_CONSENTS="PublisherCustomConsents",Gt.PUBLISHER_CUSTOM_LEGITIMATE_INTERESTS="PublisherCustomLegitimateInterests",Gt.VENDORS_ALLOWED_SEGMENT_TYPE="VendorsAllowedSegmentType",Gt.VENDORS_ALLOWED="VendorsAllowed",Gt.VENDORS_DISCLOSED_SEGMENT_TYPE="VendorsDisclosedSegmentType",Gt.VENDORS_DISCLOSED="VendorsDisclosed";var Bt=function(){l(e,rt);var t=Ft(e);function e(){return c(this,e),t.apply(this,arguments)}return a(e,[{key:"pad",value:function(t){for(;0<t.length%24;)t+="0";return t}}]),e}();function Ht(r){return function(){var t,e=E(r);if(function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(t){return}}}()){var n=E(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return h(this,t)}}var jt,Yt,Kt=function(){l(s,Mt);var o=Ht(s);function s(t){var e;c(this,s);var n=new Map;n.set(Lt.VERSION.toString(),new pt(6,s.VERSION)),n.set(Lt.CREATED.toString(),new vt),n.set(Lt.LAST_UPDATED.toString(),new vt),n.set(Lt.CMP_ID.toString(),new pt(12,0)),n.set(Lt.CMP_VERSION.toString(),new pt(12,0)),n.set(Lt.CONSENT_SCREEN.toString(),new pt(6,0)),n.set(Lt.CONSENT_LANGUAGE.toString(),new mt(2,"EN")),n.set(Lt.VENDOR_LIST_VERSION.toString(),new pt(12,0)),n.set(Lt.POLICY_VERSION.toString(),new pt(6,2)),n.set(Lt.IS_SERVICE_SPECIFIC.toString(),new Ot(!1)),n.set(Lt.USE_NON_STANDARD_STACKS.toString(),new Ot(!1)),n.set(Lt.SPECIAL_FEATURE_OPTINS.toString(),new yt(12,[])),n.set(Lt.PURPOSE_CONSENTS.toString(),new yt(24,[])),n.set(Lt.PURPOSE_LEGITIMATE_INTERESTS.toString(),new yt(24,[])),n.set(Lt.PURPOSE_ONE_TREATMENT.toString(),new Ot(!1)),n.set(Lt.PUBLISHER_COUNTRY_CODE.toString(),new mt(2,"AA")),n.set(Lt.VENDOR_CONSENTS.toString(),new xt([])),n.set(Lt.VENDOR_LEGITIMATE_INTERESTS.toString(),new xt([])),n.set(Lt.PUBLISHER_RESTRICTIONS.toString(),new bt([])),n.set(Lt.PUBLISHER_PURPOSES_SEGMENT_TYPE.toString(),new pt(3,3)),n.set(Lt.PUBLISHER_CONSENTS.toString(),new yt(24,[])),n.set(Lt.PUBLISHER_LEGITIMATE_INTERESTS.toString(),new yt(24,[]));var r=new pt(6,0);n.set(Lt.NUM_CUSTOM_PURPOSES.toString(),r),n.set(Lt.PUBLISHER_CUSTOM_CONSENTS.toString(),new Ct(function(){return r.getValue()},[])),n.set(Lt.PUBLISHER_CUSTOM_LEGITIMATE_INTERESTS.toString(),new Ct(function(){return r.getValue()},[])),n.set(Lt.VENDORS_ALLOWED_SEGMENT_TYPE.toString(),new pt(3,2)),n.set(Lt.VENDORS_ALLOWED.toString(),new xt([])),n.set(Lt.VENDORS_DISCLOSED_SEGMENT_TYPE.toString(),new pt(3,1)),n.set(Lt.VENDORS_DISCLOSED.toString(),new xt([]));var i=[[Lt.VERSION.toString(),Lt.CREATED.toString(),Lt.LAST_UPDATED.toString(),Lt.CMP_ID.toString(),Lt.CMP_VERSION.toString(),Lt.CONSENT_SCREEN.toString(),Lt.CONSENT_LANGUAGE.toString(),Lt.VENDOR_LIST_VERSION.toString(),Lt.POLICY_VERSION.toString(),Lt.IS_SERVICE_SPECIFIC.toString(),Lt.USE_NON_STANDARD_STACKS.toString(),Lt.SPECIAL_FEATURE_OPTINS.toString(),Lt.PURPOSE_CONSENTS.toString(),Lt.PURPOSE_LEGITIMATE_INTERESTS.toString(),Lt.PURPOSE_ONE_TREATMENT.toString(),Lt.PUBLISHER_COUNTRY_CODE.toString(),Lt.VENDOR_CONSENTS.toString(),Lt.VENDOR_LEGITIMATE_INTERESTS.toString(),Lt.PUBLISHER_RESTRICTIONS.toString()],[Lt.PUBLISHER_PURPOSES_SEGMENT_TYPE.toString(),Lt.PUBLISHER_CONSENTS.toString(),Lt.PUBLISHER_LEGITIMATE_INTERESTS.toString(),Lt.NUM_CUSTOM_PURPOSES.toString(),Lt.PUBLISHER_CUSTOM_CONSENTS.toString(),Lt.PUBLISHER_CUSTOM_LEGITIMATE_INTERESTS.toString()],[Lt.VENDORS_ALLOWED_SEGMENT_TYPE.toString(),Lt.VENDORS_ALLOWED.toString()],[Lt.VENDORS_DISCLOSED_SEGMENT_TYPE.toString(),Lt.VENDORS_DISCLOSED.toString()]];return S(f(e=o.call(this,n,i)),"base64UrlEncoder",new Bt),t&&0<t.length&&e.decode(t),e}return a(s,[{key:"encode",value:function(){var t=this.encodeSegmentsToBitStrings(),e=[];return e.push(this.base64UrlEncoder.encode(t[0])),this.getFieldValue(Lt.IS_SERVICE_SPECIFIC.toString())?t[1]&&0<t[1].length&&e.push(this.base64UrlEncoder.encode(t[1])):(t[2]&&0<t[2].length&&e.push(this.base64UrlEncoder.encode(t[2])),t[3]&&0<t[3].length&&e.push(this.base64UrlEncoder.encode(t[3]))),e.join(".")}},{key:"decode",value:function(t){for(var e=t.split("."),n=[],r=0;r<e.length;r++){var i=this.base64UrlEncoder.decode(e[r]);switch(i.substring(0,3)){case"000":n[0]=i;break;case"001":n[3]=i;break;case"010":n[2]=i;break;case"011":n[1]=i;break;default:throw new Z("Unable to decode segment '"+e[r]+"'")}}this.decodeSegmentsFromBitStrings(n)}},{key:"setFieldValue",value:function(t,e){if(p(E(s.prototype),"setFieldValue",this).call(this,t,e),t!==Lt.CREATED.toString()&&t!==Lt.LAST_UPDATED.toString()){var n=new Date,r=new Date(Date.UTC(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()));this.setFieldValue(Lt.CREATED.toString(),r),this.setFieldValue(Lt.LAST_UPDATED.toString(),r)}}},{key:"getId",value:function(){return s.ID}},{key:"getName",value:function(){return s.NAME}}]),s}();function Wt(r){return function(){var t,e=E(r);if(function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(t){return}}}()){var n=E(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return h(this,t)}}S(Kt,"ID",2),S(Kt,"VERSION",2),S(Kt,"NAME","tcfeuv2"),(Yt=jt=jt||{}).VERSION="Version",Yt.CREATED="Created",Yt.LAST_UPDATED="LastUpdated",Yt.CMP_ID="CmpId",Yt.CMP_VERSION="CmpVersion",Yt.CONSENT_SCREEN="ConsentScreen",Yt.CONSENT_LANGUAGE="ConsentLanguage",Yt.VENDOR_LIST_VERSION="VendorListVersion",Yt.TCF_POLICY_VERSION="TcfPolicyVersion",Yt.USE_NON_STANDARD_STACKS="UseNonStandardStacks",Yt.SPECIAL_FEATURE_EXPRESS_CONSENT="SpecialFeatureExpressConsent",Yt.PURPOSES_EXPRESS_CONSENT="PurposesExpressConsent",Yt.PURPOSES_IMPLIED_CONSENT="PurposesImpliedConsent",Yt.VENDOR_EXPRESS_CONSENT="VendorExpressConsent",Yt.VENDOR_IMPLIED_CONSENT="VendorImpliedConsent",Yt.SEGMENT_TYPE="SegmentType",Yt.PUB_PURPOSES_EXPRESS_CONSENT="PubPurposesExpressConsent",Yt.PUB_PURPOSES_IMPLIED_CONSENT="PubPurposesImpliedConsent",Yt.NUM_CUSTOM_PURPOSES="NumCustomPurposes",Yt.CUSTOM_PURPOSES_EXPRESS_CONSENT="CustomPurposesExpressConsent",Yt.CUSTOM_PURPOSES_IMPLIED_CONSENT="CustomPurposesImpliedConsent";var Qt,Xt,qt=function(){l(s,Mt);var o=Wt(s);function s(t){var e;c(this,s);var n=new Map;n.set(jt.VERSION.toString(),new pt(6,s.VERSION)),n.set(jt.CREATED.toString(),new vt),n.set(jt.LAST_UPDATED.toString(),new vt),n.set(jt.CMP_ID.toString(),new pt(12,0)),n.set(jt.CMP_VERSION.toString(),new pt(12,0)),n.set(jt.CONSENT_SCREEN.toString(),new pt(6,0)),n.set(jt.CONSENT_LANGUAGE.toString(),new mt(2,"EN")),n.set(jt.VENDOR_LIST_VERSION.toString(),new pt(12,0)),n.set(jt.TCF_POLICY_VERSION.toString(),new pt(6,2)),n.set(jt.USE_NON_STANDARD_STACKS.toString(),new Ot(!1)),n.set(jt.SPECIAL_FEATURE_EXPRESS_CONSENT.toString(),new yt(12,[])),n.set(jt.PURPOSES_EXPRESS_CONSENT.toString(),new yt(24,[])),n.set(jt.PURPOSES_IMPLIED_CONSENT.toString(),new yt(24,[])),n.set(jt.VENDOR_EXPRESS_CONSENT.toString(),new xt([])),n.set(jt.VENDOR_IMPLIED_CONSENT.toString(),new xt([])),n.set(jt.SEGMENT_TYPE.toString(),new pt(3,3)),n.set(jt.PUB_PURPOSES_EXPRESS_CONSENT.toString(),new yt(24,[])),n.set(jt.PUB_PURPOSES_IMPLIED_CONSENT.toString(),new yt(24,[]));var r=new pt(6,0);n.set(jt.NUM_CUSTOM_PURPOSES.toString(),r),n.set(jt.CUSTOM_PURPOSES_EXPRESS_CONSENT.toString(),new Ct(function(){return r.getValue()},[])),n.set(jt.CUSTOM_PURPOSES_IMPLIED_CONSENT.toString(),new Ct(function(){return r.getValue()},[]));var i=[[jt.VERSION.toString(),jt.CREATED.toString(),jt.LAST_UPDATED.toString(),jt.CMP_ID.toString(),jt.CMP_VERSION.toString(),jt.CONSENT_SCREEN.toString(),jt.CONSENT_LANGUAGE.toString(),jt.VENDOR_LIST_VERSION.toString(),jt.TCF_POLICY_VERSION.toString(),jt.USE_NON_STANDARD_STACKS.toString(),jt.SPECIAL_FEATURE_EXPRESS_CONSENT.toString(),jt.PURPOSES_EXPRESS_CONSENT.toString(),jt.PURPOSES_IMPLIED_CONSENT.toString(),jt.VENDOR_EXPRESS_CONSENT.toString(),jt.VENDOR_IMPLIED_CONSENT.toString()],[jt.SEGMENT_TYPE.toString(),jt.PUB_PURPOSES_EXPRESS_CONSENT.toString(),jt.PUB_PURPOSES_IMPLIED_CONSENT.toString(),jt.NUM_CUSTOM_PURPOSES.toString(),jt.CUSTOM_PURPOSES_EXPRESS_CONSENT.toString(),jt.CUSTOM_PURPOSES_IMPLIED_CONSENT.toString()]];return S(f(e=o.call(this,n,i)),"base64UrlEncoder",new ot),t&&0<t.length&&e.decode(t),e}return a(s,[{key:"encode",value:function(){var t=this.encodeSegmentsToBitStrings(),e=[];return e.push(this.base64UrlEncoder.encode(t[0])),t[1]&&0<t[1].length&&e.push(this.base64UrlEncoder.encode(t[1])),e.join(".")}},{key:"decode",value:function(t){for(var e=t.split("."),n=[],r=0;r<e.length;r++){var i=this.base64UrlEncoder.decode(e[r]);switch(i.substring(0,3)){case"000":n[0]=i;break;case"011":n[1]=i;break;default:throw new Z("Unable to decode segment '"+e[r]+"'")}}this.decodeSegmentsFromBitStrings(n)}},{key:"setFieldValue",value:function(t,e){if(p(E(s.prototype),"setFieldValue",this).call(this,t,e),t!==jt.CREATED.toString()&&t!==jt.LAST_UPDATED.toString()){var n=new Date,r=new Date(Date.UTC(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()));this.setFieldValue(jt.CREATED.toString(),r),this.setFieldValue(jt.LAST_UPDATED.toString(),r)}}},{key:"getId",value:function(){return s.ID}},{key:"getName",value:function(){return s.NAME}}]),s}();S(qt,"ID",5),S(qt,"VERSION",2),S(qt,"NAME","tcfcav1"),(Xt=Qt=Qt||{}).VERSION="Version",Xt.NOTICE="Notice",Xt.OPT_OUT_SALE="OptOutSale",Xt.LSPA_COVERED="LspaCovered";var $t=function(){function e(t){c(this,e),S(this,"fields",void 0),this.fields=new Map,this.fields.set(Qt.VERSION.toString(),e.VERSION),this.fields.set(Qt.NOTICE.toString(),"-"),this.fields.set(Qt.OPT_OUT_SALE.toString(),"-"),this.fields.set(Qt.LSPA_COVERED.toString(),"-"),t&&0<t.length&&this.decode(t)}return a(e,[{key:"hasField",value:function(t){return this.fields.has(t)}},{key:"getFieldValue",value:function(t){return this.fields.has(t)?this.fields.get(t):null}},{key:"setFieldValue",value:function(t,e){if(!this.fields.has(t))throw new Error(t+" not found");this.fields.set(t,e)}},{key:"toObj",value:function(){var t={},e=!0,n=!1,r=void 0;try{for(var i,o=this.fields.keys()[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var s=i.value,c=this.fields.get(s);t[s.toString()]=c}}catch(t){n=!0,r=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}return t}},{key:"encode",value:function(){var t="";return t+=this.getFieldValue(Qt.VERSION.toString()),t+=this.getFieldValue(Qt.NOTICE.toString()),t+=this.getFieldValue(Qt.OPT_OUT_SALE.toString()),t+=this.getFieldValue(Qt.LSPA_COVERED.toString())}},{key:"decode",value:function(t){this.setFieldValue(Qt.VERSION.toString(),parseInt(t.charAt(0))),this.setFieldValue(Qt.NOTICE.toString(),t.charAt(1)),this.setFieldValue(Qt.OPT_OUT_SALE.toString(),t.charAt(2)),this.setFieldValue(Qt.LSPA_COVERED.toString(),t.charAt(3))}},{key:"getId",value:function(){return e.ID}},{key:"getName",value:function(){return e.NAME}}]),e}();S($t,"ID",6),S($t,"VERSION",1),S($t,"NAME","uspv1");var Jt=function(){function t(){c(this,t)}return a(t,null,[{key:"encode",value:function(t,e,n){for(var r="",i=0;i<t.length;i++)r+=tt.encode(t[i],e);for(;r.length<e*n;)r+="0";return r}},{key:"decode",value:function(t,e,n){if(!/^[0-1]*$/.test(t))throw new Z("Undecodable FixedInteger '"+t+"'");if(t.length>e*n)throw new Z("Undecodable FixedIntegerList '"+t+"'");if(t.length%e!=0)throw new Z("Undecodable FixedIntegerList '"+t+"'");for(;t.length<e*n;)t+="0";t.length>e*n&&(t=t.substring(0,e*n));for(var r=[],i=0;i<t.length;i+=e)r.push(tt.decode(t.substring(i,i+e)));for(;r.length<n;)r.push(0);return r}}]),t}();function zt(r){return function(){var t,e=E(r);if(function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(t){return}}}()){var n=E(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return h(this,t)}}var Zt,te,ee=function(){l(o,at);var i=zt(o);function o(t,e,n){var r;return c(this,o),S(f(r=i.call(this,n)),"elementBitStringLength",void 0),S(f(r),"numElements",void 0),r.elementBitStringLength=t,r.numElements=e,r}return a(o,[{key:"encode",value:function(){return Jt.encode(this.value,this.elementBitStringLength,this.numElements)}},{key:"decode",value:function(t){this.value=Jt.decode(t,this.elementBitStringLength,this.numElements)}},{key:"substring",value:function(t,e){return t.substring(e,e+this.elementBitStringLength*this.numElements)}}]),o}();function ne(r){return function(){var t,e=E(r);if(function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(t){return}}}()){var n=E(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return h(this,t)}}(te=Zt=Zt||{}).VERSION="Version",te.SHARING_NOTICE="SharingNotice",te.SALE_OPT_OUT_NOTICE="SaleOptOutNotice",te.SHARING_OPT_OUT_NOTICE="SharingOptOutNotice",te.TARGETED_ADVERTISING_OPT_OUT_NOTICE="TargetedAdvertisingOptOutNotice",te.SENSITIVE_DATA_PROCESSING_OPT_OUT_NOTICE="SensitiveDataProcessingOptOutNotice",te.SENSITIVE_DATA_LIMIT_USE_NOTICE="SensitiveDataLimitUseNotice",te.SALE_OPT_OUT="SaleOptOut",te.SHARING_OPT_OUT="SharingOptOut",te.TARGETED_ADVERTISING_OPT_OUT="TargetedAdvertisingOptOut",te.SENSITIVE_DATA_PROCESSING="SensitiveDataProcessing",te.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS="KnownChildSensitiveDataConsents",te.PERSONAL_DATA_CONSENTS="PersonalDataConsents",te.MSPA_COVERED_TRANSACTION="MspaCoveredTransaction",te.MSPA_OPT_OUT_OPTION_MODE="MspaOptOutOptionMode",te.MSPA_SERVICE_PROVIDER_MODE="MspaServiceProviderMode",te.GPC_SEGMENT_TYPE="GpcSegmentType",te.GPC_SEGMENT_INCLUDED="GpcSegmentIncluded",te.GPC="Gpc";var re,ie,oe=function(){l(o,Mt);var i=ne(o);function o(t){var e;c(this,o);var n=new Map;n.set(Zt.VERSION.toString(),new pt(6,o.VERSION)),n.set(Zt.SHARING_NOTICE.toString(),new pt(2,0)),n.set(Zt.SALE_OPT_OUT_NOTICE.toString(),new pt(2,0)),n.set(Zt.SHARING_OPT_OUT_NOTICE.toString(),new pt(2,0)),n.set(Zt.TARGETED_ADVERTISING_OPT_OUT_NOTICE.toString(),new pt(2,0)),n.set(Zt.SENSITIVE_DATA_PROCESSING_OPT_OUT_NOTICE.toString(),new pt(2,0)),n.set(Zt.SENSITIVE_DATA_LIMIT_USE_NOTICE.toString(),new pt(2,0)),n.set(Zt.SALE_OPT_OUT.toString(),new pt(2,0)),n.set(Zt.SHARING_OPT_OUT.toString(),new pt(2,0)),n.set(Zt.TARGETED_ADVERTISING_OPT_OUT.toString(),new pt(2,0)),n.set(Zt.SENSITIVE_DATA_PROCESSING.toString(),new ee(2,12,[0,0,0,0,0,0,0,0,0,0,0,0])),n.set(Zt.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS.toString(),new ee(2,2,[0,0])),n.set(Zt.PERSONAL_DATA_CONSENTS.toString(),new pt(2,0)),n.set(Zt.MSPA_COVERED_TRANSACTION.toString(),new pt(2,0)),n.set(Zt.MSPA_OPT_OUT_OPTION_MODE.toString(),new pt(2,0)),n.set(Zt.MSPA_SERVICE_PROVIDER_MODE.toString(),new pt(2,0)),n.set(Zt.GPC_SEGMENT_TYPE.toString(),new pt(2,1)),n.set(Zt.GPC_SEGMENT_INCLUDED.toString(),new Ot(!0)),n.set(Zt.GPC.toString(),new Ot(!1));var r=[[Zt.VERSION.toString(),Zt.SHARING_NOTICE.toString(),Zt.SALE_OPT_OUT_NOTICE.toString(),Zt.SHARING_OPT_OUT_NOTICE.toString(),Zt.TARGETED_ADVERTISING_OPT_OUT_NOTICE.toString(),Zt.SENSITIVE_DATA_PROCESSING_OPT_OUT_NOTICE.toString(),Zt.SENSITIVE_DATA_LIMIT_USE_NOTICE.toString(),Zt.SALE_OPT_OUT.toString(),Zt.SHARING_OPT_OUT.toString(),Zt.TARGETED_ADVERTISING_OPT_OUT.toString(),Zt.SENSITIVE_DATA_PROCESSING.toString(),Zt.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS.toString(),Zt.PERSONAL_DATA_CONSENTS.toString(),Zt.MSPA_COVERED_TRANSACTION.toString(),Zt.MSPA_OPT_OUT_OPTION_MODE.toString(),Zt.MSPA_SERVICE_PROVIDER_MODE.toString()],[Zt.GPC_SEGMENT_TYPE.toString(),Zt.GPC.toString()]];return S(f(e=i.call(this,n,r)),"base64UrlEncoder",new ot),t&&0<t.length&&e.decode(t),e}return a(o,[{key:"encode",value:function(){var t=this.encodeSegmentsToBitStrings(),e=[];e.push(this.base64UrlEncoder.encode(t[0])),t[1]&&0<t[1].length&&(!0===this.fields.get(Zt.GPC_SEGMENT_INCLUDED).getValue()&&e.push(this.base64UrlEncoder.encode(t[1])));return e.join(".")}},{key:"decode",value:function(t){for(var e=t.split("."),n=[],r=!1,i=0;i<e.length;i++){var o=this.base64UrlEncoder.decode(e[i]);switch(o.substring(0,2)){case"00":n[0]=o;break;case"01":r=!0,n[1]=o;break;default:throw new Z("Unable to decode segment '"+e[i]+"'")}}this.decodeSegmentsFromBitStrings(n),this.fields.get(Zt.GPC_SEGMENT_INCLUDED).setValue(r)}},{key:"getId",value:function(){return o.ID}},{key:"getName",value:function(){return o.NAME}}]),o}();function se(r){return function(){var t,e=E(r);if(function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(t){return}}}()){var n=E(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return h(this,t)}}S(oe,"ID",7),S(oe,"VERSION",1),S(oe,"NAME","uspnatv1"),(ie=re=re||{}).VERSION="Version",ie.SALE_OPT_OUT_NOTICE="SaleOptOutNotice",ie.SHARING_OPT_OUT_NOTICE="SharingOptOutNotice",ie.SENSITIVE_DATA_LIMIT_USE_NOTICE="SensitiveDataLimitUseNotice",ie.SALE_OPT_OUT="SaleOptOut",ie.SHARING_OPT_OUT="SharingOptOut",ie.SENSITIVE_DATA_PROCESSING="SensitiveDataProcessing",ie.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS="KnownChildSensitiveDataConsents",ie.PERSONAL_DATA_CONSENTS="PersonalDataConsents",ie.MSPA_COVERED_TRANSACTION="MspaCoveredTransaction",ie.MSPA_OPT_OUT_OPTION_MODE="MspaOptOutOptionMode",ie.MSPA_SERVICE_PROVIDER_MODE="MspaServiceProviderMode",ie.GPC_SEGMENT_TYPE="GpcSegmentType",ie.GPC_SEGMENT_INCLUDED="GpcSegmentIncluded",ie.GPC="Gpc";var ce,ue,ae=function(){l(o,Mt);var i=se(o);function o(t){var e;c(this,o);var n=new Map;n.set(re.VERSION.toString(),new pt(6,o.VERSION)),n.set(re.SALE_OPT_OUT_NOTICE.toString(),new pt(2,0)),n.set(re.SHARING_OPT_OUT_NOTICE.toString(),new pt(2,0)),n.set(re.SENSITIVE_DATA_LIMIT_USE_NOTICE.toString(),new pt(2,0)),n.set(re.SALE_OPT_OUT.toString(),new pt(2,0)),n.set(re.SHARING_OPT_OUT.toString(),new pt(2,0)),n.set(re.SENSITIVE_DATA_PROCESSING.toString(),new ee(2,9,[0,0,0,0,0,0,0,0,0])),n.set(re.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS.toString(),new ee(2,2,[0,0])),n.set(re.PERSONAL_DATA_CONSENTS.toString(),new pt(2,0)),n.set(re.MSPA_COVERED_TRANSACTION.toString(),new pt(2,0)),n.set(re.MSPA_OPT_OUT_OPTION_MODE.toString(),new pt(2,0)),n.set(re.MSPA_SERVICE_PROVIDER_MODE.toString(),new pt(2,0)),n.set(re.GPC_SEGMENT_TYPE.toString(),new pt(2,1)),n.set(re.GPC_SEGMENT_INCLUDED.toString(),new Ot(!0)),n.set(re.GPC.toString(),new Ot(!1));var r=[[re.VERSION.toString(),re.SALE_OPT_OUT_NOTICE.toString(),re.SHARING_OPT_OUT_NOTICE.toString(),re.SENSITIVE_DATA_LIMIT_USE_NOTICE.toString(),re.SALE_OPT_OUT.toString(),re.SHARING_OPT_OUT.toString(),re.SENSITIVE_DATA_PROCESSING.toString(),re.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS.toString(),re.PERSONAL_DATA_CONSENTS.toString(),re.MSPA_COVERED_TRANSACTION.toString(),re.MSPA_OPT_OUT_OPTION_MODE.toString(),re.MSPA_SERVICE_PROVIDER_MODE.toString()],[re.GPC_SEGMENT_TYPE.toString(),re.GPC.toString()]];return S(f(e=i.call(this,n,r)),"base64UrlEncoder",new ot),t&&0<t.length&&e.decode(t),e}return a(o,[{key:"encode",value:function(){var t=this.encodeSegmentsToBitStrings(),e=[];e.push(this.base64UrlEncoder.encode(t[0])),t[1]&&0<t[1].length&&(!0===this.fields.get(re.GPC_SEGMENT_INCLUDED).getValue()&&e.push(this.base64UrlEncoder.encode(t[1])));return e.join(".")}},{key:"decode",value:function(t){for(var e=t.split("."),n=[],r=!1,i=0;i<e.length;i++){var o=this.base64UrlEncoder.decode(e[i]);switch(o.substring(0,2)){case"00":n[0]=o;break;case"01":r=!0,n[1]=o;break;default:throw new Z("Unable to decode segment '"+e[i]+"'")}}this.decodeSegmentsFromBitStrings(n),this.fields.get(re.GPC_SEGMENT_INCLUDED).setValue(r)}},{key:"getId",value:function(){return o.ID}},{key:"getName",value:function(){return o.NAME}}]),o}();function Se(r){return function(){var t,e=E(r);if(function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(t){return}}}()){var n=E(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return h(this,t)}}S(ae,"ID",8),S(ae,"VERSION",1),S(ae,"NAME","uspcav1"),(ue=ce=ce||{}).VERSION="Version",ue.SHARING_NOTICE="SharingNotice",ue.SALE_OPT_OUT_NOTICE="SaleOptOutNotice",ue.TARGETED_ADVERTISING_OPT_OUT_NOTICE="TargetedAdvertisingOptOutNotice",ue.SALE_OPT_OUT="SaleOptOut",ue.TARGETED_ADVERTISING_OPT_OUT="TargetedAdvertisingOptOut",ue.SENSITIVE_DATA_PROCESSING="SensitiveDataProcessing",ue.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS="KnownChildSensitiveDataConsents",ue.MSPA_COVERED_TRANSACTION="MspaCoveredTransaction",ue.MSPA_OPT_OUT_OPTION_MODE="MspaOptOutOptionMode",ue.MSPA_SERVICE_PROVIDER_MODE="MspaServiceProviderMode";var le,Ee,fe=function(){l(o,dt);var i=Se(o);function o(t){var e;c(this,o);var n=new Map;n.set(ce.VERSION.toString(),new pt(6,o.VERSION)),n.set(ce.SHARING_NOTICE.toString(),new pt(2,0)),n.set(ce.SALE_OPT_OUT_NOTICE.toString(),new pt(2,0)),n.set(ce.TARGETED_ADVERTISING_OPT_OUT_NOTICE.toString(),new pt(2,0)),n.set(ce.SALE_OPT_OUT.toString(),new pt(2,0)),n.set(ce.TARGETED_ADVERTISING_OPT_OUT.toString(),new pt(2,0)),n.set(ce.SENSITIVE_DATA_PROCESSING.toString(),new ee(2,8,[0,0,0,0,0,0,0,0])),n.set(ce.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS.toString(),new pt(2,0)),n.set(ce.MSPA_COVERED_TRANSACTION.toString(),new pt(2,0)),n.set(ce.MSPA_OPT_OUT_OPTION_MODE.toString(),new pt(2,0)),n.set(ce.MSPA_SERVICE_PROVIDER_MODE.toString(),new pt(2,0));var r=[ce.VERSION.toString(),ce.SHARING_NOTICE.toString(),ce.SALE_OPT_OUT_NOTICE.toString(),ce.TARGETED_ADVERTISING_OPT_OUT_NOTICE.toString(),ce.SALE_OPT_OUT.toString(),ce.TARGETED_ADVERTISING_OPT_OUT.toString(),ce.SENSITIVE_DATA_PROCESSING.toString(),ce.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS.toString(),ce.MSPA_COVERED_TRANSACTION.toString(),ce.MSPA_OPT_OUT_OPTION_MODE.toString(),ce.MSPA_SERVICE_PROVIDER_MODE.toString()];return S(f(e=i.call(this,n,r)),"base64UrlEncoder",new ot),t&&0<t.length&&e.decode(t),e}return a(o,[{key:"encode",value:function(){return this.base64UrlEncoder.encode(this.encodeToBitString())}},{key:"decode",value:function(t){this.decodeFromBitString(this.base64UrlEncoder.decode(t))}},{key:"getId",value:function(){return o.ID}},{key:"getName",value:function(){return o.NAME}}]),o}();function he(r){return function(){var t,e=E(r);if(function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(t){return}}}()){var n=E(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return h(this,t)}}S(fe,"ID",9),S(fe,"VERSION",1),S(fe,"NAME","uspvav1"),(Ee=le=le||{}).VERSION="Version",Ee.SHARING_NOTICE="SharingNotice",Ee.SALE_OPT_OUT_NOTICE="SaleOptOutNotice",Ee.TARGETED_ADVERTISING_OPT_OUT_NOTICE="TargetedAdvertisingOptOutNotice",Ee.SALE_OPT_OUT="SaleOptOut",Ee.TARGETED_ADVERTISING_OPT_OUT="TargetedAdvertisingOptOut",Ee.SENSITIVE_DATA_PROCESSING="SensitiveDataProcessing",Ee.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS="KnownChildSensitiveDataConsents",Ee.MSPA_COVERED_TRANSACTION="MspaCoveredTransaction",Ee.MSPA_OPT_OUT_OPTION_MODE="MspaOptOutOptionMode",Ee.MSPA_SERVICE_PROVIDER_MODE="MspaServiceProviderMode",Ee.GPC_SEGMENT_TYPE="GpcSegmentType",Ee.GPC_SEGMENT_INCLUDED="GpcSegmentIncluded",Ee.GPC="Gpc";var pe,de,_e=function(){l(o,Mt);var i=he(o);function o(t){var e;c(this,o);var n=new Map;n.set(le.VERSION.toString(),new pt(6,o.VERSION)),n.set(le.SHARING_NOTICE.toString(),new pt(2,0)),n.set(le.SALE_OPT_OUT_NOTICE.toString(),new pt(2,0)),n.set(le.TARGETED_ADVERTISING_OPT_OUT_NOTICE.toString(),new pt(2,0)),n.set(le.SALE_OPT_OUT.toString(),new pt(2,0)),n.set(le.TARGETED_ADVERTISING_OPT_OUT.toString(),new pt(2,0)),n.set(le.SENSITIVE_DATA_PROCESSING.toString(),new ee(2,7,[0,0,0,0,0,0,0])),n.set(le.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS.toString(),new pt(2,0)),n.set(le.MSPA_COVERED_TRANSACTION.toString(),new pt(2,0)),n.set(le.MSPA_OPT_OUT_OPTION_MODE.toString(),new pt(2,0)),n.set(le.MSPA_SERVICE_PROVIDER_MODE.toString(),new pt(2,0)),n.set(le.GPC_SEGMENT_TYPE.toString(),new pt(2,1)),n.set(le.GPC_SEGMENT_INCLUDED.toString(),new Ot(!0)),n.set(le.GPC.toString(),new Ot(!1));var r=[[le.VERSION.toString(),le.SHARING_NOTICE.toString(),le.SALE_OPT_OUT_NOTICE.toString(),le.TARGETED_ADVERTISING_OPT_OUT_NOTICE.toString(),le.SALE_OPT_OUT.toString(),le.TARGETED_ADVERTISING_OPT_OUT.toString(),le.SENSITIVE_DATA_PROCESSING.toString(),le.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS.toString(),le.MSPA_COVERED_TRANSACTION.toString(),le.MSPA_OPT_OUT_OPTION_MODE.toString(),le.MSPA_SERVICE_PROVIDER_MODE.toString()],[le.GPC_SEGMENT_TYPE.toString(),le.GPC.toString()]];return S(f(e=i.call(this,n,r)),"base64UrlEncoder",new ot),t&&0<t.length&&e.decode(t),e}return a(o,[{key:"encode",value:function(){var t=this.encodeSegmentsToBitStrings(),e=[];e.push(this.base64UrlEncoder.encode(t[0])),t[1]&&0<t[1].length&&(!0===this.fields.get(le.GPC_SEGMENT_INCLUDED).getValue()&&e.push(this.base64UrlEncoder.encode(t[1])));return e.join(".")}},{key:"decode",value:function(t){for(var e=t.split("."),n=[],r=!1,i=0;i<e.length;i++){var o=this.base64UrlEncoder.decode(e[i]);switch(o.substring(0,2)){case"00":n[0]=o;break;case"01":r=!0,n[1]=o;break;default:throw new Z("Unable to decode segment '"+e[i]+"'")}}this.decodeSegmentsFromBitStrings(n),this.fields.get(le.GPC_SEGMENT_INCLUDED).setValue(r)}},{key:"getId",value:function(){return o.ID}},{key:"getName",value:function(){return o.NAME}}]),o}();function ge(r){return function(){var t,e=E(r);if(function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(t){return}}}()){var n=E(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return h(this,t)}}S(_e,"ID",10),S(_e,"VERSION",1),S(_e,"NAME","uspcov1"),(de=pe=pe||{}).VERSION="Version",de.SHARING_NOTICE="SharingNotice",de.SALE_OPT_OUT_NOTICE="SaleOptOutNotice",de.TARGETED_ADVERTISING_OPT_OUT_NOTICE="TargetedAdvertisingOptOutNotice",de.SENSITIVE_DATA_PROCESSING_OPT_OUT_NOTICE="SensitiveDataProcessingOptOutNotice",de.SALE_OPT_OUT="SaleOptOut",de.TARGETED_ADVERTISING_OPT_OUT="TargetedAdvertisingOptOut",de.SENSITIVE_DATA_PROCESSING="SensitiveDataProcessing",de.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS="KnownChildSensitiveDataConsents",de.MSPA_COVERED_TRANSACTION="MspaCoveredTransaction",de.MSPA_OPT_OUT_OPTION_MODE="MspaOptOutOptionMode",de.MSPA_SERVICE_PROVIDER_MODE="MspaServiceProviderMode";var Te,Oe,Ne=function(){l(o,dt);var i=ge(o);function o(t){var e;c(this,o);var n=new Map;n.set(pe.VERSION.toString(),new pt(6,o.VERSION)),n.set(pe.SHARING_NOTICE.toString(),new pt(2,0)),n.set(pe.SALE_OPT_OUT_NOTICE.toString(),new pt(2,0)),n.set(pe.TARGETED_ADVERTISING_OPT_OUT_NOTICE.toString(),new pt(2,0)),n.set(pe.SENSITIVE_DATA_PROCESSING_OPT_OUT_NOTICE.toString(),new pt(2,0)),n.set(pe.SALE_OPT_OUT.toString(),new pt(2,0)),n.set(pe.TARGETED_ADVERTISING_OPT_OUT.toString(),new pt(2,0)),n.set(pe.SENSITIVE_DATA_PROCESSING.toString(),new ee(2,8,[0,0,0,0,0,0,0,0])),n.set(pe.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS.toString(),new pt(2,0)),n.set(pe.MSPA_COVERED_TRANSACTION.toString(),new pt(2,0)),n.set(pe.MSPA_OPT_OUT_OPTION_MODE.toString(),new pt(2,0)),n.set(pe.MSPA_SERVICE_PROVIDER_MODE.toString(),new pt(2,0));var r=[pe.VERSION.toString(),pe.SHARING_NOTICE.toString(),pe.SALE_OPT_OUT_NOTICE.toString(),pe.TARGETED_ADVERTISING_OPT_OUT_NOTICE.toString(),pe.SENSITIVE_DATA_PROCESSING_OPT_OUT_NOTICE.toString(),pe.SALE_OPT_OUT.toString(),pe.TARGETED_ADVERTISING_OPT_OUT.toString(),pe.SENSITIVE_DATA_PROCESSING.toString(),pe.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS.toString(),pe.MSPA_COVERED_TRANSACTION.toString(),pe.MSPA_OPT_OUT_OPTION_MODE.toString(),pe.MSPA_SERVICE_PROVIDER_MODE.toString()];return S(f(e=i.call(this,n,r)),"base64UrlEncoder",new ot),t&&0<t.length&&e.decode(t),e}return a(o,[{key:"encode",value:function(){return this.base64UrlEncoder.encode(this.encodeToBitString())}},{key:"decode",value:function(t){this.decodeFromBitString(this.base64UrlEncoder.decode(t))}},{key:"getId",value:function(){return o.ID}},{key:"getName",value:function(){return o.NAME}}]),o}();function Ie(r){return function(){var t,e=E(r);if(function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(t){return}}}()){var n=E(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return h(this,t)}}S(Ne,"ID",11),S(Ne,"VERSION",1),S(Ne,"NAME","usputv1"),(Oe=Te=Te||{}).VERSION="Version",Oe.SHARING_NOTICE="SharingNotice",Oe.SALE_OPT_OUT_NOTICE="SaleOptOutNotice",Oe.TARGETED_ADVERTISING_OPT_OUT_NOTICE="TargetedAdvertisingOptOutNotice",Oe.SALE_OPT_OUT="SaleOptOut",Oe.TARGETED_ADVERTISING_OPT_OUT="TargetedAdvertisingOptOut",Oe.SENSITIVE_DATA_PROCESSING="SensitiveDataProcessing",Oe.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS="KnownChildSensitiveDataConsents",Oe.MSPA_COVERED_TRANSACTION="MspaCoveredTransaction",Oe.MSPA_OPT_OUT_OPTION_MODE="MspaOptOutOptionMode",Oe.MSPA_SERVICE_PROVIDER_MODE="MspaServiceProviderMode",Oe.GPC_SEGMENT_TYPE="GpcSegmentType",Oe.GPC_SEGMENT_INCLUDED="GpcSegmentIncluded",Oe.GPC="Gpc";var ve=function(){l(o,Mt);var i=Ie(o);function o(t){var e;c(this,o);var n=new Map;n.set(Te.VERSION.toString(),new pt(6,o.VERSION)),n.set(Te.SHARING_NOTICE.toString(),new pt(2,0)),n.set(Te.SALE_OPT_OUT_NOTICE.toString(),new pt(2,0)),n.set(Te.TARGETED_ADVERTISING_OPT_OUT_NOTICE.toString(),new pt(2,0)),n.set(Te.SALE_OPT_OUT.toString(),new pt(2,0)),n.set(Te.TARGETED_ADVERTISING_OPT_OUT.toString(),new pt(2,0)),n.set(Te.SENSITIVE_DATA_PROCESSING.toString(),new ee(2,8,[0,0,0,0,0,0,0,0])),n.set(Te.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS.toString(),new ee(2,3,[0,0,0])),n.set(Te.MSPA_COVERED_TRANSACTION.toString(),new pt(2,0)),n.set(Te.MSPA_OPT_OUT_OPTION_MODE.toString(),new pt(2,0)),n.set(Te.MSPA_SERVICE_PROVIDER_MODE.toString(),new pt(2,0)),n.set(Te.GPC_SEGMENT_TYPE.toString(),new pt(2,1)),n.set(Te.GPC_SEGMENT_INCLUDED.toString(),new Ot(!0)),n.set(Te.GPC.toString(),new Ot(!1));var r=[[Te.VERSION.toString(),Te.SHARING_NOTICE.toString(),Te.SALE_OPT_OUT_NOTICE.toString(),Te.TARGETED_ADVERTISING_OPT_OUT_NOTICE.toString(),Te.SALE_OPT_OUT.toString(),Te.TARGETED_ADVERTISING_OPT_OUT.toString(),Te.SENSITIVE_DATA_PROCESSING.toString(),Te.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS.toString(),Te.MSPA_COVERED_TRANSACTION.toString(),Te.MSPA_OPT_OUT_OPTION_MODE.toString(),Te.MSPA_SERVICE_PROVIDER_MODE.toString()],[Te.GPC_SEGMENT_TYPE.toString(),Te.GPC.toString()]];return S(f(e=i.call(this,n,r)),"base64UrlEncoder",new ot),t&&0<t.length&&e.decode(t),e}return a(o,[{key:"encode",value:function(){var t=this.encodeSegmentsToBitStrings(),e=[];e.push(this.base64UrlEncoder.encode(t[0])),t[1]&&0<t[1].length&&(!0===this.fields.get(Te.GPC_SEGMENT_INCLUDED).getValue()&&e.push(this.base64UrlEncoder.encode(t[1])));return e.join(".")}},{key:"decode",value:function(t){for(var e=t.split("."),n=[],r=0;r<e.length;r++){var i=this.base64UrlEncoder.decode(e[r]);switch(i.substring(0,2)){case"00":n[0]=i;break;case"01":n[1]=i;break;default:throw new Z("Unable to decode segment '"+e[r]+"'")}}this.decodeSegmentsFromBitStrings(n)}},{key:"getId",value:function(){return o.ID}},{key:"getName",value:function(){return o.NAME}}]),o}();S(ve,"ID",12),S(ve,"VERSION",1),S(ve,"NAME","uspctv1");function Ae(){c(this,Ae)}S(Ae,"SECTION_ID_NAME_MAP",new Map([[Kt.ID,Kt.NAME],[qt.ID,qt.NAME],[$t.ID,$t.NAME],[oe.ID,oe.NAME],[ae.ID,ae.NAME],[fe.ID,fe.NAME],[_e.ID,_e.NAME],[Ne.ID,Ne.NAME],[ve.ID,ve.NAME]])),S(Ae,"SECTION_ORDER",[Kt.NAME,qt.NAME,$t.NAME,oe.NAME,ae.NAME,fe.NAME,_e.NAME,Ne.NAME,ve.NAME]);var Re=function(){function e(t){c(this,e),S(this,"sections",new Map),t&&0<t.length&&this.decode(t)}return a(e,[{key:"setFieldValue",value:function(t,e,n){var r=null;if(this.sections.has(t)?r=this.sections.get(t):t===qt.NAME?(r=new qt,this.sections.set(qt.NAME,r)):t===Kt.NAME?(r=new Kt,this.sections.set(Kt.NAME,r)):t===$t.NAME?(r=new $t,this.sections.set($t.NAME,r)):t===oe.NAME?(r=new oe,this.sections.set(oe.NAME,r)):t===ae.NAME?(r=new ae,this.sections.set(ae.NAME,r)):t===fe.NAME?(r=new fe,this.sections.set(fe.NAME,r)):t===_e.NAME?(r=new _e,this.sections.set(_e.NAME,r)):t===Ne.NAME?(r=new Ne,this.sections.set(Ne.NAME,r)):t===ve.NAME&&(r=new ve,this.sections.set(ve.NAME,r)),!r)throw new Error(t+" not found");r.setFieldValue(e,n)}},{key:"setFieldValueBySectionId",value:function(t,e,n){this.setFieldValue(Ae.SECTION_ID_NAME_MAP.get(t),e,n)}},{key:"getFieldValue",value:function(t,e){return this.sections.has(t)?this.sections.get(t).getFieldValue(e):null}},{key:"getFieldValueBySectionId",value:function(t,e){return this.getFieldValue(Ae.SECTION_ID_NAME_MAP.get(t),e)}},{key:"hasField",value:function(t,e){return!!this.sections.has(t)&&this.sections.get(t).hasField(e)}},{key:"hasFieldBySectionId",value:function(t,e){return this.hasField(Ae.SECTION_ID_NAME_MAP.get(t),e)}},{key:"hasSection",value:function(t){return this.sections.has(t)}},{key:"hasSectionId",value:function(t){return this.hasSection(Ae.SECTION_ID_NAME_MAP.get(t))}},{key:"deleteSection",value:function(t){this.sections.delete(t)}},{key:"deleteSectionById",value:function(t){this.deleteSection(Ae.SECTION_ID_NAME_MAP.get(t))}},{key:"clear",value:function(){this.sections.clear()}},{key:"getHeader",value:function(){var t=new gt;return t.setFieldValue("SectionIds",this.getSectionIds()),t.toObj()}},{key:"getSection",value:function(t){return this.sections.has(t)?this.sections.get(t).toObj():null}},{key:"getSectionIds",value:function(){for(var t=[],e=0;e<Ae.SECTION_ORDER.length;e++){var n=Ae.SECTION_ORDER[e];if(this.sections.has(n)){var r=this.sections.get(n);t.push(r.getId())}}return t}},{key:"encode",value:function(){for(var t=[],e=[],n=0;n<Ae.SECTION_ORDER.length;n++){var r=Ae.SECTION_ORDER[n];if(this.sections.has(r)){var i=this.sections.get(r);t.push(i.encode()),e.push(i.getId())}}var o=new gt;return o.setFieldValue("SectionIds",this.getSectionIds()),t.unshift(o.encode()),t.join("~")}},{key:"decode",value:function(t){this.sections.clear();var e=t.split("~"),n=new gt(e[0]);this.sections.set(gt.NAME,n);for(var r=n.getFieldValue("SectionIds"),i=0;i<r.length;i++)if(r[i]===qt.ID){var o=new qt(e[i+1]);this.sections.set(qt.NAME,o)}else if(r[i]===Kt.ID){var s=new Kt(e[i+1]);this.sections.set(Kt.NAME,s)}else if(r[i]===$t.ID){var c=new $t(e[i+1]);this.sections.set($t.NAME,c)}else if(r[i]===oe.ID){var u=new oe(e[i+1]);this.sections.set(oe.NAME,u)}else if(r[i]===ae.ID){var a=new ae(e[i+1]);this.sections.set(ae.NAME,a)}else if(r[i]===fe.ID){var S=new fe(e[i+1]);this.sections.set(fe.NAME,S)}else if(r[i]===_e.ID){var l=new _e(e[i+1]);this.sections.set(_e.NAME,l)}else if(r[i]===Ne.ID){var E=new Ne(e[i+1]);this.sections.set(Ne.NAME,E)}else if(r[i]===ve.ID){var f=new ve(e[i+1]);this.sections.set(ve.NAME,f)}}},{key:"encodeSection",value:function(t){return this.sections.has(t)?this.sections.get(t).encode():null}},{key:"encodeSectionById",value:function(t){return this.encodeSection(Ae.SECTION_ID_NAME_MAP.get(t))}},{key:"decodeSection",value:function(t,e){var n=null;this.sections.has(t)?n=this.sections.get(t):t===qt.NAME?(n=new qt,this.sections.set(qt.NAME,n)):t===Kt.NAME?(n=new Kt,this.sections.set(Kt.NAME,n)):t===$t.NAME?(n=new $t,this.sections.set($t.NAME,n)):t===oe.NAME?(n=new oe,this.sections.set(oe.NAME,n)):t===ae.NAME?(n=new ae,this.sections.set(ae.NAME,n)):t===fe.NAME?(n=new fe,this.sections.set(fe.NAME,n)):t===_e.NAME?(n=new _e,this.sections.set(_e.NAME,n)):t===Ne.NAME?(n=new Ne,this.sections.set(Ne.NAME,n)):t===ve.NAME&&(n=new ve,this.sections.set(ve.NAME,n)),n&&n.decode(e)}},{key:"decodeSectionById",value:function(t,e){this.decodeSection(Ae.SECTION_ID_NAME_MAP.get(t),e)}},{key:"toObject",value:function(){for(var t={},e=0;e<Ae.SECTION_ORDER.length;e++){var n=Ae.SECTION_ORDER[e];this.sections.has(n)&&(t[n]=this.sections.get(n).toObj())}return t}}]),e}(),Ce=function(){function t(){c(this,t),S(this,"gppVersion","1.0"),S(this,"apiSupport",[Kt.NAME,qt.NAME,$t.NAME,oe.NAME,ae.NAME,fe.NAME,_e.NAME,Ne.NAME,ve.NAME]),S(this,"eventQueue",new J(this)),S(this,"cmpStatus",Y.LOADING),S(this,"cmpDisplayStatus",W.HIDDEN),S(this,"applicableSections",[]),S(this,"gppModel",new Re),S(this,"cmpId",void 0),S(this,"cmpVersion",void 0),S(this,"currentAPI",void 0),S(this,"eventStatus",void 0)}return a(t,[{key:"reset",value:function(){delete this.cmpId,delete this.cmpVersion,delete this.currentAPI,delete this.eventStatus,this.gppModel=new Re,this.cmpStatus=Y.LOADING,this.cmpDisplayStatus=W.HIDDEN,this.eventQueue.clear()}}]),t}(),Pe=function(){function t(){c(this,t)}return a(t,null,[{key:"absCall",value:function(t,i,o,s){return new Promise(function(e,n){var r=new XMLHttpRequest;r.withCredentials=o,r.addEventListener("load",function(){if(r.readyState==XMLHttpRequest.DONE)if(200<=r.status&&r.status<300){var t=r.response;if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}e(t)}else n(new Error("HTTP Status: ".concat(r.status," response type: ").concat(r.responseType)))}),r.addEventListener("error",function(){n(new Error("error"))}),r.addEventListener("abort",function(){n(new Error("aborted"))}),null===i?r.open("GET",t,!0):r.open("POST",t,!0),r.responseType="json",r.timeout=s,r.ontimeout=function(){n(new Error("Timeout "+s+"ms "+t))},r.send(i)})}},{key:"post",value:function(t,e,n,r){var i=2<arguments.length&&void 0!==n&&n,o=3<arguments.length&&void 0!==r?r:0;return this.absCall(t,JSON.stringify(e),i,o)}},{key:"fetch",value:function(t,e,n){var r=1<arguments.length&&void 0!==e&&e,i=2<arguments.length&&void 0!==n?n:0;return this.absCall(t,null,r,i)}}]),t}();function ye(r){return function(){var t,e=E(r);if(function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(t){return}}}()){var n=E(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return h(this,t)}}var De=function(){l(r,e(Error));var n=ye(r);function r(t){var e;return c(this,r),(e=n.call(this,t)).name="GvlError",e}return r}(),Ve=function(){function e(){c(this,e)}return a(e,[{key:"has",value:function(t){return e.langSet.has(t)}},{key:"forEach",value:function(t){e.langSet.forEach(t)}},{key:"size",get:function(){return e.langSet.size}}]),e}();S(Ve,"langSet",new Set(["BG","CA","CS","DA","DE","EL","EN","ES","ET","FI","FR","HR","HU","IT","JA","LT","LV","MT","NL","NO","PL","PT","RO","RU","SK","SL","SV","TR","ZH"]));var me=function(){function u(){c(this,u),S(this,"vendors",void 0),S(this,"consentLanguages",new Ve),S(this,"gvlSpecificationVersion",void 0),S(this,"vendorListVersion",void 0),S(this,"tcfPolicyVersion",void 0),S(this,"lastUpdated",void 0),S(this,"purposes",void 0),S(this,"specialPurposes",void 0),S(this,"features",void 0),S(this,"specialFeatures",void 0),S(this,"stacks",void 0),S(this,"language",u.DEFAULT_LANGUAGE),S(this,"vendorIds",void 0),S(this,"ready",!1),S(this,"fullVendorList",void 0),S(this,"byPurposeVendorMap",void 0),S(this,"bySpecialPurposeVendorMap",void 0),S(this,"byFeatureVendorMap",void 0),S(this,"bySpecialFeatureVendorMap",void 0),S(this,"baseUrl",void 0),S(this,"languageFilename","purposes-[LANG].json")}var e,n;return a(u,[{key:"changeLanguage",value:(n=t(regeneratorRuntime.mark(function t(e){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.toUpperCase(),!this.consentLanguages.has(n)){t.next=18;break}if(n!==this.language)return this.language=n,r=this.baseUrl+this.languageFilename.replace("[LANG]",e),t.prev=5,t.t0=this,t.next=9,Pe.fetch(r);t.next=16;break;case 9:t.t1=t.sent,t.t0.populate.call(t.t0,t.t1),t.next=16;break;case 13:throw t.prev=13,t.t2=t.catch(5),new De("unable to load language: "+t.t2.message);case 16:t.next=19;break;case 18:throw new De("unsupported language ".concat(e));case 19:case"end":return t.stop()}},t,this,[[5,13]])})),function(t){return n.apply(this,arguments)})},{key:"getJson",value:function(){return JSON.parse(JSON.stringify({gvlSpecificationVersion:this.gvlSpecificationVersion,vendorListVersion:this.vendorListVersion,tcfPolicyVersion:this.tcfPolicyVersion,lastUpdated:this.lastUpdated,purposes:this.purposes,specialPurposes:this.specialPurposes,features:this.features,specialFeatures:this.specialFeatures,stacks:this.stacks,vendors:this.fullVendorList}))}},{key:"isVendorList",value:function(t){return void 0!==t&&void 0!==t.vendors}},{key:"populate",value:function(t){this.purposes=t.purposes,this.specialPurposes=t.specialPurposes,this.features=t.features,this.specialFeatures=t.specialFeatures,this.stacks=t.stacks,this.isVendorList(t)&&(this.gvlSpecificationVersion=t.gvlSpecificationVersion,this.tcfPolicyVersion=t.tcfPolicyVersion,this.vendorListVersion=t.vendorListVersion,this.lastUpdated=t.lastUpdated,"string"==typeof this.lastUpdated&&(this.lastUpdated=new Date(this.lastUpdated)),this.vendors=t.vendors,this.fullVendorList=t.vendors,this.mapVendors(),this.ready=!0)}},{key:"mapVendors",value:function(t){var r=this;this.byPurposeVendorMap={},this.bySpecialPurposeVendorMap={},this.byFeatureVendorMap={},this.bySpecialFeatureVendorMap={},Object.keys(this.purposes).forEach(function(t){r.byPurposeVendorMap[t]={legInt:new Set,consent:new Set,flexible:new Set}}),Object.keys(this.specialPurposes).forEach(function(t){r.bySpecialPurposeVendorMap[t]=new Set}),Object.keys(this.features).forEach(function(t){r.byFeatureVendorMap[t]=new Set}),Object.keys(this.specialFeatures).forEach(function(t){r.bySpecialFeatureVendorMap[t]=new Set}),Array.isArray(t)||(t=Object.keys(this.fullVendorList).map(function(t){return+t})),this.vendorIds=new Set(t),this.vendors=t.reduce(function(t,e){var n=r.vendors[String(e)];return n&&void 0===n.deletedDate&&(n.purposes.forEach(function(t){r.byPurposeVendorMap[String(t)].consent.add(e)}),n.specialPurposes.forEach(function(t){r.bySpecialPurposeVendorMap[String(t)].add(e)}),n.legIntPurposes.forEach(function(t){r.byPurposeVendorMap[String(t)].legInt.add(e)}),n.flexiblePurposes&&n.flexiblePurposes.forEach(function(t){r.byPurposeVendorMap[String(t)].flexible.add(e)}),n.features.forEach(function(t){r.byFeatureVendorMap[String(t)].add(e)}),n.specialFeatures.forEach(function(t){r.bySpecialFeatureVendorMap[String(t)].add(e)}),t[e]=n),t},{})}},{key:"getFilteredVendors",value:function(t,e,n,r){var i=this,o=t.charAt(0).toUpperCase()+t.slice(1),s={};return("purpose"===t&&n?this["by"+o+"VendorMap"][String(e)][n]:this["by"+(r?"Special":"")+o+"VendorMap"][String(e)]).forEach(function(t){s[String(t)]=i.vendors[String(t)]}),s}},{key:"getVendorsWithConsentPurpose",value:function(t){return this.getFilteredVendors("purpose",t,"consent")}},{key:"getVendorsWithLegIntPurpose",value:function(t){return this.getFilteredVendors("purpose",t,"legInt")}},{key:"getVendorsWithFlexiblePurpose",value:function(t){return this.getFilteredVendors("purpose",t,"flexible")}},{key:"getVendorsWithSpecialPurpose",value:function(t){return this.getFilteredVendors("purpose",t,void 0,!0)}},{key:"getVendorsWithFeature",value:function(t){return this.getFilteredVendors("feature",t)}},{key:"getVendorsWithSpecialFeature",value:function(t){return this.getFilteredVendors("feature",t,void 0,!0)}},{key:"narrowVendorsTo",value:function(t){this.mapVendors(t)}},{key:"isReady",get:function(){return this.ready}}],[{key:"fromVendorList",value:function(t){var e=new u;return e.populate(t),e}},{key:"fromUrl",value:(e=t(regeneratorRuntime.mark(function t(e){var n,r,i,o,s,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if((n=e.baseUrl)&&0!==n.length){t.next=3;break}throw new De("Invalid baseUrl: '"+n+"'");case 3:if(/^https?:\/\/vendorlist\.consensu\.org\//.test(n))throw new De("Invalid baseUrl!  You may not pull directly from vendorlist.consensu.org and must provide your own cache");t.next=5;break;case 5:if(0<n.length&&"/"!==n[n.length-1]&&(n+="/"),(r=new u).baseUrl=n,e.languageFilename?r.languageFilename=e.languageFilename:r.languageFilename="purposes-[LANG].json",0<e.version)return i=e.versionedFilename,o=n+(i=i||"archives/vendor-list-v[VERSION].json").replace("[VERSION]",String(e.version)),t.t0=r,t.next=16,Pe.fetch(o);t.next=20;break;case 16:t.t1=t.sent,t.t0.populate.call(t.t0,t.t1),t.next=28;break;case 20:return s=e.latestFilename,c=n+(s=s||"vendor-list.json"),t.t2=r,t.next=26,Pe.fetch(c);case 26:t.t3=t.sent,t.t2.populate.call(t.t2,t.t3);case 28:return t.abrupt("return",r);case 29:case"end":return t.stop()}},t)})),function(t){return e.apply(this,arguments)})},{key:"isInstanceOf",value:function(t){return"object"===r(t)&&"function"==typeof t.narrowVendorsTo}}]),u}();S(me,"DEFAULT_LANGUAGE","EN");var Me=function(){function r(t,e,n){c(this,r),S(this,"callResponder",void 0),S(this,"cmpApiContext",void 0),this.cmpApiContext=new Ce,this.cmpApiContext.cmpId=t,this.cmpApiContext.cmpVersion=e,this.callResponder=new $(this.cmpApiContext,n)}var e;return a(r,[{key:"fireEvent",value:function(t,e){this.cmpApiContext.eventQueue.exec(t,e)}},{key:"fireErrorEvent",value:function(t){this.cmpApiContext.eventQueue.exec("error",t)}},{key:"fireSectionChange",value:function(t){this.cmpApiContext.eventQueue.exec("sectionChange",t)}},{key:"getEventStatus",value:function(){return this.cmpApiContext.eventStatus}},{key:"setEventStatus",value:function(t){this.cmpApiContext.eventStatus=t}},{key:"getCmpStatus",value:function(){return this.cmpApiContext.cmpStatus}},{key:"setCmpStatus",value:function(t){this.cmpApiContext.cmpStatus=t,this.cmpApiContext.eventQueue.exec("cmpStatus",t)}},{key:"getCmpDisplayStatus",value:function(){return this.cmpApiContext.cmpDisplayStatus}},{key:"setCmpDisplayStatus",value:function(t){this.cmpApiContext.cmpDisplayStatus=t,this.cmpApiContext.eventQueue.exec("cmpDisplayStatus",t)}},{key:"getApplicableSections",value:function(){return this.cmpApiContext.applicableSections}},{key:"setApplicableSections",value:function(t){this.cmpApiContext.applicableSections=t}},{key:"getCurrentAPI",value:function(){return this.cmpApiContext.currentAPI}},{key:"setCurrentAPI",value:function(t){this.cmpApiContext.currentAPI=t}},{key:"setGppString",value:function(t){this.cmpApiContext.gppModel.decode(t)}},{key:"getGppString",value:function(){return this.cmpApiContext.gppModel.encode()}},{key:"setSectionString",value:function(t,e){this.cmpApiContext.gppModel.decodeSection(t,e)}},{key:"setSectionStringById",value:function(t,e){this.setSectionString(Ae.SECTION_ID_NAME_MAP.get(t),e)}},{key:"getSectionString",value:function(t){return this.cmpApiContext.gppModel.encodeSection(t)}},{key:"getSectionStringById",value:function(t){return this.getSectionString(Ae.SECTION_ID_NAME_MAP.get(t))}},{key:"setFieldValue",value:function(t,e,n){this.cmpApiContext.gppModel.setFieldValue(t,e,n)}},{key:"setFieldValueBySectionId",value:function(t,e,n){this.setFieldValue(Ae.SECTION_ID_NAME_MAP.get(t),e,n)}},{key:"getFieldValue",value:function(t,e){return this.cmpApiContext.gppModel.getFieldValue(t,e)}},{key:"getFieldValueBySectionId",value:function(t,e){return this.getFieldValue(Ae.SECTION_ID_NAME_MAP.get(t),e)}},{key:"getSection",value:function(t){return this.cmpApiContext.gppModel.getSection(t)}},{key:"getSectionById",value:function(t){return this.getSection(Ae.SECTION_ID_NAME_MAP.get(t))}},{key:"hasSection",value:function(t){return this.cmpApiContext.gppModel.hasSection(t)}},{key:"hasSectionId",value:function(t){return this.hasSection(Ae.SECTION_ID_NAME_MAP.get(t))}},{key:"deleteSection",value:function(t){this.cmpApiContext.gppModel.deleteSection(t)}},{key:"deleteSectionById",value:function(t){this.deleteSection(Ae.SECTION_ID_NAME_MAP.get(t))}},{key:"clear",value:function(){this.cmpApiContext.gppModel.clear()}},{key:"getObject",value:function(){return this.cmpApiContext.gppModel.toObject()}},{key:"getGvlFromVendorList",value:function(t){return me.fromVendorList(t)}},{key:"getGvlFromUrl",value:(e=t(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",me.fromUrl(e));case 1:case"end":return t.stop()}},t)})),function(t){return e.apply(this,arguments)})}]),r}();function we(){}var Ue=new(we.prototype.getCmpApi=function(t,e,n){return new Me(t,e,n)},we);window.otIabModule={gppSdkRef:{gppCmpApi:Ue.getCmpApi}}}();
